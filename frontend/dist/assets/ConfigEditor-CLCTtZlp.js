import{r as u,w as R,o as D,f as o,l as x,k as a,g as e,t as r,F as E,p as S,m as L,C as g,i as T,v as z,h as I}from"./vendor-BDu8AGUg.js";import{_ as U,a as y}from"./index-ixAHyd21.js";const $={class:"modal-body"},j={key:0,class:"loading-container"},q={key:1,class:"error-container"},A={class:"error-message"},G={key:2,class:"config-editor-content"},H={class:"file-selection-section"},J={class:"file-categories"},K={class:"file-list"},O=["onClick"],Q={class:"file-name"},W={class:"file-description"},X={class:"file-path"},Y={key:0,class:"file-editor-section"},Z={class:"editor-header"},ee={class:"editor-actions"},se=["disabled"],te=["disabled"],oe={class:"editor-content"},ae={class:"file-info"},le={class:"editor-container"},ne=["disabled"],ie={key:0,class:"save-result"},de={key:0,class:"success-message"},ce={key:1,class:"error-message"},re={key:1,class:"no-file-selected"},ue={__name:"ConfigEditor",props:{open:Boolean},emits:["update:open"],setup(b,{emit:B}){const k=b,M=B,m=u(!1),c=u(""),C=u({}),n=u(null),v=u(""),p=u(!1),i=u(null),_=()=>{M("update:open",!1),V()},V=()=>{n.value=null,v.value="",i.value=null,c.value=""},h=async()=>{var l,s;m.value=!0,c.value="";try{const t=await y.get("/config/configeditor/files");t.data.success?C.value=t.data.files:c.value=t.data.message||"Failed to load configuration files"}catch(t){console.error("Config editor files error:",t),c.value=((s=(l=t.response)==null?void 0:l.data)==null?void 0:s.message)||"Failed to load configuration files"}finally{m.value=!1}},F=async l=>{var s,t;n.value=l,v.value="",i.value=null;try{const d=await y.post("/config/configeditor/content",{filePath:l.path});d.data.success?v.value=d.data.content:c.value=d.data.message||"Failed to load file content"}catch(d){console.error("File content error:",d),c.value=((t=(s=d.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to load file content"}},N=async()=>{n.value&&await F(n.value)},P=async()=>{var l,s;if(n.value){p.value=!0,i.value=null;try{const t=await y.post("/config/configeditor/save",{filePath:n.value.path,content:v.value});t.data.success?i.value={success:!0,message:t.data.message}:i.value={success:!1,message:t.data.message}}catch(t){console.error("Save file error:",t),i.value={success:!1,message:((s=(l=t.response)==null?void 0:l.data)==null?void 0:s.message)||"Failed to save file"}}finally{p.value=!1}}};return R(()=>k.open,l=>{l&&h()}),D(()=>{k.open&&h()}),(l,s)=>b.open?(a(),o("div",{key:0,class:"modal-overlay",onClick:_},[e("div",{class:"modal-content config-editor-modal",onClick:s[1]||(s[1]=I(()=>{},["stop"]))},[e("div",{class:"modal-header"},[s[2]||(s[2]=e("h3",null,"Configuration Editor",-1)),e("button",{class:"close-button",onClick:_},"√ó")]),e("div",$,[m.value?(a(),o("div",j,[...s[3]||(s[3]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"Loading configuration files...",-1)])])):c.value?(a(),o("div",q,[e("div",A,[s[4]||(s[4]=e("h4",null,"Error",-1)),e("p",null,r(c.value),1),e("button",{class:"btn btn-primary",onClick:h},"Retry")])])):(a(),o("div",G,[e("div",H,[s[5]||(s[5]=e("h4",null,"Select Configuration File",-1)),e("div",J,[(a(!0),o(E,null,S(C.value,(t,d)=>(a(),o("div",{key:d,class:"file-category"},[e("h5",null,r(d),1),e("div",K,[(a(!0),o(E,null,S(t,f=>{var w;return a(),o("button",{key:f.path,class:L(["file-button",{active:((w=n.value)==null?void 0:w.path)===f.path}]),onClick:ve=>F(f)},[e("div",Q,r(f.name),1),e("div",W,r(f.description),1),e("div",X,r(f.path),1)],10,O)}),128))])]))),128))])]),n.value?(a(),o("div",Y,[e("div",Z,[e("h4",null,"Editing: "+r(n.value.name),1),e("div",ee,[e("button",{class:"btn btn-secondary",onClick:N,disabled:p.value},[...s[6]||(s[6]=[e("span",{class:"icon"},"üîÑ",-1),g(" Reload ",-1)])],8,se),e("button",{class:"btn btn-primary",onClick:P,disabled:p.value},[...s[7]||(s[7]=[e("span",{class:"icon"},"üíæ",-1),g(" Save ",-1)])],8,te)])]),e("div",oe,[e("div",ae,[s[8]||(s[8]=e("strong",null,"Path:",-1)),g(" "+r(n.value.path),1)]),e("div",le,[T(e("textarea",{"onUpdate:modelValue":s[0]||(s[0]=t=>v.value=t),class:"file-editor",placeholder:"File content will appear here...",disabled:p.value},null,8,ne),[[z,v.value]])]),i.value?(a(),o("div",ie,[i.value.success?(a(),o("div",de,[...s[9]||(s[9]=[e("span",{class:"icon"},"‚úÖ",-1),g(" File saved successfully! ",-1)])])):(a(),o("div",ce,[s[10]||(s[10]=e("span",{class:"icon"},"‚ùå",-1)),g(" "+r(i.value.message),1)]))])):x("",!0)])])):(a(),o("div",re,[...s[11]||(s[11]=[e("div",{class:"placeholder-content"},[e("div",{class:"icon"},"üìÅ"),e("h4",null,"Select a Configuration File"),e("p",null,"Choose a file from the list above to edit its contents.")],-1)])]))]))]),e("div",{class:"modal-footer"},[e("button",{class:"btn btn-secondary",onClick:_},"Close")])])])):x("",!0)}},ge=U(ue,[["__scopeId","data-v-12ab721d"]]);export{ge as default};
//# sourceMappingURL=ConfigEditor-CLCTtZlp.js.map
