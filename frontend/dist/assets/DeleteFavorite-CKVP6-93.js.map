{"version":3,"file":"DeleteFavorite-CKVP6-93.js","sources":["../../src/components/DeleteFavorite.vue"],"sourcesContent":["<template>\n  <Teleport to=\"body\">\n    <Transition name=\"modal\">\n      <div v-if=\"open\" class=\"delete-favorite-modal\">\n        <div class=\"delete-favorite-overlay\" @click=\"closeModal\"></div>\n        <div class=\"delete-favorite-content\">\n          <div class=\"delete-favorite-header\">\n            <h2>{{ title }}</h2>\n            <button class=\"close-button\" @click=\"closeModal\">&times;</button>\n          </div>\n\n          <div class=\"delete-favorite-body\">\n            <!-- Loading state -->\n            <div v-if=\"loading\" class=\"loading\">\n              <p>Loading favorites...</p>\n            </div>\n\n            <!-- Error state -->\n            <div v-else-if=\"error\" class=\"error-message\">\n              <p>{{ error }}</p>\n            </div>\n\n            <!-- Success message -->\n            <div v-else-if=\"result && result.success\" class=\"success-message\">\n              <p>{{ result.message }}</p>\n            </div>\n\n            <!-- Empty state -->\n            <div v-else-if=\"!loading && favorites.length === 0\" class=\"empty-state\">\n              <h3>No Favorites Found</h3>\n              <p>You don't have any favorites configured yet.</p>\n              <p>Use the \"Add Favorite\" button to add nodes to your favorites list.</p>\n            </div>\n\n            <!-- Favorites table -->\n            <div v-else class=\"favorites-section\">\n              <div class=\"favorites-info\">\n                <h3>Favorites File</h3>\n                <p><strong>User:</strong> {{ currentUser }}</p>\n                <p><strong>File:</strong> {{ fileName }}</p>\n              </div>\n\n              <table class=\"favorites-table\">\n                <thead>\n                  <tr>\n                    <th>Section</th>\n                    <th>Label</th>\n                    <th>Command</th>\n                    <th>Node</th>\n                    <th>Action</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"favorite in favorites\" :key=\"`${favorite.section}-${favorite.index}`\">\n                    <td>\n                      <span :class=\"['section-badge', favorite.section === 'general' ? 'general' : 'node']\">\n                        {{ favorite.section }}\n                      </span>\n                    </td>\n                    <td>{{ favorite.label }}</td>\n                    <td>\n                      <div class=\"command-preview\">\n                        {{ favorite.command }}\n                      </div>\n                    </td>\n                    <td>\n                      <span v-if=\"favorite.node\" class=\"section-badge node\">\n                        {{ favorite.node }}\n                      </span>\n                      <span v-else class=\"no-node\">N/A</span>\n                    </td>\n                    <td>\n                      <button \n                        type=\"button\" \n                        class=\"delete-btn\" \n                        @click=\"confirmDelete(favorite)\"\n                        :disabled=\"saving\"\n                      >\n                        {{ saving ? 'Deleting...' : 'Delete' }}\n                      </button>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n          </div>\n\n          <div class=\"delete-favorite-footer\">\n            <div class=\"button-group\">\n              <input \n                v-if=\"result && result.success\" \n                type=\"button\" \n                value=\"Refresh Parent Window\" \n                @click=\"refreshParent\"\n                class=\"refresh-btn\"\n              >\n              <input \n                type=\"button\" \n                value=\"Close\" \n                @click=\"closeModal\"\n                class=\"close-btn\"\n              >\n            </div>\n          </div>\n        </div>\n      </div>\n    </Transition>\n  </Teleport>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch } from 'vue'\nimport { api } from '@/utils/api'\nimport type { AxiosErrorResponse } from '@/types/api'\n\ninterface Props {\n  open: boolean\n}\n\ninterface Favorite {\n  section: string\n  index: number\n  label: string\n  command: string\n  node: string | false\n}\n\ninterface DeleteResult {\n  success: boolean\n  message: string\n  deleted_label?: string\n}\n\nconst props = defineProps<Props>()\nconst emit = defineEmits<{\n  'update:open': [value: boolean]\n  'favorite-deleted': [result: DeleteResult]\n}>()\n\nconst loading = ref(false)\nconst saving = ref(false)\nconst error = ref('')\nconst result = ref<DeleteResult | null>(null)\nconst favorites = ref<Favorite[]>([])\nconst currentUser = ref('')\nconst fileName = ref('')\n\nconst title = computed(() => {\n  if (result.value && result.value.success) {\n    return 'Favorite Deleted Successfully'\n  }\n  if (error.value) {\n    return 'Error Loading Favorites'\n  }\n  if (favorites.value.length === 0 && !loading.value) {\n    return 'No Favorites Found'\n  }\n  return 'Delete Favorite'\n})\n\nconst loadFavorites = async () => {\n  loading.value = true\n  error.value = ''\n  result.value = null\n  \n  try {\n    const response = await api.get('/config/favorites')\n    \n    if (response.data.success) {\n      favorites.value = response.data.data\n      // Get user info from the API response\n      currentUser.value = response.data.user || 'Unknown User'\n      fileName.value = response.data.fileName || 'favorites.ini'\n    } else {\n      error.value = response.data.message || 'Failed to load favorites'\n    }\n  } catch (err: unknown) {\n    const axiosError = err as AxiosErrorResponse\n    error.value = axiosError.response?.data?.message || 'Failed to load favorites'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst confirmDelete = async (favorite: Favorite) => {\n  if (!confirm(`Are you sure you want to delete the favorite \"${favorite.label}\"?`)) {\n    return\n  }\n  \n  await deleteFavorite(favorite)\n}\n\nconst deleteFavorite = async (favorite: Favorite) => {\n  saving.value = true\n  error.value = ''\n  \n  try {\n    const response = await api.delete('/config/favorites', {\n      data: {\n        section: favorite.section,\n        index: favorite.index\n      }\n    })\n    \n    if (response.data.success) {\n      result.value = response.data\n      // Reload favorites after deletion\n      await loadFavorites()\n      emit('favorite-deleted', response.data)\n    } else {\n      error.value = response.data.message || 'Failed to delete favorite'\n    }\n  } catch (err: unknown) {\n    const axiosError = err as AxiosErrorResponse\n    error.value = axiosError.response?.data?.message || 'Failed to delete favorite'\n  } finally {\n    saving.value = false\n  }\n}\n\nconst closeModal = () => {\n  emit('update:open', false)\n}\n\nconst refreshParent = () => {\n  window.location.reload()\n  closeModal()\n}\n\n// Load favorites when modal opens\nwatch(() => props.open, (newOpen) => {\n  if (newOpen) {\n    // Reset state when modal opens\n    error.value = ''\n    result.value = null\n    favorites.value = []\n    currentUser.value = ''\n    fileName.value = ''\n    loadFavorites()\n  }\n})\n</script>\n\n<style scoped>\n.delete-favorite-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.delete-favorite-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n\n.delete-favorite-content {\n  position: relative;\n  background-color: #1A1A1A;\n  border: 1px solid #374151;\n  border-radius: 8px;\n  width: 90%;\n  max-width: 900px;\n  max-height: 90vh;\n  overflow-y: auto;\n  color: #E0E0E0;\n}\n\n.delete-favorite-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 2px solid #374151;\n}\n\n.delete-favorite-header h2 {\n  margin: 0;\n  color: #4A90E2;\n}\n\n.close-button {\n  background: none;\n  border: none;\n  color: #E0E0E0;\n  font-size: 24px;\n  cursor: pointer;\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.close-button:hover {\n  color: #EF4444;\n}\n\n.delete-favorite-body {\n  padding: 20px;\n}\n\n.loading, .error-message, .success-message, .empty-state {\n  text-align: center;\n  padding: 40px 20px;\n}\n\n.error-message {\n  background-color: rgba(239, 68, 68, 0.1);\n  border: 1px solid #EF4444;\n  color: #EF4444;\n  border-radius: 4px;\n}\n\n.success-message {\n  background-color: rgba(16, 185, 129, 0.1);\n  border: 1px solid #10B981;\n  color: #10B981;\n  border-radius: 4px;\n}\n\n.empty-state h3 {\n  color: #6B7280;\n  margin-bottom: 10px;\n}\n\n.empty-state p {\n  color: #9CA3AF;\n  margin: 5px 0;\n}\n\n.favorites-info {\n  margin-bottom: 20px;\n  padding: 15px;\n  background-color: #2A2A2A;\n  border-radius: 4px;\n}\n\n.favorites-info h3 {\n  margin: 0 0 10px 0;\n  color: #4A90E2;\n}\n\n.favorites-info p {\n  margin: 5px 0;\n  color: #D1D5DB;\n}\n\n.favorites-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin-bottom: 20px;\n}\n\n.favorites-table th,\n.favorites-table td {\n  padding: 10px;\n  text-align: left;\n  border-bottom: 1px solid #374151;\n}\n\n.favorites-table th {\n  background-color: #2A2A2A;\n  font-weight: bold;\n  border-bottom: 1px solid #000000;\n  color: #4A90E2;\n}\n\n.favorites-table tr:hover {\n  background-color: #2A2A2A;\n}\n\n.section-badge {\n  background-color: #4A90E2;\n  color: white;\n  padding: 2px 8px;\n  border-radius: 12px;\n  font-size: 12px;\n  font-weight: bold;\n}\n\n.section-badge.general {\n  background-color: #10B981;\n}\n\n.section-badge.node {\n  background-color: #F59E0B;\n}\n\n.no-node {\n  color: #6B7280;\n}\n\n.command-preview {\n  font-family: monospace;\n  background-color: #2A2A2A;\n  padding: 5px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  color: #D1D5DB;\n}\n\n.delete-btn {\n  background-color: #EF4444;\n  color: white;\n  border: none;\n  padding: 5px 10px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 12px;\n}\n\n.delete-btn:hover:not(:disabled) {\n  background-color: #DC2626;\n}\n\n.delete-btn:disabled {\n  background-color: #6B7280;\n  cursor: not-allowed;\n}\n\n.delete-favorite-footer {\n  padding: 20px;\n  border-top: 1px solid #374151;\n}\n\n.button-group {\n  text-align: center;\n}\n\n.button-group input[type=\"button\"] {\n  background-color: #4A90E2;\n  color: white;\n  border: none;\n  padding: 8px 16px;\n  border-radius: 8px;\n  cursor: pointer;\n  margin: 0 8px;\n  font-weight: bold;\n  transition: all 0.3s ease;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);\n  min-width: 120px;\n  max-width: 200px;\n}\n\n.button-group input[type=\"button\"]:hover {\n  background-color: #5BA0F2;\n  transform: translateY(-1px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);\n}\n\n.refresh-btn {\n  background-color: #10B981 !important;\n}\n\n.refresh-btn:hover {\n  background-color: #059669 !important;\n}\n\n.close-btn {\n  background-color: #6B7280 !important;\n}\n\n.close-btn:hover {\n  background-color: #4B5563 !important;\n}\n\n/* Modal transitions */\n.modal-enter-active,\n.modal-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.modal-enter-from,\n.modal-leave-to {\n  opacity: 0;\n}\n</style>\n"],"names":["props","__props","emit","__emit","loading","ref","saving","error","result","favorites","currentUser","fileName","title","computed","loadFavorites","response","api","err","axiosError","_b","_a","confirmDelete","favorite","deleteFavorite","closeModal","refreshParent","watch","newOpen","_createBlock","_Teleport","_createVNode","_Transition","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_cache","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","_hoisted_10","_createTextVNode","_hoisted_11","_Fragment","_renderList","_normalizeClass","_hoisted_12","_hoisted_13","_hoisted_14","$event","_hoisted_15","_hoisted_16","_hoisted_17"],"mappings":"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"}