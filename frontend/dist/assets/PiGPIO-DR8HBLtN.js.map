{"version":3,"file":"PiGPIO-DR8HBLtN.js","sources":["../../src/components/PiGPIO.vue"],"sourcesContent":["<template>\n  <div v-if=\"isVisible\" class=\"modal-overlay\" @click=\"closeModal\">\n    <div class=\"modal-content\" @click.stop>\n      <div class=\"modal-header\">\n        <h3>Pi GPIO Control</h3>\n        <button class=\"close-button\" @click=\"closeModal\">&times;</button>\n      </div>\n\n      <div class=\"modal-body\">\n        <!-- Loading State -->\n        <div v-if=\"loading\" class=\"loading\">\n          <div class=\"spinner\"></div>\n          <p>{{ loadingMessage }}</p>\n        </div>\n\n        <!-- Error State -->\n        <div v-if=\"error\" class=\"error-message\">\n          <p>{{ error }}</p>\n        </div>\n\n        <!-- Success Message -->\n        <div v-if=\"successMessage\" class=\"success-message\">\n          <p>{{ successMessage }}</p>\n        </div>\n\n        <!-- Main Content -->\n        <div v-if=\"!loading && !error\" class=\"gpio-content\">\n          <!-- Form Section -->\n          <div class=\"form-section\">\n            <h4>GPIO Pin Control</h4>\n            <form @submit.prevent=\"executeAction\" class=\"gpio-form\">\n              <div class=\"form-row\">\n                <div class=\"form-group\">\n                  <label for=\"pin\">GPIO Pin:</label>\n                  <input \n                    id=\"pin\" \n                    v-model=\"formData.pin\" \n                    type=\"number\" \n                    min=\"0\" \n                    max=\"40\" \n                    required\n                    placeholder=\"0-40\"\n                  >\n                </div>\n                <div class=\"form-group\">\n                  <label for=\"state\">State:</label>\n                  <select id=\"state\" v-model=\"formData.state\" required>\n                    <option value=\"\">Select State</option>\n                    <option value=\"input\">Input</option>\n                    <option value=\"output\">Output</option>\n                    <option value=\"up\">Pull Up</option>\n                    <option value=\"down\">Pull Down</option>\n                    <option value=\"0\">Write 0 (LOW)</option>\n                    <option value=\"1\">Write 1 (HIGH)</option>\n                  </select>\n                </div>\n              </div>\n\n              <div class=\"form-actions\">\n                <button type=\"submit\" class=\"execute-button\" :disabled=\"executing\">\n                  {{ executing ? 'Executing...' : 'Execute' }}\n                </button>\n                <button type=\"button\" @click=\"refreshStatus\" class=\"refresh-button\" :disabled=\"loading\">\n                  Refresh Status\n                </button>\n              </div>\n            </form>\n          </div>\n\n          <!-- Status Section -->\n          <div class=\"status-section\">\n            <h4>GPIO Status</h4>\n            <div class=\"status-content\">\n              <div v-if=\"gpioStatus.pins && gpioStatus.pins.length > 0\" class=\"status-table\">\n                <table>\n                  <thead>\n                    <tr>\n                      <th>Pin</th>\n                      <th>Mode</th>\n                      <th>Value</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr v-for=\"pin in gpioStatus.pins\" :key=\"pin.pin\">\n                      <td>{{ pin.pin }}</td>\n                      <td>\n                        <span :class=\"getModeClass(pin.mode)\">{{ pin.mode }}</span>\n                      </td>\n                      <td>\n                        <span :class=\"getValueClass(pin.value)\">{{ pin.value }}</span>\n                      </td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n              <div v-else-if=\"gpioStatus.error\" class=\"error-status\">\n                <p>{{ gpioStatus.error }}</p>\n              </div>\n              <div v-else class=\"empty-status\">\n                <p>No GPIO status available</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport { api } from '@/utils/api'\n\nconst props = defineProps({\n  isVisible: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits(['update:isVisible'])\n\n// Reactive state\nconst loading = ref(false)\nconst executing = ref(false)\nconst error = ref('')\nconst successMessage = ref('')\nconst loadingMessage = ref('Loading...')\nconst gpioStatus = ref({ pins: [] })\n\n// Form data\nconst formData = ref({\n  pin: '',\n  state: ''\n})\n\n// Watch for modal visibility changes\nwatch(() => props.isVisible, (newVal) => {\n  if (newVal) {\n    resetState()\n    loadGPIOStatus()\n  }\n})\n\n// Methods\nconst closeModal = () => {\n  emit('update:isVisible', false)\n  resetState()\n}\n\nconst resetState = () => {\n  loading.value = false\n  executing.value = false\n  error.value = ''\n  successMessage.value = ''\n  gpioStatus.value = { pins: [] }\n  formData.value = {\n    pin: '',\n    state: ''\n  }\n}\n\nconst loadGPIOStatus = async () => {\n  loading.value = true\n  loadingMessage.value = 'Loading GPIO status...'\n  error.value = ''\n  successMessage.value = ''\n\n  try {\n    const response = await api.post('/nodes/pigpio')\n\n    if (response.data.success) {\n      gpioStatus.value = response.data.data.gpio_status\n    } else {\n      error.value = response.data.message || 'Failed to load GPIO status'\n    }\n  } catch (err) {\n    console.error('GPIO error:', err)\n    error.value = err.response?.data?.message || 'Failed to load GPIO status'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst executeAction = async () => {\n  if (!formData.value.pin || !formData.value.state) {\n    error.value = 'Please fill in all fields'\n    return\n  }\n\n  executing.value = true\n  error.value = ''\n  successMessage.value = ''\n\n  try {\n    const response = await api.post('/nodes/pigpio/action', {\n      pin: formData.value.pin,\n      state: formData.value.state\n    })\n\n    if (response.data.success) {\n      successMessage.value = response.data.message\n      gpioStatus.value = response.data.data.gpio_status\n      \n      // Clear form\n      formData.value.pin = ''\n      formData.value.state = ''\n    } else {\n      error.value = response.data.message || 'Failed to execute GPIO command'\n    }\n  } catch (err) {\n    console.error('GPIO action error:', err)\n    error.value = err.response?.data?.message || 'Failed to execute GPIO command'\n  } finally {\n    executing.value = false\n  }\n}\n\nconst refreshStatus = () => {\n  loadGPIOStatus()\n}\n\nconst getModeClass = (mode) => {\n  const modeClasses = {\n    'input': 'mode-input',\n    'output': 'mode-output',\n    'up': 'mode-up',\n    'down': 'mode-down'\n  }\n  return modeClasses[mode] || 'mode-default'\n}\n\nconst getValueClass = (value) => {\n  const valueClasses = {\n    '0': 'value-low',\n    '1': 'value-high',\n    'LOW': 'value-low',\n    'HIGH': 'value-high'\n  }\n  return valueClasses[value] || 'value-default'\n}\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background-color: var(--background-color);\n  border-radius: 8px;\n  width: 95%;\n  max-width: 1000px;\n  max-height: 90vh;\n  overflow: hidden;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n  border: 1px solid var(--border-color);\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid var(--border-color);\n  background-color: var(--container-bg);\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: var(--text-color);\n}\n\n.close-button {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  cursor: pointer;\n  color: var(--text-color);\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.close-button:hover {\n  color: var(--link-color);\n}\n\n.modal-body {\n  padding: 1.5rem;\n  max-height: calc(90vh - 120px);\n  overflow-y: auto;\n}\n\n.loading {\n  text-align: center;\n  padding: 2rem;\n}\n\n.spinner {\n  border: 3px solid var(--border-color);\n  border-top: 3px solid var(--link-color);\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 1rem;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.error-message {\n  background-color: var(--error-bg);\n  color: var(--error-color);\n  padding: 1rem;\n  border-radius: 4px;\n  margin: 1rem 0;\n}\n\n.success-message {\n  background-color: var(--success-bg);\n  color: var(--success-color);\n  padding: 1rem;\n  border-radius: 4px;\n  margin: 1rem 0;\n}\n\n.gpio-content {\n  display: flex;\n  flex-direction: column;\n  gap: 2rem;\n}\n\n.form-section {\n  background-color: var(--container-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  padding: 1.5rem;\n}\n\n.form-section h4 {\n  margin: 0 0 1rem 0;\n  color: var(--text-color);\n  border-bottom: 1px solid var(--border-color);\n  padding-bottom: 0.5rem;\n}\n\n.gpio-form {\n  display: flex;\n  flex-direction: column;\n  gap: 1rem;\n}\n\n.form-row {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 1rem;\n}\n\n.form-group {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.form-group label {\n  color: var(--text-color);\n  font-weight: bold;\n  font-size: 0.9rem;\n}\n\n.form-group input,\n.form-group select {\n  padding: 0.5rem;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  background-color: var(--background-color);\n  color: var(--text-color);\n}\n\n.form-actions {\n  display: flex;\n  gap: 1rem;\n  margin-top: 1rem;\n}\n\n.execute-button, .refresh-button {\n  padding: 0.75rem 1.5rem;\n  border: none;\n  border-radius: 4px;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.execute-button {\n  background-color: var(--primary-color);\n  color: white;\n}\n\n.execute-button:hover:not(:disabled) {\n  background-color: var(--link-color);\n}\n\n.execute-button:disabled {\n  background-color: var(--secondary-bg);\n  cursor: not-allowed;\n}\n\n.refresh-button {\n  background-color: var(--secondary-bg);\n  color: var(--text-color);\n  border: 1px solid var(--border-color);\n}\n\n.refresh-button:hover:not(:disabled) {\n  background-color: var(--border-color);\n}\n\n.status-section {\n  background-color: var(--container-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  padding: 1.5rem;\n}\n\n.status-section h4 {\n  margin: 0 0 1rem 0;\n  color: var(--text-color);\n  border-bottom: 1px solid var(--border-color);\n  padding-bottom: 0.5rem;\n}\n\n.status-table {\n  overflow-x: auto;\n}\n\n.status-table table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: 0.9rem;\n}\n\n.status-table th,\n.status-table td {\n  padding: 0.5rem;\n  text-align: left;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.status-table th {\n  background-color: var(--border-color);\n  color: var(--text-color);\n  border-bottom: 1px solid #000000;\n  font-weight: bold;\n}\n\n.status-table td {\n  color: var(--text-color);\n}\n\n/* Mode classes */\n.mode-input {\n  color: #17a2b8;\n  font-weight: bold;\n}\n\n.mode-output {\n  color: #28a745;\n  font-weight: bold;\n}\n\n.mode-up {\n  color: #ffc107;\n  font-weight: bold;\n}\n\n.mode-down {\n  color: #6c757d;\n  font-weight: bold;\n}\n\n.mode-default {\n  color: var(--text-color);\n}\n\n/* Value classes */\n.value-low {\n  color: #dc3545;\n  font-weight: bold;\n}\n\n.value-high {\n  color: #28a745;\n  font-weight: bold;\n}\n\n.value-default {\n  color: var(--text-color);\n}\n\n.error-status {\n  text-align: center;\n  padding: 2rem;\n  color: var(--error-color);\n  font-style: italic;\n}\n\n.empty-status {\n  text-align: center;\n  padding: 2rem;\n  color: var(--secondary-text);\n  font-style: italic;\n}\n\n@media (max-width: 768px) {\n  .form-row {\n    grid-template-columns: 1fr;\n  }\n  \n  .form-actions {\n    flex-direction: column;\n  }\n}\n</style>\n"],"names":["props","__props","emit","__emit","loading","ref","executing","error","successMessage","loadingMessage","gpioStatus","formData","watch","newVal","resetState","loadGPIOStatus","closeModal","response","api","err","_b","_a","executeAction","refreshStatus","getModeClass","mode","getValueClass","value","_createElementBlock","_createElementVNode","_cache","_hoisted_1","_openBlock","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","$event","_vModelText","_hoisted_9","_vModelSelect","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_Fragment","_renderList","pin","_toDisplayString","_normalizeClass","_hoisted_16","_hoisted_17"],"mappings":"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"}