{"version":3,"file":"Stats-BGz6f1qR.js","sources":["../../src/components/Stats.vue"],"sourcesContent":["<template>\n  <div v-if=\"isVisible\" class=\"modal-overlay\" @click=\"closeModal\">\n    <div class=\"modal-content\" @click.stop>\n      <div class=\"modal-header\">\n        <h3>AllStar Statistics</h3>\n        <button class=\"close-button\" @click=\"closeModal\">&times;</button>\n      </div>\n\n      <div class=\"modal-body\">\n        <!-- Loading State -->\n        <div v-if=\"loading\" class=\"loading\">\n          <div class=\"spinner\"></div>\n          <p>{{ loadingMessage }}</p>\n        </div>\n\n        <!-- Error State -->\n        <div v-if=\"error\" class=\"error-message\">\n          <p>{{ error }}</p>\n        </div>\n\n        <!-- Main Content -->\n        <div v-if=\"!loading && !error\" class=\"stats-content\">\n          <!-- Header -->\n          <div v-if=\"statsData.header\" class=\"stats-header\">\n            <div class=\"header-line\">#################################################################</div>\n            <div class=\"header-info\">\n              <span class=\"highlight\">{{ statsData.header.host }}</span> AllStar Status: \n              <span class=\"highlight\">{{ statsData.header.date }}</span>\n            </div>\n            <div class=\"header-line\">#################################################################</div>\n          </div>\n\n          <!-- All Nodes Section -->\n          <div v-if=\"statsData.all_nodes\" class=\"stats-section\">\n            <div v-if=\"statsData.all_nodes.error\" class=\"error-text\">\n              {{ statsData.all_nodes.error }}\n            </div>\n            <div v-else-if=\"statsData.all_nodes.message\" class=\"none-indicator\">\n              {{ statsData.all_nodes.message }}\n            </div>\n            <div v-else-if=\"statsData.all_nodes.nodes\" class=\"nodes-section\">\n              <div v-for=\"node in statsData.all_nodes.nodes\" :key=\"node.node_number\" class=\"node-info\">\n                <div class=\"node-header\">\n                  Node <span class=\"node-number\">{{ node.node_number }}</span> connections => <span class=\"highlight\">{{ node.connections_count || '<NONE>' }}</span>\n                </div>\n                \n                <!-- Connected Nodes Section -->\n                <div class=\"connected-nodes-section\">\n                  <div class=\"section-title\">************************* CONNECTED NODES *************************</div>\n                  <pre class=\"stats-pre\">{{ node.connected_nodes_formatted || '<NONE>' }}</pre>\n                </div>\n                \n                <!-- LStats Info -->\n                <div v-if=\"node.lstats_info\" class=\"lstats-info\">\n                  <div class=\"section-title\">***************************** LSTATS ******************************</div>\n                  <pre class=\"stats-pre\">{{ node.lstats_info }}</pre>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Peers Section -->\n          <div v-if=\"statsData.peers\" class=\"stats-section\">\n            <div class=\"section-title\">*************************** OTHER PEERS ***************************</div>\n            <div v-if=\"statsData.peers.error\" class=\"error-text\">\n              {{ statsData.peers.error }}\n            </div>\n            <div v-else-if=\"statsData.peers.message\" class=\"none-indicator\">\n              {{ statsData.peers.message }}\n            </div>\n            <div v-else-if=\"statsData.peers.peers\" class=\"peers-info\">\n              <pre class=\"stats-pre\">{{ statsData.peers.peers }}</pre>\n            </div>\n          </div>\n\n          <!-- Channels Section -->\n          <div v-if=\"statsData.channels\" class=\"stats-section\">\n            <div class=\"section-title\">**************************** CHANNELS *****************************</div>\n            <div v-if=\"statsData.channels.error\" class=\"error-text\">\n              {{ statsData.channels.error }}\n            </div>\n            <div v-else-if=\"statsData.channels.message\" class=\"none-indicator\">\n              {{ statsData.channels.message }}\n            </div>\n            <div v-else-if=\"statsData.channels.channels\" class=\"channels-info\">\n              <pre class=\"stats-pre\">{{ statsData.channels.channels }}</pre>\n            </div>\n          </div>\n\n          <!-- Netstats Section -->\n          <div v-if=\"statsData.netstats\" class=\"stats-section\">\n            <div class=\"section-title\">**************************** NETSTATS *****************************</div>\n            <div v-if=\"statsData.netstats.error\" class=\"error-text\">\n              {{ statsData.netstats.error }}\n            </div>\n            <div v-else-if=\"statsData.netstats.message\" class=\"none-indicator\">\n              {{ statsData.netstats.message }}\n            </div>\n            <div v-else-if=\"statsData.netstats.netstats\" class=\"netstats-info\">\n              <pre class=\"stats-pre\">{{ statsData.netstats.netstats }}</pre>\n            </div>\n          </div>\n        </div>\n\n        <!-- Refresh Button -->\n        <div v-if=\"!loading && !error\" class=\"refresh-section\">\n          <button @click=\"refreshStats\" class=\"refresh-button\" :disabled=\"refreshing\">\n            {{ refreshing ? 'Refreshing...' : 'Refresh Statistics' }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport { api } from '@/utils/api'\n\nconst props = defineProps({\n  isVisible: {\n    type: Boolean,\n    default: false\n  },\n  localnode: {\n    type: String,\n    required: true\n  }\n})\n\nconst emit = defineEmits(['update:isVisible'])\n\n// Reactive state\nconst loading = ref(false)\nconst refreshing = ref(false)\nconst error = ref(null)\nconst statsData = ref({})\nconst loadingMessage = ref('Loading AllStar statistics...')\n\n// Watch for modal visibility changes\nwatch(() => props.isVisible, (newVal) => {\n  if (newVal && props.localnode) {\n    loadStats()\n  }\n})\n\n// Methods\nconst closeModal = () => {\n  emit('update:isVisible', false)\n  resetState()\n}\n\nconst resetState = () => {\n  loading.value = false\n  refreshing.value = false\n  error.value = null\n  statsData.value = {}\n}\n\nconst loadStats = async () => {\n  if (!props.localnode) {\n    error.value = 'No local node specified'\n    return\n  }\n\n  loading.value = true\n  error.value = null\n  loadingMessage.value = 'Loading AllStar statistics...'\n\n  try {\n    const response = await api.post('/nodes/stats', {\n      localnode: props.localnode\n    })\n\n    if (response.data.success) {\n      statsData.value = response.data.data\n    } else {\n      error.value = response.data.message || 'Failed to load AllStar statistics'\n    }\n  } catch (err) {\n    console.error('Stats error:', err)\n    error.value = err.response?.data?.message || 'Failed to load AllStar statistics'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst refreshStats = async () => {\n  if (!props.localnode) return\n\n  refreshing.value = true\n  error.value = null\n\n  try {\n    const response = await api.post('/nodes/stats', {\n      localnode: props.localnode\n    })\n\n    if (response.data.success) {\n      statsData.value = response.data.data\n    } else {\n      error.value = response.data.message || 'Failed to refresh AllStar statistics'\n    }\n  } catch (err) {\n    console.error('Stats refresh error:', err)\n    error.value = err.response?.data?.message || 'Failed to refresh AllStar statistics'\n  } finally {\n    refreshing.value = false\n  }\n}\n\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background-color: #000000;\n  border-radius: 8px;\n  width: 95%;\n  max-width: 1200px;\n  max-height: 90vh;\n  overflow-y: auto;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n  border: 1px solid #404040;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid #404040;\n  background-color: #2a2a2a;\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: #e0e0e0;\n}\n\n.close-button {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  cursor: pointer;\n  color: #e0e0e0;\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.close-button:hover {\n  color: #2196f3;\n}\n\n.modal-body {\n  padding: 1.5rem;\n  font-family: 'Courier New', Consolas, monospace;\n  font-size: 12px;\n  line-height: 1.3;\n  color: white;\n}\n\n.loading {\n  text-align: center;\n  padding: 2rem;\n}\n\n.spinner {\n  border: 3px solid #404040;\n  border-top: 3px solid #00ff00;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 1rem;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.loading p {\n  color: #e0e0e0;\n  margin: 0;\n}\n\n.error-message {\n  text-align: center;\n  padding: 2rem;\n  color: #ff4444;\n  font-weight: bold;\n}\n\n.stats-content {\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n\n.stats-header {\n  margin-bottom: 2rem;\n}\n\n.header-line {\n  color: #888;\n}\n\n.header-info {\n  margin: 0.5rem 0;\n}\n\n.highlight {\n  color: #00ff00;\n  font-weight: bold;\n}\n\n.stats-section {\n  margin-bottom: 2rem;\n}\n\n.section-title {\n  color: #ffff00;\n  font-weight: bold;\n  margin: 1rem 0;\n}\n\n.node-info {\n  margin-bottom: 2rem;\n}\n\n.node-header {\n  margin-bottom: 1rem;\n}\n\n.node-number {\n  color: #00ff00;\n  font-weight: bold;\n}\n\n.connected-nodes-section {\n  margin: 1rem 0;\n}\n\n.connected-nodes-section .stats-pre {\n  color: #00ffff;\n  font-weight: bold;\n}\n\n.xnode-info,\n.lstats-info,\n.peers-info,\n.channels-info,\n.netstats-info {\n  margin: 1rem 0;\n}\n\n.stats-pre {\n  background-color: transparent;\n  color: white;\n  font-family: 'Courier New', Consolas, monospace;\n  font-size: 12px;\n  line-height: 1.3;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  margin: 0;\n  padding: 0;\n  border: none;\n  overflow-x: auto;\n}\n\n.error-text {\n  color: #ff4444;\n  font-weight: bold;\n}\n\n.none-indicator {\n  color: #888;\n  font-style: italic;\n}\n\n.refresh-section {\n  text-align: center;\n  margin-top: 2rem;\n  padding-top: 1rem;\n  border-top: 1px solid #404040;\n}\n\n.refresh-button {\n  background-color: #2a2a2a;\n  color: #e0e0e0;\n  border: 1px solid #404040;\n  padding: 8px 16px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.3s ease;\n}\n\n.refresh-button:hover:not(:disabled) {\n  background-color: #404040;\n  border-color: #00ff00;\n}\n\n.refresh-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .modal-content {\n    width: 98%;\n    max-height: 95vh;\n  }\n  \n  .modal-body {\n    padding: 1rem;\n    font-size: 11px;\n  }\n  \n  .stats-pre {\n    font-size: 11px;\n  }\n}\n</style>\n"],"names":["props","__props","emit","__emit","loading","ref","refreshing","error","statsData","loadingMessage","watch","newVal","loadStats","closeModal","resetState","response","api","err","_b","_a","refreshStats","_createElementBlock","_createElementVNode","_cache","_hoisted_1","_openBlock","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_toDisplayString","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_Fragment","node","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36"],"mappings":"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"}