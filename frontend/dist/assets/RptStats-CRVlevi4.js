import{r as d,w as y,f as c,l as v,k as p,g as e,i as P,v as T,t as m,h as C}from"./vendor-BDu8AGUg.js";import{_ as E,a as _}from"./index-ixAHyd21.js";const V={class:"modal-body"},w={class:"input-section"},B={class:"button-group"},F=["disabled"],L=["disabled"],D={key:0,class:"loading"},I={key:1,class:"error-message"},M={key:2,class:"external-redirect"},G=["href"],U={key:3,class:"stats-display"},A={class:"stats-header"},O={class:"timestamp"},j={class:"stats-content"},q={__name:"RptStats",props:{isVisible:{type:Boolean,default:!1},nodeNumber:{type:String,default:""}},emits:["update:isVisible"],setup(b,{emit:g}){const u=b,x=g,l=d(u.nodeNumber||""),i=d(!1),o=d(""),n=d(""),r=d(null);y(()=>u.isVisible,a=>{a&&u.nodeNumber&&(l.value=u.nodeNumber)}),y(()=>u.nodeNumber,a=>{a&&(l.value=a)});const f=()=>{x("update:isVisible",!1),S()},S=()=>{i.value=!1,o.value="",n.value="",r.value=null},k=async()=>{var a,s;if(!l.value){o.value="Please enter a node number";return}i.value=!0,o.value="",n.value="",r.value=null;try{const t=await _.post("/nodes/rptstats",{localnode:l.value});t.data.success?t.data.type==="local"?r.value=t.data.data:t.data.type==="external"&&(n.value=t.data.url):o.value=t.data.message||"Failed to retrieve RPT statistics"}catch(t){console.error("RPT Stats error:",t),o.value=((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to retrieve RPT statistics"}finally{i.value=!1}},h=async()=>{var a,s;if(!l.value){o.value="Please enter a node number";return}i.value=!0,o.value="",n.value="",r.value=null;try{const t=await _.post("/nodes/rptstats",{node:l.value});t.data.success?t.data.type==="external"&&(n.value=t.data.url):o.value=t.data.message||"Failed to retrieve external RPT statistics"}catch(t){console.error("External RPT Stats error:",t),o.value=((s=(a=t.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to retrieve external RPT statistics"}finally{i.value=!1}},R=()=>{n.value=""},N=a=>a?new Date(a).toLocaleString():"";return(a,s)=>b.isVisible?(p(),c("div",{key:0,class:"modal-overlay",onClick:f},[e("div",{class:"modal-content",onClick:s[1]||(s[1]=C(()=>{},["stop"]))},[e("div",{class:"modal-header"},[s[2]||(s[2]=e("h3",null,"RPT Statistics",-1)),e("button",{class:"close-button",onClick:f},"Ã—")]),e("div",V,[e("div",w,[s[3]||(s[3]=e("label",{for:"nodeInput"},"Node Number:",-1)),P(e("input",{id:"nodeInput","onUpdate:modelValue":s[0]||(s[0]=t=>l.value=t),type:"text",placeholder:"Enter node number",class:"node-input"},null,512),[[T,l.value]]),e("div",B,[e("button",{onClick:k,class:"btn btn-primary",disabled:!l.value}," Get Local Stats ",8,F),e("button",{onClick:h,class:"btn btn-secondary",disabled:!l.value}," Get External Stats ",8,L)])]),i.value?(p(),c("div",D,[...s[4]||(s[4]=[e("div",{class:"spinner"},null,-1),e("p",null,"Retrieving RPT statistics...",-1)])])):v("",!0),o.value?(p(),c("div",I,[e("p",null,m(o.value),1)])):v("",!0),n.value?(p(),c("div",M,[s[5]||(s[5]=e("p",null,"Redirecting to external AllStar Link statistics...",-1)),e("a",{href:n.value,target:"_blank",class:"btn btn-primary"}," Open External Stats ",8,G),e("button",{onClick:R,class:"btn btn-secondary"}," Cancel ")])):v("",!0),r.value?(p(),c("div",U,[e("div",A,[e("h4",null,"RPT Statistics for Node "+m(l.value),1),e("span",O,m(N(r.value.timestamp)),1)]),e("pre",j,m(r.value.stats),1)])):v("",!0)])])])):v("",!0)}},J=E(q,[["__scopeId","data-v-f2a6191e"]]);export{J as default};
//# sourceMappingURL=RptStats-CRVlevi4.js.map
