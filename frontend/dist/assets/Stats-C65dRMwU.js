import{r as _,w as A,f as a,l as i,k as l,g as t,t as n,C as h,F as E,p as C,h as x}from"./vendor-BDu8AGUg.js";import{_ as T,a as m}from"./index-ixAHyd21.js";const V={class:"modal-body"},F={key:0,class:"loading"},w={key:1,class:"error-message"},L={key:2,class:"stats-content"},O={key:0,class:"stats-header"},B={class:"header-info"},D={class:"highlight"},R={class:"highlight"},M={key:1,class:"stats-section"},H={key:0,class:"error-text"},q={key:1,class:"none-indicator"},I={key:2,class:"nodes-section"},P={class:"node-header"},j={class:"node-number"},z={class:"highlight"},G={class:"connected-nodes-section"},J={class:"stats-pre"},K={key:0,class:"lstats-info"},Q={class:"stats-pre"},U={key:2,class:"stats-section"},W={key:0,class:"error-text"},X={key:1,class:"none-indicator"},Y={key:2,class:"peers-info"},Z={class:"stats-pre"},$={key:3,class:"stats-section"},ss={key:0,class:"error-text"},es={key:1,class:"none-indicator"},ts={key:2,class:"channels-info"},as={class:"stats-pre"},ls={key:4,class:"stats-section"},os={key:0,class:"error-text"},ns={key:1,class:"none-indicator"},is={key:2,class:"netstats-info"},rs={class:"stats-pre"},ds={key:3,class:"refresh-section"},cs=["disabled"],us={__name:"Stats",props:{isVisible:{type:Boolean,default:!1},localnode:{type:String,required:!0}},emits:["update:isVisible"],setup(p,{emit:g}){const c=p,k=g,u=_(!1),v=_(!1),r=_(null),s=_({}),f=_("Loading AllStar statistics...");A(()=>c.isVisible,d=>{d&&c.localnode&&b()});const y=()=>{k("update:isVisible",!1),S()},S=()=>{u.value=!1,v.value=!1,r.value=null,s.value={}},b=async()=>{var d,e;if(!c.localnode){r.value="No local node specified";return}u.value=!0,r.value=null,f.value="Loading AllStar statistics...";try{const o=await m.post("/nodes/stats",{localnode:c.localnode});o.data.success?s.value=o.data.data:r.value=o.data.message||"Failed to load AllStar statistics"}catch(o){console.error("Stats error:",o),r.value=((e=(d=o.response)==null?void 0:d.data)==null?void 0:e.message)||"Failed to load AllStar statistics"}finally{u.value=!1}},N=async()=>{var d,e;if(c.localnode){v.value=!0,r.value=null;try{const o=await m.post("/nodes/stats",{localnode:c.localnode});o.data.success?s.value=o.data.data:r.value=o.data.message||"Failed to refresh AllStar statistics"}catch(o){console.error("Stats refresh error:",o),r.value=((e=(d=o.response)==null?void 0:d.data)==null?void 0:e.message)||"Failed to refresh AllStar statistics"}finally{v.value=!1}}};return(d,e)=>p.isVisible?(l(),a("div",{key:0,class:"modal-overlay",onClick:y},[t("div",{class:"modal-content",onClick:e[0]||(e[0]=x(()=>{},["stop"]))},[t("div",{class:"modal-header"},[e[1]||(e[1]=t("h3",null,"AllStar Statistics",-1)),t("button",{class:"close-button",onClick:y},"Ã—")]),t("div",V,[u.value?(l(),a("div",F,[e[2]||(e[2]=t("div",{class:"spinner"},null,-1)),t("p",null,n(f.value),1)])):i("",!0),r.value?(l(),a("div",w,[t("p",null,n(r.value),1)])):i("",!0),!u.value&&!r.value?(l(),a("div",L,[s.value.header?(l(),a("div",O,[e[4]||(e[4]=t("div",{class:"header-line"},"#################################################################",-1)),t("div",B,[t("span",D,n(s.value.header.host),1),e[3]||(e[3]=h(" AllStar Status: ",-1)),t("span",R,n(s.value.header.date),1)]),e[5]||(e[5]=t("div",{class:"header-line"},"#################################################################",-1))])):i("",!0),s.value.all_nodes?(l(),a("div",M,[s.value.all_nodes.error?(l(),a("div",H,n(s.value.all_nodes.error),1)):s.value.all_nodes.message?(l(),a("div",q,n(s.value.all_nodes.message),1)):s.value.all_nodes.nodes?(l(),a("div",I,[(l(!0),a(E,null,C(s.value.all_nodes.nodes,o=>(l(),a("div",{key:o.node_number,class:"node-info"},[t("div",P,[e[6]||(e[6]=h(" Node ",-1)),t("span",j,n(o.node_number),1),e[7]||(e[7]=h(" connections => ",-1)),t("span",z,n(o.connections_count||"<NONE>"),1)]),t("div",G,[e[8]||(e[8]=t("div",{class:"section-title"},"************************* CONNECTED NODES *************************",-1)),t("pre",J,n(o.connected_nodes_formatted||"<NONE>"),1)]),o.lstats_info?(l(),a("div",K,[e[9]||(e[9]=t("div",{class:"section-title"},"***************************** LSTATS ******************************",-1)),t("pre",Q,n(o.lstats_info),1)])):i("",!0)]))),128))])):i("",!0)])):i("",!0),s.value.peers?(l(),a("div",U,[e[10]||(e[10]=t("div",{class:"section-title"},"*************************** OTHER PEERS ***************************",-1)),s.value.peers.error?(l(),a("div",W,n(s.value.peers.error),1)):s.value.peers.message?(l(),a("div",X,n(s.value.peers.message),1)):s.value.peers.peers?(l(),a("div",Y,[t("pre",Z,n(s.value.peers.peers),1)])):i("",!0)])):i("",!0),s.value.channels?(l(),a("div",$,[e[11]||(e[11]=t("div",{class:"section-title"},"**************************** CHANNELS *****************************",-1)),s.value.channels.error?(l(),a("div",ss,n(s.value.channels.error),1)):s.value.channels.message?(l(),a("div",es,n(s.value.channels.message),1)):s.value.channels.channels?(l(),a("div",ts,[t("pre",as,n(s.value.channels.channels),1)])):i("",!0)])):i("",!0),s.value.netstats?(l(),a("div",ls,[e[12]||(e[12]=t("div",{class:"section-title"},"**************************** NETSTATS *****************************",-1)),s.value.netstats.error?(l(),a("div",os,n(s.value.netstats.error),1)):s.value.netstats.message?(l(),a("div",ns,n(s.value.netstats.message),1)):s.value.netstats.netstats?(l(),a("div",is,[t("pre",rs,n(s.value.netstats.netstats),1)])):i("",!0)])):i("",!0)])):i("",!0),!u.value&&!r.value?(l(),a("div",ds,[t("button",{onClick:N,class:"refresh-button",disabled:v.value},n(v.value?"Refreshing...":"Refresh Statistics"),9,cs)])):i("",!0)])])])):i("",!0)}},hs=T(us,[["__scopeId","data-v-8cb1840f"]]);export{hs as default};
//# sourceMappingURL=Stats-C65dRMwU.js.map
