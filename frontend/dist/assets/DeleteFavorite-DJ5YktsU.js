import{e as A,r as u,c as E,w as L,G as T,k as a,q as V,P as $,T as P,Q as S,f as o,l as b,g as e,t as d,C as k,F as q,p as z,m as G}from"./vendor-BDu8AGUg.js";import{a as F,_ as I}from"./index-ixAHyd21.js";const M={key:0,class:"delete-favorite-modal"},Q={class:"delete-favorite-content"},R={class:"delete-favorite-header"},W={class:"delete-favorite-body"},Y={key:0,class:"loading"},j={key:1,class:"error-message"},H={key:2,class:"success-message"},J={key:3,class:"empty-state"},K={key:4,class:"favorites-section"},O={class:"favorites-info"},X={class:"favorites-table"},Z={class:"command-preview"},ee={key:0,class:"section-badge node"},te={key:1,class:"no-node"},se=["onClick","disabled"],ae={class:"delete-favorite-footer"},le={class:"button-group"},oe=A({__name:"DeleteFavorite",props:{open:{type:Boolean}},emits:["update:open","favorite-deleted"],setup(_,{emit:w}){const C=_,g=w,c=u(!1),f=u(!1),n=u(""),i=u(null),v=u([]),m=u(""),y=u(""),x=E(()=>i.value&&i.value.success?"Favorite Deleted Successfully":n.value?"Error Loading Favorites":v.value.length===0&&!c.value?"No Favorites Found":"Delete Favorite"),h=async()=>{var l,s;c.value=!0,n.value="",i.value=null;try{const t=await F.get("/config/favorites");t.data.success?(v.value=t.data.data,m.value=t.data.user||"Unknown User",y.value=t.data.fileName||"favorites.ini"):n.value=t.data.message||"Failed to load favorites"}catch(t){const r=t;n.value=((s=(l=r.response)==null?void 0:l.data)==null?void 0:s.message)||"Failed to load favorites"}finally{c.value=!1}},N=async l=>{confirm(`Are you sure you want to delete the favorite "${l.label}"?`)&&await D(l)},D=async l=>{var s,t;f.value=!0,n.value="";try{const r=await F.delete("/config/favorites",{data:{section:l.section,index:l.index}});r.data.success?(i.value=r.data,await h(),g("favorite-deleted",r.data)):n.value=r.data.message||"Failed to delete favorite"}catch(r){const U=r;n.value=((t=(s=U.response)==null?void 0:s.data)==null?void 0:t.message)||"Failed to delete favorite"}finally{f.value=!1}},p=()=>{g("update:open",!1)},B=()=>{window.location.reload(),p()};return L(()=>C.open,l=>{l&&(n.value="",i.value=null,v.value=[],m.value="",y.value="",h())}),(l,s)=>(a(),T(S,{to:"body"},[V(P,{name:"modal"},{default:$(()=>[_.open?(a(),o("div",M,[e("div",{class:"delete-favorite-overlay",onClick:p}),e("div",Q,[e("div",R,[e("h2",null,d(x.value),1),e("button",{class:"close-button",onClick:p},"Ã—")]),e("div",W,[c.value?(a(),o("div",Y,[...s[0]||(s[0]=[e("p",null,"Loading favorites...",-1)])])):n.value?(a(),o("div",j,[e("p",null,d(n.value),1)])):i.value&&i.value.success?(a(),o("div",H,[e("p",null,d(i.value.message),1)])):!c.value&&v.value.length===0?(a(),o("div",J,[...s[1]||(s[1]=[e("h3",null,"No Favorites Found",-1),e("p",null,"You don't have any favorites configured yet.",-1),e("p",null,'Use the "Add Favorite" button to add nodes to your favorites list.',-1)])])):(a(),o("div",K,[e("div",O,[s[4]||(s[4]=e("h3",null,"Favorites File",-1)),e("p",null,[s[2]||(s[2]=e("strong",null,"User:",-1)),k(" "+d(m.value),1)]),e("p",null,[s[3]||(s[3]=e("strong",null,"File:",-1)),k(" "+d(y.value),1)])]),e("table",X,[s[5]||(s[5]=e("thead",null,[e("tr",null,[e("th",null,"Section"),e("th",null,"Label"),e("th",null,"Command"),e("th",null,"Node"),e("th",null,"Action")])],-1)),e("tbody",null,[(a(!0),o(q,null,z(v.value,t=>(a(),o("tr",{key:`${t.section}-${t.index}`},[e("td",null,[e("span",{class:G(["section-badge",t.section==="general"?"general":"node"])},d(t.section),3)]),e("td",null,d(t.label),1),e("td",null,[e("div",Z,d(t.command),1)]),e("td",null,[t.node?(a(),o("span",ee,d(t.node),1)):(a(),o("span",te,"N/A"))]),e("td",null,[e("button",{type:"button",class:"delete-btn",onClick:r=>N(t),disabled:f.value},d(f.value?"Deleting...":"Delete"),9,se)])]))),128))])])]))]),e("div",ae,[e("div",le,[i.value&&i.value.success?(a(),o("input",{key:0,type:"button",value:"Refresh Parent Window",onClick:B,class:"refresh-btn"})):b("",!0),e("input",{type:"button",value:"Close",onClick:p,class:"close-btn"})])])])])):b("",!0)]),_:1})]))}}),de=I(oe,[["__scopeId","data-v-8550d581"]]);export{de as default};
//# sourceMappingURL=DeleteFavorite-DJ5YktsU.js.map
