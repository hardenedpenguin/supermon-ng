import{r,w as M,f as n,l as f,k as u,g as e,t as d,h as _,i as I,v as F,K as L,j as B,F as D,p as H,m as O}from"./vendor-BDu8AGUg.js";import{_ as N,a as h}from"./index-Cd0Rm2MK.js";const W={class:"modal-body"},E={key:0,class:"loading"},U={key:1,class:"error-message"},q={key:2,class:"success-message"},j={key:3,class:"gpio-content"},z={class:"form-section"},A={class:"form-row"},K={class:"form-group"},R={class:"form-group"},T={class:"form-actions"},J=["disabled"],Q=["disabled"],X={class:"status-section"},Y={class:"status-content"},Z={key:0,class:"status-table"},$={key:1,class:"error-status"},ee={key:2,class:"empty-status"},te={__name:"PiGPIO",props:{isVisible:{type:Boolean,default:!1}},emits:["update:isVisible"],setup(m,{emit:G}){const k=m,C=G,v=r(!1),c=r(!1),l=r(""),p=r(""),b=r("Loading..."),i=r({pins:[]}),o=r({pin:"",state:""});M(()=>k.isVisible,a=>{a&&(y(),P())});const g=()=>{C("update:isVisible",!1),y()},y=()=>{v.value=!1,c.value=!1,l.value="",p.value="",i.value={pins:[]},o.value={pin:"",state:""}},P=async()=>{var a,t;v.value=!0,b.value="Loading GPIO status...",l.value="",p.value="";try{const s=await h.post("/nodes/pigpio");s.data.success?i.value=s.data.data.gpio_status:l.value=s.data.message||"Failed to load GPIO status"}catch(s){console.error("GPIO error:",s),l.value=((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to load GPIO status"}finally{v.value=!1}},w=async()=>{var a,t;if(!o.value.pin||!o.value.state){l.value="Please fill in all fields";return}c.value=!0,l.value="",p.value="";try{const s=await h.post("/nodes/pigpio/action",{pin:o.value.pin,state:o.value.state});s.data.success?(p.value=s.data.message,i.value=s.data.data.gpio_status,o.value.pin="",o.value.state=""):l.value=s.data.message||"Failed to execute GPIO command"}catch(s){console.error("GPIO action error:",s),l.value=((t=(a=s.response)==null?void 0:a.data)==null?void 0:t.message)||"Failed to execute GPIO command"}finally{c.value=!1}},S=()=>{P()},x=a=>({input:"mode-input",output:"mode-output",up:"mode-up",down:"mode-down"})[a]||"mode-default",V=a=>({0:"value-low",1:"value-high",LOW:"value-low",HIGH:"value-high"})[a]||"value-default";return(a,t)=>m.isVisible?(u(),n("div",{key:0,class:"modal-overlay",onClick:g},[e("div",{class:"modal-content",onClick:t[2]||(t[2]=_(()=>{},["stop"]))},[e("div",{class:"modal-header"},[t[3]||(t[3]=e("h3",null,"Pi GPIO Control",-1)),e("button",{class:"close-button",onClick:g},"Ã—")]),e("div",W,[v.value?(u(),n("div",E,[t[4]||(t[4]=e("div",{class:"spinner"},null,-1)),e("p",null,d(b.value),1)])):f("",!0),l.value?(u(),n("div",U,[e("p",null,d(l.value),1)])):f("",!0),p.value?(u(),n("div",q,[e("p",null,d(p.value),1)])):f("",!0),!v.value&&!l.value?(u(),n("div",j,[e("div",z,[t[8]||(t[8]=e("h4",null,"GPIO Pin Control",-1)),e("form",{onSubmit:_(w,["prevent"]),class:"gpio-form"},[e("div",A,[e("div",K,[t[5]||(t[5]=e("label",{for:"pin"},"GPIO Pin:",-1)),I(e("input",{id:"pin","onUpdate:modelValue":t[0]||(t[0]=s=>o.value.pin=s),type:"number",min:"0",max:"40",required:"",placeholder:"0-40"},null,512),[[F,o.value.pin]])]),e("div",R,[t[7]||(t[7]=e("label",{for:"state"},"State:",-1)),I(e("select",{id:"state","onUpdate:modelValue":t[1]||(t[1]=s=>o.value.state=s),required:""},[...t[6]||(t[6]=[B('<option value="" data-v-0537ffeb>Select State</option><option value="input" data-v-0537ffeb>Input</option><option value="output" data-v-0537ffeb>Output</option><option value="up" data-v-0537ffeb>Pull Up</option><option value="down" data-v-0537ffeb>Pull Down</option><option value="0" data-v-0537ffeb>Write 0 (LOW)</option><option value="1" data-v-0537ffeb>Write 1 (HIGH)</option>',7)])],512),[[L,o.value.state]])])]),e("div",T,[e("button",{type:"submit",class:"execute-button",disabled:c.value},d(c.value?"Executing...":"Execute"),9,J),e("button",{type:"button",onClick:S,class:"refresh-button",disabled:v.value}," Refresh Status ",8,Q)])],32)]),e("div",X,[t[11]||(t[11]=e("h4",null,"GPIO Status",-1)),e("div",Y,[i.value.pins&&i.value.pins.length>0?(u(),n("div",Z,[e("table",null,[t[9]||(t[9]=e("thead",null,[e("tr",null,[e("th",null,"Pin"),e("th",null,"Mode"),e("th",null,"Value")])],-1)),e("tbody",null,[(u(!0),n(D,null,H(i.value.pins,s=>(u(),n("tr",{key:s.pin},[e("td",null,d(s.pin),1),e("td",null,[e("span",{class:O(x(s.mode))},d(s.mode),3)]),e("td",null,[e("span",{class:O(V(s.value))},d(s.value),3)])]))),128))])])])):i.value.error?(u(),n("div",$,[e("p",null,d(i.value.error),1)])):(u(),n("div",ee,[...t[10]||(t[10]=[e("p",null,"No GPIO status available",-1)])]))])])])):f("",!0)])])])):f("",!0)}},le=N(te,[["__scopeId","data-v-0537ffeb"]]);export{le as default};
//# sourceMappingURL=PiGPIO-DR8HBLtN.js.map
