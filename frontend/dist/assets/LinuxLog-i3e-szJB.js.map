{"version":3,"file":"LinuxLog-i3e-szJB.js","sources":["../../src/components/LinuxLog.vue"],"sourcesContent":["<template>\n  <div v-if=\"isVisible\" class=\"modal-overlay\" @click=\"closeModal\">\n    <div class=\"modal-content\" @click.stop>\n      <div class=\"modal-header\">\n        <h3>Linux System Log Viewer</h3>\n        <button class=\"close-button\" @click=\"closeModal\">&times;</button>\n      </div>\n\n      <div class=\"modal-body\">\n        <!-- Loading State -->\n        <div v-if=\"loading\" class=\"loading\">\n          <div class=\"spinner\"></div>\n          <p>Loading Linux system logs...</p>\n        </div>\n\n        <!-- Error State -->\n        <div v-if=\"error\" class=\"error-message\">\n          <p>{{ error }}</p>\n        </div>\n\n        <!-- Log Content Display -->\n        <div v-if=\"logData\" class=\"log-display\">\n          <div class=\"log-header\">\n            <h4>{{ logData.description }}</h4>\n            <span class=\"timestamp\">{{ formatTimestamp(logData.timestamp) }}</span>\n          </div>\n          \n          <div class=\"log-info\">\n            <p><strong>Command:</strong> {{ logData.command }}</p>\n          </div>\n\n          <div class=\"log-content-container\">\n            <pre class=\"log-content\">{{ logData.content }}</pre>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport { api } from '@/utils/api'\n\nconst props = defineProps({\n  isVisible: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits(['update:isVisible'])\n\n// Reactive state\nconst loading = ref(false)\nconst error = ref('')\nconst logData = ref(null)\n\n// Watch for modal visibility changes\nwatch(() => props.isVisible, (newVal) => {\n  if (newVal) {\n    loadLinuxLog()\n  } else {\n    resetState()\n  }\n})\n\n// Methods\nconst closeModal = () => {\n  emit('update:isVisible', false)\n  resetState()\n}\n\nconst resetState = () => {\n  loading.value = false\n  error.value = ''\n  logData.value = null\n}\n\nconst loadLinuxLog = async () => {\n  loading.value = true\n  error.value = ''\n  logData.value = null\n\n  try {\n    // CSRF token is automatically handled by the API interceptor\n    const response = await api.post('/nodes/linuxlog', {}, { timeout: 30000 })\n\n    if (response.data.success) {\n      logData.value = response.data.data\n    } else {\n      error.value = response.data.message || 'Failed to retrieve Linux system log'\n    }\n  } catch (err) {\n    console.error('Linux Log error:', err)\n    error.value = err.response?.data?.message || 'Failed to retrieve Linux system log'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst formatTimestamp = (timestamp) => {\n  if (!timestamp) return ''\n  return new Date(timestamp).toLocaleString()\n}\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background-color: var(--background-color);\n  border-radius: 8px;\n  width: 95%;\n  max-width: 1200px;\n  max-height: 90vh;\n  overflow: hidden;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n  border: 1px solid var(--border-color);\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid var(--border-color);\n  background-color: var(--container-bg);\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: var(--text-color);\n}\n\n.close-button {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  cursor: pointer;\n  color: var(--text-color);\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.close-button:hover {\n  color: var(--link-color);\n}\n\n.modal-body {\n  padding: 1.5rem;\n  max-height: calc(90vh - 120px);\n  overflow-y: auto;\n}\n\n.loading {\n  text-align: center;\n  padding: 2rem;\n}\n\n.spinner {\n  border: 3px solid var(--border-color);\n  border-top: 3px solid var(--link-color);\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 1rem;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.error-message {\n  background-color: var(--error-bg);\n  color: var(--error-color);\n  padding: 1rem;\n  border-radius: 4px;\n  margin: 1rem 0;\n}\n\n.log-display {\n  margin-top: 1rem;\n}\n\n.log-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 1rem;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid var(--border-color);\n}\n\n.log-header h4 {\n  margin: 0;\n  color: var(--text-color);\n}\n\n.timestamp {\n  font-size: 0.875rem;\n  color: var(--secondary-text);\n}\n\n.log-info {\n  background-color: var(--container-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  padding: 1rem;\n  margin-bottom: 1rem;\n}\n\n.log-info p {\n  margin: 0;\n  color: var(--text-color);\n  font-family: 'Courier New', Consolas, monospace;\n  font-size: 0.9rem;\n  word-break: break-all;\n}\n\n.log-content-container {\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.log-content {\n  background-color: #000000;\n  color: #00ff00;\n  padding: 1rem;\n  margin: 0;\n  font-family: 'Courier New', Consolas, monospace;\n  font-size: 11px;\n  line-height: 1.2;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  max-height: 600px;\n  overflow-y: auto;\n  border: none;\n  width: 100%;\n  box-sizing: border-box;\n}\n</style>\n"],"names":["props","__props","emit","__emit","loading","ref","error","logData","watch","newVal","loadLinuxLog","resetState","closeModal","response","api","err","_b","_a","formatTimestamp","timestamp","_createElementBlock","_createElementVNode","_cache","_hoisted_1","_openBlock","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9"],"mappings":"+eA4CA,MAAMA,EAAQC,EAORC,EAAOC,EAGPC,EAAUC,EAAI,EAAK,EACnBC,EAAQD,EAAI,EAAE,EACdE,EAAUF,EAAI,IAAI,EAGxBG,EAAM,IAAMR,EAAM,UAAYS,GAAW,CACnCA,EACFC,EAAY,EAEZC,EAAU,CAEd,CAAC,EAGD,MAAMC,EAAa,IAAM,CACvBV,EAAK,mBAAoB,EAAK,EAC9BS,EAAU,CACZ,EAEMA,EAAa,IAAM,CACvBP,EAAQ,MAAQ,GAChBE,EAAM,MAAQ,GACdC,EAAQ,MAAQ,IAClB,EAEMG,EAAe,SAAY,SAC/BN,EAAQ,MAAQ,GAChBE,EAAM,MAAQ,GACdC,EAAQ,MAAQ,KAEhB,GAAI,CAEF,MAAMM,EAAW,MAAMC,EAAI,KAAK,kBAAmB,GAAI,CAAE,QAAS,GAAK,CAAE,EAErED,EAAS,KAAK,QAChBN,EAAQ,MAAQM,EAAS,KAAK,KAE9BP,EAAM,MAAQO,EAAS,KAAK,SAAW,qCAE3C,OAASE,EAAK,CACZ,QAAQ,MAAM,mBAAoBA,CAAG,EACrCT,EAAM,QAAQU,GAAAC,EAAAF,EAAI,WAAJ,YAAAE,EAAc,OAAd,YAAAD,EAAoB,UAAW,qCAC/C,QAAC,CACCZ,EAAQ,MAAQ,EAClB,CACF,EAEMc,EAAmBC,GAClBA,EACE,IAAI,KAAKA,CAAS,EAAE,eAAc,EADlB,gBArGZlB,EAAA,eAAXmB,EAoCM,MAAA,OApCgB,MAAM,gBAAiB,QAAOR,IAClDS,EAkCM,MAAA,CAlCD,MAAM,gBAAiB,sBAAD,IAAA,CAAA,EAAW,CAAA,MAAA,CAAA,KACpCA,EAGM,MAAA,CAHD,MAAM,cAAc,EAAA,CACvBC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAD,EAAgC,UAA5B,0BAAuB,EAAA,GAC3BA,EAAiE,SAAA,CAAzD,MAAM,eAAgB,QAAOT,GAAY,GAAO,IAG1DS,EA2BM,MA3BNE,EA2BM,CAzBOnB,EAAA,OAAXoB,IAAAJ,EAGM,MAHNK,EAGM,CAAA,GAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJD,EAA2B,MAAA,CAAtB,MAAM,SAAS,EAAA,KAAA,EAAA,EACpBA,EAAmC,SAAhC,+BAA4B,EAAA,gBAItBf,EAAA,OAAXkB,IAAAJ,EAEM,MAFNM,EAEM,CADJL,EAAkB,WAAZf,EAAA,KAAK,EAAA,CAAA,cAIFC,EAAA,OAAXiB,IAAAJ,EAaM,MAbNO,EAaM,CAZJN,EAGM,MAHNO,EAGM,CAFJP,EAAkC,KAAA,KAAAQ,EAA3BtB,EAAA,MAAQ,WAAW,EAAA,CAAA,EAC1Bc,EAAuE,OAAvES,EAAuED,EAA5CX,EAAgBX,EAAA,MAAQ,SAAS,CAAA,EAAA,CAAA,IAG9Dc,EAEM,MAFNU,EAEM,CADJV,EAAsD,IAAA,KAAA,CAAnDC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAD,EAAyB,cAAjB,WAAQ,EAAA,KAAS,IAACQ,EAAGtB,EAAA,MAAQ,OAAO,EAAA,CAAA,MAGjDc,EAEM,MAFNW,EAEM,CADJX,EAAoD,MAApDY,EAAoDJ,EAAxBtB,EAAA,MAAQ,OAAO,EAAA,CAAA"}