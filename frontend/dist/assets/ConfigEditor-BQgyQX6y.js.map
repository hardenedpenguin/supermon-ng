{"version":3,"file":"ConfigEditor-BQgyQX6y.js","sources":["../../src/components/ConfigEditor.vue"],"sourcesContent":["<template>\n  <div v-if=\"open\" class=\"modal-overlay\" @click=\"closeModal\">\n    <div class=\"modal-content config-editor-modal\" @click.stop>\n      <div class=\"modal-header\">\n        <h3>Configuration Editor</h3>\n        <button class=\"close-button\" @click=\"closeModal\">&times;</button>\n      </div>\n      \n      <div class=\"modal-body\">\n        <div v-if=\"loading\" class=\"loading-container\">\n          <div class=\"loading-spinner\"></div>\n          <p>Loading configuration files...</p>\n        </div>\n        \n        <div v-else-if=\"error\" class=\"error-container\">\n          <div class=\"error-message\">\n            <h4>Error</h4>\n            <p>{{ error }}</p>\n            <button class=\"btn btn-primary\" @click=\"loadFiles\">Retry</button>\n          </div>\n        </div>\n        \n        <div v-else class=\"config-editor-content\">\n          <!-- File Selection Section -->\n          <div class=\"file-selection-section\">\n            <h4>Select Configuration File</h4>\n            <div class=\"file-categories\">\n              <div v-for=\"(files, category) in fileCategories\" :key=\"category\" class=\"file-category\">\n                <h5>{{ category }}</h5>\n                <div class=\"file-list\">\n                  <button\n                    v-for=\"file in files\"\n                    :key=\"file.path\"\n                    class=\"file-button\"\n                    :class=\"{ 'active': selectedFile?.path === file.path }\"\n                    @click=\"selectFile(file)\"\n                  >\n                    <div class=\"file-name\">{{ file.name }}</div>\n                    <div class=\"file-description\">{{ file.description }}</div>\n                    <div class=\"file-path\">{{ file.path }}</div>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- File Editor Section -->\n          <div v-if=\"selectedFile\" class=\"file-editor-section\">\n            <div class=\"editor-header\">\n              <h4>Editing: {{ selectedFile.name }}</h4>\n              <div class=\"editor-actions\">\n                <button class=\"btn btn-secondary\" @click=\"reloadFile\" :disabled=\"saving\">\n                  <span class=\"icon\">üîÑ</span> Reload\n                </button>\n                <button class=\"btn btn-primary\" @click=\"saveFile\" :disabled=\"saving\">\n                  <span class=\"icon\">üíæ</span> Save\n                </button>\n              </div>\n            </div>\n            \n            <div class=\"editor-content\">\n              <div class=\"file-info\">\n                <strong>Path:</strong> {{ selectedFile.path }}\n              </div>\n              \n              <div class=\"editor-container\">\n                <textarea\n                  v-model=\"fileContent\"\n                  class=\"file-editor\"\n                  placeholder=\"File content will appear here...\"\n                  :disabled=\"saving\"\n                ></textarea>\n              </div>\n              \n              <div v-if=\"saveResult\" class=\"save-result\">\n                <div v-if=\"saveResult.success\" class=\"success-message\">\n                  <span class=\"icon\">‚úÖ</span> File saved successfully!\n                </div>\n                <div v-else class=\"error-message\">\n                  <span class=\"icon\">‚ùå</span> {{ saveResult.message }}\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          <!-- No File Selected -->\n          <div v-else class=\"no-file-selected\">\n            <div class=\"placeholder-content\">\n              <div class=\"icon\">üìÅ</div>\n              <h4>Select a Configuration File</h4>\n              <p>Choose a file from the list above to edit its contents.</p>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"modal-footer\">\n        <button class=\"btn btn-secondary\" @click=\"closeModal\">Close</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch, onMounted } from 'vue'\nimport { api } from '@/utils/api'\n\nconst props = defineProps({\n  open: Boolean\n})\n\nconst emit = defineEmits(['update:open'])\n\nconst loading = ref(false)\nconst error = ref('')\nconst fileCategories = ref({})\nconst selectedFile = ref(null)\nconst fileContent = ref('')\nconst saving = ref(false)\nconst saveResult = ref(null)\n\nconst closeModal = () => {\n  emit('update:open', false)\n  resetState()\n}\n\nconst resetState = () => {\n  selectedFile.value = null\n  fileContent.value = ''\n  saveResult.value = null\n  error.value = ''\n}\n\nconst loadFiles = async () => {\n  loading.value = true\n  error.value = ''\n  \n  try {\n    // CSRF token is automatically handled by the API interceptor\n    const response = await api.get('/config/configeditor/files')\n    if (response.data.success) {\n      fileCategories.value = response.data.files\n    } else {\n      error.value = response.data.message || 'Failed to load configuration files'\n    }\n  } catch (err) {\n    console.error('Config editor files error:', err)\n    error.value = err.response?.data?.message || 'Failed to load configuration files'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst selectFile = async (file) => {\n  selectedFile.value = file\n  fileContent.value = ''\n  saveResult.value = null\n  \n  try {\n    // CSRF token is automatically handled by the API interceptor\n    const response = await api.post('/config/configeditor/content', {\n      filePath: file.path\n    })\n    \n    if (response.data.success) {\n      fileContent.value = response.data.content\n    } else {\n      error.value = response.data.message || 'Failed to load file content'\n    }\n  } catch (err) {\n    console.error('File content error:', err)\n    error.value = err.response?.data?.message || 'Failed to load file content'\n  }\n}\n\nconst reloadFile = async () => {\n  if (selectedFile.value) {\n    await selectFile(selectedFile.value)\n  }\n}\n\nconst saveFile = async () => {\n  if (!selectedFile.value) return\n  \n  saving.value = true\n  saveResult.value = null\n  \n  try {\n    // CSRF token is automatically handled by the API interceptor\n    const response = await api.post('/config/configeditor/save', {\n      filePath: selectedFile.value.path,\n      content: fileContent.value\n    })\n    \n    if (response.data.success) {\n      saveResult.value = {\n        success: true,\n        message: response.data.message\n      }\n    } else {\n      saveResult.value = {\n        success: false,\n        message: response.data.message\n      }\n    }\n  } catch (err) {\n    console.error('Save file error:', err)\n    saveResult.value = {\n      success: false,\n      message: err.response?.data?.message || 'Failed to save file'\n    }\n  } finally {\n    saving.value = false\n  }\n}\n\nwatch(() => props.open, (newValue) => {\n  if (newValue) {\n    loadFiles()\n  }\n})\n\nonMounted(() => {\n  if (props.open) {\n    loadFiles()\n  }\n})\n</script>\n\n<style scoped>\n.config-editor-modal {\n  max-width: 90vw;\n  max-height: 90vh;\n  width: 1200px;\n  height: 800px;\n}\n\n.config-editor-content {\n  display: flex;\n  height: 600px;\n  gap: 20px;\n}\n\n.file-selection-section {\n  flex: 0 0 400px;\n  border-right: 1px solid var(--border-color);\n  overflow-y: auto;\n}\n\n.file-editor-section {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.file-categories {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.file-category h5 {\n  margin: 0 0 10px 0;\n  padding: 10px;\n  background: var(--primary-color);\n  color: white;\n  border-radius: 4px;\n  font-size: 14px;\n}\n\n.file-list {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n\n.file-button {\n  text-align: left;\n  padding: 10px;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  background: var(--background-color);\n  color: var(--text-color);\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.file-button:hover {\n  background: var(--primary-color);\n  color: white;\n  border-color: var(--primary-color);\n}\n\n.file-button.active {\n  background: var(--primary-color);\n  color: white;\n  border-color: var(--primary-color);\n}\n\n.file-name {\n  font-weight: bold;\n  font-size: 14px;\n  margin-bottom: 2px;\n}\n\n.file-description {\n  font-size: 12px;\n  opacity: 0.8;\n  margin-bottom: 2px;\n}\n\n.file-path {\n  font-size: 11px;\n  font-family: monospace;\n  opacity: 0.6;\n}\n\n.editor-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px 0;\n  border-bottom: 1px solid var(--border-color);\n  margin-bottom: 15px;\n}\n\n.editor-header h4 {\n  margin: 0;\n}\n\n.editor-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.editor-content {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.file-info {\n  margin-bottom: 10px;\n  padding: 8px;\n  background: var(--background-secondary);\n  border-radius: 4px;\n  font-size: 12px;\n  font-family: monospace;\n}\n\n.editor-container {\n  flex: 1;\n  margin-bottom: 15px;\n}\n\n.file-editor {\n  width: 100%;\n  height: 100%;\n  min-height: 400px;\n  padding: 15px;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  font-family: 'Courier New', monospace;\n  font-size: 12px;\n  line-height: 1.4;\n  resize: none;\n  background: var(--background-color);\n  color: var(--text-color);\n}\n\n.file-editor:focus {\n  outline: none;\n  border-color: var(--primary-color);\n  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);\n}\n\n.save-result {\n  padding: 10px;\n  border-radius: 4px;\n  font-size: 14px;\n}\n\n.success-message {\n  background: #d4edda;\n  color: #155724;\n  border: 1px solid #c3e6cb;\n}\n\n.error-message {\n  background: #f8d7da;\n  color: #721c24;\n  border: 1px solid #f5c6cb;\n}\n\n.no-file-selected {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.placeholder-content {\n  text-align: center;\n  color: var(--text-muted);\n}\n\n.placeholder-content .icon {\n  font-size: 48px;\n  margin-bottom: 15px;\n  display: block;\n}\n\n.placeholder-content h4 {\n  margin: 0 0 10px 0;\n}\n\n.placeholder-content p {\n  margin: 0;\n  font-size: 14px;\n}\n\n.icon {\n  margin-right: 5px;\n}\n\n.loading-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 400px;\n}\n\n.loading-spinner {\n  width: 40px;\n  height: 40px;\n  border: 4px solid var(--border-color);\n  border-top: 4px solid var(--primary-color);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n  margin-bottom: 15px;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.error-container {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 400px;\n}\n\n.error-message {\n  text-align: center;\n  max-width: 400px;\n}\n\n.error-message h4 {\n  margin: 0 0 10px 0;\n  color: var(--danger-color);\n}\n\n.error-message p {\n  margin: 0 0 15px 0;\n  color: var(--text-muted);\n}\n\n.btn {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.2s;\n  display: inline-flex;\n  align-items: center;\n}\n\n.btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.btn-primary {\n  background: var(--primary-color);\n  color: white;\n}\n\n.btn-primary:hover:not(:disabled) {\n  background: var(--primary-dark);\n}\n\n.btn-secondary {\n  background: var(--secondary-color);\n  color: var(--text-color);\n}\n\n.btn-secondary:hover:not(:disabled) {\n  background: var(--secondary-dark);\n}\n</style>\n"],"names":["props","__props","emit","__emit","loading","ref","error","fileCategories","selectedFile","fileContent","saving","saveResult","closeModal","resetState","loadFiles","response","api","err","_b","_a","selectFile","file","reloadFile","saveFile","watch","newValue","onMounted","_createElementBlock","_createElementVNode","_cache","_hoisted_1","_openBlock","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_Fragment","_renderList","files","category","_hoisted_8","_normalizeClass","$event","_hoisted_10","_toDisplayString","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25"],"mappings":"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"}