import{r as p,w as x,f as o,l as c,k as n,g as t,C as r,t as u,h as w}from"./vendor-BDu8AGUg.js";import{_ as F,a as C}from"./index-ixAHyd21.js";const R={class:"modal-body"},T={key:0,class:"confirmation"},V={class:"warning-text"},A={key:1,class:"loading"},S={key:2,class:"result"},E={key:0,class:"success-result"},N={class:"result-details"},B={key:1,class:"error-result"},D={__name:"FastRestart",props:{isVisible:{type:Boolean,default:!1},localnode:{type:[String,Number],default:null}},emits:["update:isVisible"],setup(m,{emit:g}){const v=m,b=g,i=p(!1),e=p(null);x(()=>v.isVisible,l=>{l||f()});const d=()=>{b("update:isVisible",!1),f()},f=()=>{i.value=!1,e.value=null},k=async()=>{var l,s;if(!v.localnode){e.value={success:!1,message:"No node selected for restart operation."};return}i.value=!0,e.value=null;try{const a=await C.post("/nodes/fastrestart",{localnode:v.localnode});a.data.success?e.value=a.data.data:e.value={success:!1,message:a.data.message||"Failed to execute fast restart"}}catch(a){console.error("Fast restart error:",a),e.value={success:!1,message:((s=(l=a.response)==null?void 0:l.data)==null?void 0:s.message)||"Failed to execute fast restart"}}finally{i.value=!1}},y=l=>l?new Date(l).toLocaleString():"";return(l,s)=>m.isVisible?(n(),o("div",{key:0,class:"modal-overlay",onClick:d},[t("div",{class:"modal-content",onClick:s[0]||(s[0]=w(()=>{},["stop"]))},[t("div",{class:"modal-header"},[s[1]||(s[1]=t("h3",null,"Fast Restart Asterisk",-1)),t("button",{class:"close-button",onClick:d},"√ó")]),t("div",R,[!i.value&&!e.value?(n(),o("div",T,[s[6]||(s[6]=t("div",{class:"warning-icon"},"‚ö†Ô∏è",-1)),s[7]||(s[7]=t("h4",null,"Confirm Fast Restart",-1)),t("p",V,[s[2]||(s[2]=r(" You are about to perform a ",-1)),s[3]||(s[3]=t("strong",null,"FAST RESTART",-1)),s[4]||(s[4]=r(" of Asterisk on node ",-1)),t("strong",null,u(m.localnode),1),s[5]||(s[5]=r(". ",-1))]),s[8]||(s[8]=t("p",{class:"warning-text"}," This will immediately restart the Asterisk service. All active calls and connections will be terminated. ",-1)),s[9]||(s[9]=t("p",{class:"warning-text"},[t("strong",null,"This action cannot be undone!")],-1)),t("div",{class:"confirmation-actions"},[t("button",{onClick:k,class:"restart-button"}," üöÄ Execute Fast Restart "),t("button",{onClick:d,class:"cancel-button"}," Cancel ")])])):c("",!0),i.value?(n(),o("div",A,[...s[10]||(s[10]=[t("div",{class:"spinner"},null,-1),t("h4",null,"Executing Fast Restart...",-1),t("p",null,"Please wait while the restart command is being sent to Asterisk.",-1)])])):c("",!0),e.value?(n(),o("div",S,[e.value.success?(n(),o("div",E,[s[13]||(s[13]=t("div",{class:"success-icon"},"‚úÖ",-1)),s[14]||(s[14]=t("h4",null,"Fast Restart Executed Successfully",-1)),t("p",null,u(e.value.message),1),t("div",N,[t("p",null,[s[11]||(s[11]=t("strong",null,"Node:",-1)),r(" "+u(e.value.localnode),1)]),t("p",null,[s[12]||(s[12]=t("strong",null,"Timestamp:",-1)),r(" "+u(y(e.value.timestamp)),1)])])])):(n(),o("div",B,[s[15]||(s[15]=t("div",{class:"error-icon"},"‚ùå",-1)),s[16]||(s[16]=t("h4",null,"Fast Restart Failed",-1)),t("p",null,u(e.value.message),1)])),t("div",{class:"result-actions"},[t("button",{onClick:d,class:"close-result-button"}," Close ")])])):c("",!0)])])])):c("",!0)}},L=F(D,[["__scopeId","data-v-edd80a2d"]]);export{L as default};
//# sourceMappingURL=FastRestart-BqNi2V9s.js.map
