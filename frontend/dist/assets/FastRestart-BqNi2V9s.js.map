{"version":3,"file":"FastRestart-BqNi2V9s.js","sources":["../../src/components/FastRestart.vue"],"sourcesContent":["<template>\n  <div v-if=\"isVisible\" class=\"modal-overlay\" @click=\"closeModal\">\n    <div class=\"modal-content\" @click.stop>\n      <div class=\"modal-header\">\n        <h3>Fast Restart Asterisk</h3>\n        <button class=\"close-button\" @click=\"closeModal\">&times;</button>\n      </div>\n\n      <div class=\"modal-body\">\n        <!-- Confirmation State -->\n        <div v-if=\"!isExecuting && !result\" class=\"confirmation\">\n          <div class=\"warning-icon\">‚ö†Ô∏è</div>\n          <h4>Confirm Fast Restart</h4>\n          <p class=\"warning-text\">\n            You are about to perform a <strong>FAST RESTART</strong> of Asterisk on node <strong>{{ localnode }}</strong>.\n          </p>\n          <p class=\"warning-text\">\n            This will immediately restart the Asterisk service. All active calls and connections will be terminated.\n          </p>\n          <p class=\"warning-text\">\n            <strong>This action cannot be undone!</strong>\n          </p>\n          \n          <div class=\"confirmation-actions\">\n            <button @click=\"executeRestart\" class=\"restart-button\">\n              üöÄ Execute Fast Restart\n            </button>\n            <button @click=\"closeModal\" class=\"cancel-button\">\n              Cancel\n            </button>\n          </div>\n        </div>\n\n        <!-- Loading State -->\n        <div v-if=\"isExecuting\" class=\"loading\">\n          <div class=\"spinner\"></div>\n          <h4>Executing Fast Restart...</h4>\n          <p>Please wait while the restart command is being sent to Asterisk.</p>\n        </div>\n\n        <!-- Result State -->\n        <div v-if=\"result\" class=\"result\">\n          <div v-if=\"result.success\" class=\"success-result\">\n            <div class=\"success-icon\">‚úÖ</div>\n            <h4>Fast Restart Executed Successfully</h4>\n            <p>{{ result.message }}</p>\n            <div class=\"result-details\">\n              <p><strong>Node:</strong> {{ result.localnode }}</p>\n              <p><strong>Timestamp:</strong> {{ formatTimestamp(result.timestamp) }}</p>\n            </div>\n          </div>\n          \n          <div v-else class=\"error-result\">\n            <div class=\"error-icon\">‚ùå</div>\n            <h4>Fast Restart Failed</h4>\n            <p>{{ result.message }}</p>\n          </div>\n          \n          <div class=\"result-actions\">\n            <button @click=\"closeModal\" class=\"close-result-button\">\n              Close\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport { api } from '@/utils/api'\n\nconst props = defineProps({\n  isVisible: {\n    type: Boolean,\n    default: false\n  },\n  localnode: {\n    type: [String, Number],\n    default: null\n  }\n})\n\nconst emit = defineEmits(['update:isVisible'])\n\n// Reactive state\nconst isExecuting = ref(false)\nconst result = ref(null)\n\n// Watch for modal visibility changes\nwatch(() => props.isVisible, (newVal) => {\n  if (!newVal) {\n    resetState()\n  }\n})\n\n// Methods\nconst closeModal = () => {\n  emit('update:isVisible', false)\n  resetState()\n}\n\nconst resetState = () => {\n  isExecuting.value = false\n  result.value = null\n}\n\nconst executeRestart = async () => {\n  if (!props.localnode) {\n    result.value = {\n      success: false,\n      message: 'No node selected for restart operation.'\n    }\n    return\n  }\n\n  isExecuting.value = true\n  result.value = null\n\n  try {\n    const response = await api.post('/nodes/fastrestart', { localnode: props.localnode })\n\n    if (response.data.success) {\n      result.value = response.data.data\n    } else {\n      result.value = {\n        success: false,\n        message: response.data.message || 'Failed to execute fast restart'\n      }\n    }\n  } catch (err) {\n    console.error('Fast restart error:', err)\n    result.value = {\n      success: false,\n      message: err.response?.data?.message || 'Failed to execute fast restart'\n    }\n  } finally {\n    isExecuting.value = false\n  }\n}\n\nconst formatTimestamp = (timestamp) => {\n  if (!timestamp) return ''\n  return new Date(timestamp).toLocaleString()\n}\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background-color: var(--background-color);\n  border-radius: 8px;\n  width: 90%;\n  max-width: 500px;\n  max-height: 80vh;\n  overflow-y: auto;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n  border: 1px solid var(--border-color);\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid var(--border-color);\n  background-color: var(--container-bg);\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: var(--text-color);\n}\n\n.close-button {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  cursor: pointer;\n  color: var(--text-color);\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.close-button:hover {\n  color: var(--link-color);\n}\n\n.modal-body {\n  padding: 1.5rem;\n}\n\n.confirmation {\n  text-align: center;\n}\n\n.warning-icon {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n}\n\n.confirmation h4 {\n  color: #ff6b35;\n  margin-bottom: 1rem;\n}\n\n.warning-text {\n  color: var(--text-color);\n  line-height: 1.5;\n  margin-bottom: 1rem;\n}\n\n.confirmation-actions {\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n  margin-top: 2rem;\n}\n\n.restart-button {\n  background-color: #dc3545;\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: bold;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.restart-button:hover {\n  background-color: #c82333;\n}\n\n.cancel-button {\n  background-color: var(--secondary-bg);\n  color: var(--text-color);\n  border: 1px solid var(--border-color);\n  padding: 12px 24px;\n  border-radius: 6px;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.cancel-button:hover {\n  background-color: var(--border-color);\n}\n\n.loading {\n  text-align: center;\n  padding: 2rem;\n}\n\n.spinner {\n  border: 3px solid var(--border-color);\n  border-top: 3px solid #ff6b35;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 1rem;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.loading h4 {\n  color: var(--text-color);\n  margin-bottom: 1rem;\n}\n\n.loading p {\n  color: var(--secondary-text);\n}\n\n.result {\n  text-align: center;\n}\n\n.success-result {\n  color: var(--text-color);\n}\n\n.success-icon {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n}\n\n.success-result h4 {\n  color: #28a745;\n  margin-bottom: 1rem;\n}\n\n.error-result {\n  color: var(--text-color);\n}\n\n.error-icon {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n}\n\n.error-result h4 {\n  color: #dc3545;\n  margin-bottom: 1rem;\n}\n\n.result-details {\n  background-color: var(--container-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  padding: 1rem;\n  margin: 1rem 0;\n  text-align: left;\n}\n\n.result-details p {\n  margin: 0.5rem 0;\n  color: var(--secondary-text);\n}\n\n.result-actions {\n  margin-top: 2rem;\n}\n\n.close-result-button {\n  background-color: var(--primary-color);\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 6px;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.close-result-button:hover {\n  background-color: var(--link-color);\n}\n</style>\n"],"names":["props","__props","emit","__emit","isExecuting","ref","result","watch","newVal","resetState","closeModal","executeRestart","response","api","err","_b","_a","formatTimestamp","timestamp","_createElementBlock","_createElementVNode","_cache","_hoisted_1","_openBlock","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_toDisplayString","_hoisted_7","_createTextVNode","_hoisted_8"],"mappings":"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"}