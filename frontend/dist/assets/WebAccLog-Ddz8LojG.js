import{r as g,w as C,f as n,l as i,k as r,g as e,t as c,C as _,F as W,p as A,h as B}from"./vendor-BDu8AGUg.js";import{_ as M,a as m}from"./index-ixAHyd21.js";const N={class:"modal-body"},x={key:0,class:"loading"},D={key:1,class:"error-message"},E={key:2,class:"webacclog-content"},R={key:0,class:"log-file-info"},S={key:1,class:"log-entries"},T={class:"table-container"},I={class:"log-table"},U={class:"line-number"},j={class:"log-entry"},q={class:"log-pre"},z={key:2,class:"no-entries"},G={key:3,class:"refresh-section"},H=["disabled"],J={__name:"WebAccLog",props:{isVisible:{type:Boolean,default:!1}},emits:["update:isVisible"],setup(v,{emit:h}){const y=v,w=h,u=g(!1),d=g(!1),a=g(null),t=g({}),f=g("Loading web access log...");C(()=>y.isVisible,o=>{o&&L()});const b=()=>{w("update:isVisible",!1),k()},k=()=>{u.value=!1,d.value=!1,a.value=null,t.value={}},L=async()=>{var o,s;u.value=!0,a.value=null,f.value="Loading web access log...";try{const l=await m.post("/nodes/webacclog");l.data.success?t.value=l.data.data:a.value=l.data.message||"Failed to load web access log"}catch(l){console.error("Web access log error:",l),a.value=((s=(o=l.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to load web access log"}finally{u.value=!1}},F=async()=>{var o,s;d.value=!0,a.value=null;try{const l=await m.post("/nodes/webacclog");l.data.success?t.value=l.data.data:a.value=l.data.message||"Failed to refresh web access log"}catch(l){console.error("Web access log refresh error:",l),a.value=((s=(o=l.response)==null?void 0:o.data)==null?void 0:s.message)||"Failed to refresh web access log"}finally{d.value=!1}},V=o=>o?new Date(o).toLocaleString():"";return(o,s)=>v.isVisible?(r(),n("div",{key:0,class:"modal-overlay",onClick:b},[e("div",{class:"modal-content",onClick:s[0]||(s[0]=B(()=>{},["stop"]))},[e("div",{class:"modal-header"},[s[1]||(s[1]=e("h3",null,"Web Access Log",-1)),e("button",{class:"close-button",onClick:b},"Ã—")]),e("div",N,[u.value?(r(),n("div",x,[s[2]||(s[2]=e("div",{class:"spinner"},null,-1)),e("p",null,c(f.value),1)])):i("",!0),a.value?(r(),n("div",D,[e("p",null,c(a.value),1)])):i("",!0),!u.value&&!a.value?(r(),n("div",E,[t.value.log_file_path?(r(),n("div",R,[e("p",null,[s[3]||(s[3]=e("strong",null,"Log File:",-1)),_(" "+c(t.value.log_file_path),1)]),e("p",null,[s[4]||(s[4]=e("strong",null,"Last Updated:",-1)),_(" "+c(V(t.value.timestamp)),1)])])):i("",!0),t.value.log_lines&&t.value.log_lines.length>0?(r(),n("div",S,[s[6]||(s[6]=e("h4",null,"Last 100 Access Log Entries (Most Recent First)",-1)),e("div",T,[e("table",I,[s[5]||(s[5]=e("thead",null,[e("tr",null,[e("th",null,"Line"),e("th",null,"Log Entry")])],-1)),e("tbody",null,[(r(!0),n(W,null,A(t.value.log_lines,(l,p)=>(r(),n("tr",{key:p,class:"log-row"},[e("td",U,c(p+1),1),e("td",j,[e("pre",q,c(l),1)])]))),128))])])])])):t.value.log_lines&&t.value.log_lines.length===0?(r(),n("div",z,[...s[7]||(s[7]=[e("p",null,"No log entries found in the web access log file.",-1)])])):i("",!0)])):i("",!0),!u.value&&!a.value?(r(),n("div",G,[e("button",{onClick:F,class:"refresh-button",disabled:d.value},c(d.value?"Refreshing...":"Refresh Log"),9,H)])):i("",!0)])])])):i("",!0)}},P=M(J,[["__scopeId","data-v-7bbbf4ab"]]);export{P as default};
//# sourceMappingURL=WebAccLog-Ddz8LojG.js.map
