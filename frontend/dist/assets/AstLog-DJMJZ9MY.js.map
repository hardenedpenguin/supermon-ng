{"version":3,"file":"AstLog-DJMJZ9MY.js","sources":["../../src/components/AstLog.vue"],"sourcesContent":["<template>\n  <Teleport to=\"body\">\n    <Transition name=\"modal\">\n      <div v-if=\"open\" class=\"astlog-modal\">\n        <div class=\"astlog-overlay\" @click=\"closeModal\"></div>\n        <div class=\"astlog-content\">\n          <div class=\"astlog-header\">\n            <h2>Asterisk Messages Log Viewer</h2>\n            <button class=\"close-button\" @click=\"closeModal\">&times;</button>\n          </div>\n\n          <div class=\"astlog-body\">\n            <!-- Loading state -->\n            <div v-if=\"loading\" class=\"loading\">\n              <p>Loading Asterisk log...</p>\n            </div>\n\n            <!-- Error state -->\n            <div v-else-if=\"error\" class=\"error-message\">\n              <p>{{ error }}</p>\n            </div>\n\n            <!-- Log content -->\n            <div v-else-if=\"logContent\" class=\"log-content\">\n              <div class=\"log-info\">\n                <p><strong>Log File:</strong> {{ logPath }}</p>\n                <p><strong>Last Updated:</strong> {{ lastModified }}</p>\n              </div>\n              \n              <hr>\n              \n              <div class=\"log-controls\">\n                <button @click=\"refreshLog\" :disabled=\"loading\" class=\"refresh-btn\">\n                  {{ loading ? 'Refreshing...' : 'Refresh Log' }}\n                </button>\n                <button @click=\"copyToClipboard\" class=\"copy-btn\">\n                  Copy to Clipboard\n                </button>\n              </div>\n              \n              <pre class=\"log-viewer-pre\">{{ logContent }}</pre>\n            </div>\n\n            <!-- Empty state -->\n            <div v-else class=\"empty-state\">\n              <p>No log content available.</p>\n            </div>\n          </div>\n\n          <div class=\"astlog-footer\">\n            <div class=\"button-group\">\n              <input \n                type=\"button\" \n                value=\"Close\" \n                @click=\"closeModal\"\n                class=\"close-btn\"\n              >\n            </div>\n          </div>\n        </div>\n      </div>\n    </Transition>\n  </Teleport>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, watch, onMounted } from 'vue'\nimport { api } from '@/utils/api'\nimport type { AxiosErrorResponse } from '@/types/api'\n\ninterface Props {\n  open: boolean\n}\n\nconst props = defineProps<Props>()\nconst emit = defineEmits<{\n  'update:open': [value: boolean]\n}>()\n\nconst loading = ref(false)\nconst error = ref('')\nconst logContent = ref('')\nconst logPath = ref('')\nconst lastModified = ref('')\n\nconst loadAstLog = async () => {\n  loading.value = true\n  error.value = ''\n  \n  try {\n    const response = await api.get('/config/astlog')\n    \n    if (response.data.success) {\n      logContent.value = response.data.content\n      logPath.value = response.data.path\n      lastModified.value = response.data.lastModified\n    } else {\n      error.value = response.data.message || 'Failed to load Asterisk log'\n    }\n  } catch (err: unknown) {\n    const axiosError = err as AxiosErrorResponse\n    error.value = axiosError.response?.data?.message || 'Failed to load Asterisk log'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst refreshLog = async () => {\n  await loadAstLog()\n}\n\nconst copyToClipboard = async () => {\n  try {\n    await navigator.clipboard.writeText(logContent.value)\n    alert('Log content copied to clipboard!')\n  } catch (err) {\n    console.error('Failed to copy to clipboard:', err)\n    alert('Failed to copy to clipboard')\n  }\n}\n\nconst closeModal = () => {\n  emit('update:open', false)\n  // Reset state\n  loading.value = false\n  error.value = ''\n  logContent.value = ''\n  logPath.value = ''\n  lastModified.value = ''\n}\n\n// Watch for modal open state\nwatch(() => props.open, (newOpen) => {\n  if (newOpen) {\n    loadAstLog()\n  }\n})\n\n// Load log when component mounts if modal is open\nonMounted(() => {\n  if (props.open) {\n    loadAstLog()\n  }\n})\n</script>\n\n<style scoped>\n.astlog-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.astlog-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n\n.astlog-content {\n  position: relative;\n  background-color: #1f2937;\n  border: 1px solid #374151;\n  border-radius: 8px;\n  max-width: 1200px;\n  width: 95%;\n  max-height: 90vh;\n  overflow-y: auto;\n  color: #f9fafb;\n}\n\n.astlog-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #374151;\n  background-color: #111827;\n}\n\n.astlog-header h2 {\n  margin: 0;\n  color: #f9fafb;\n  font-size: 1.5rem;\n}\n\n.close-button {\n  background: none;\n  border: none;\n  color: #9ca3af;\n  font-size: 1.5rem;\n  cursor: pointer;\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.close-button:hover {\n  color: #f9fafb;\n}\n\n.astlog-body {\n  padding: 20px;\n}\n\n.loading, .error-message, .empty-state {\n  text-align: center;\n  padding: 40px 20px;\n}\n\n.loading p {\n  color: #9ca3af;\n  font-size: 1.1rem;\n}\n\n.error-message p {\n  color: #ef4444;\n  font-size: 1.1rem;\n}\n\n.empty-state p {\n  color: #6b7280;\n  font-size: 1.1rem;\n}\n\n.log-info {\n  margin-bottom: 20px;\n  padding: 15px;\n  background-color: #111827;\n  border-radius: 6px;\n  border: 1px solid #374151;\n}\n\n.log-info p {\n  margin: 5px 0;\n  color: #d1d5db;\n}\n\n.log-controls {\n  margin-bottom: 20px;\n  display: flex;\n  gap: 10px;\n}\n\n.refresh-btn, .copy-btn {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 500;\n}\n\n.refresh-btn {\n  background-color: #2563eb;\n  color: white;\n}\n\n.refresh-btn:hover:not(:disabled) {\n  background-color: #1d4ed8;\n}\n\n.refresh-btn:disabled {\n  background-color: #6b7280;\n  cursor: not-allowed;\n}\n\n.copy-btn {\n  background-color: #059669;\n  color: white;\n}\n\n.copy-btn:hover {\n  background-color: #047857;\n}\n\n.log-viewer-pre {\n  background-color: #111827;\n  border: 1px solid #374151;\n  border-radius: 6px;\n  padding: 20px;\n  overflow-x: auto;\n  font-family: 'Courier New', monospace;\n  font-size: 0.9rem;\n  line-height: 1.4;\n  color: #d1d5db;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  max-height: 60vh;\n  overflow-y: auto;\n}\n\n.astlog-footer {\n  padding: 20px;\n  border-top: 1px solid #374151;\n  background-color: #111827;\n}\n\n.button-group {\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end;\n}\n\n.close-btn {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 500;\n  background-color: #6b7280;\n  color: white;\n}\n\n.close-btn:hover {\n  background-color: #4b5563;\n}\n\n/* Modal transition */\n.modal-enter-active,\n.modal-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.modal-enter-from,\n.modal-leave-to {\n  opacity: 0;\n}\n</style>\n"],"names":["props","__props","emit","__emit","loading","ref","error","logContent","logPath","lastModified","loadAstLog","response","api","err","axiosError","_b","_a","refreshLog","copyToClipboard","closeModal","watch","newOpen","onMounted","_createBlock","_Teleport","_createVNode","_Transition","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_createTextVNode","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","_hoisted_11"],"mappings":"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"}