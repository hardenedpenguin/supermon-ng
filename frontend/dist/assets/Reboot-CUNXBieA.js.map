{"version":3,"file":"Reboot-CUNXBieA.js","sources":["../../src/components/Reboot.vue"],"sourcesContent":["<template>\n  <div v-if=\"isVisible\" class=\"modal-overlay\" @click=\"closeModal\">\n    <div class=\"modal-content\" @click.stop>\n      <div class=\"modal-header\">\n        <h3>Server Reboot</h3>\n        <button class=\"close-button\" @click=\"closeModal\">&times;</button>\n      </div>\n\n      <div class=\"modal-body\">\n        <!-- Confirmation State -->\n        <div v-if=\"!isExecuting && !result\" class=\"confirmation\">\n          <div class=\"warning-icon\">‚ö†Ô∏è</div>\n          <h4>Confirm Server Reboot</h4>\n          <p class=\"warning-text\">\n            You are about to <strong>REBOOT THE ENTIRE SERVER</strong>.\n          </p>\n          <p class=\"warning-text\">\n            This will immediately restart the system. All active connections, services, and processes will be terminated.\n          </p>\n          <p class=\"warning-text\">\n            <strong>This action cannot be undone and will cause system downtime!</strong>\n          </p>\n          \n          <div class=\"confirmation-actions\">\n            <button @click=\"executeReboot\" class=\"reboot-button\">\n              üöÄ Execute Server Reboot\n            </button>\n            <button @click=\"closeModal\" class=\"cancel-button\">\n              Cancel\n            </button>\n          </div>\n        </div>\n\n        <!-- Loading State -->\n        <div v-if=\"isExecuting\" class=\"loading\">\n          <div class=\"spinner\"></div>\n          <h4>Executing Server Reboot...</h4>\n          <p>Please wait while the reboot command is being sent to the system.</p>\n          <p class=\"note\">The system will restart immediately after the command is executed.</p>\n        </div>\n\n        <!-- Result State -->\n        <div v-if=\"result\" class=\"result\">\n          <div v-if=\"result.success\" class=\"success-result\">\n            <div class=\"success-icon\">‚úÖ</div>\n            <h4>Server Reboot Executed Successfully</h4>\n            <p>{{ result.message }}</p>\n            <div class=\"result-details\">\n              <p><strong>Timestamp:</strong> {{ formatTimestamp(result.timestamp) }}</p>\n            </div>\n            <div class=\"reboot-notice\">\n              <p><strong>System Status:</strong> The server is now rebooting. You will lose connection to this interface.</p>\n              <p>Please wait for the system to fully restart before attempting to reconnect.</p>\n            </div>\n          </div>\n          \n          <div v-else class=\"error-result\">\n            <div class=\"error-icon\">‚ùå</div>\n            <h4>Server Reboot Failed</h4>\n            <p>{{ result.message }}</p>\n          </div>\n          \n          <div class=\"result-actions\">\n            <button @click=\"closeModal\" class=\"close-result-button\">\n              Close\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport { api } from '@/utils/api'\n\nconst props = defineProps({\n  isVisible: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits(['update:isVisible'])\n\n// Reactive state\nconst isExecuting = ref(false)\nconst result = ref(null)\n\n// Watch for modal visibility changes\nwatch(() => props.isVisible, (newVal) => {\n  if (!newVal) {\n    resetState()\n  }\n})\n\n// Methods\nconst closeModal = () => {\n  emit('update:isVisible', false)\n  resetState()\n}\n\nconst resetState = () => {\n  isExecuting.value = false\n  result.value = null\n}\n\nconst executeReboot = async () => {\n  isExecuting.value = true\n  result.value = null\n\n  try {\n    const response = await api.post('/nodes/reboot')\n\n    if (response.data.success) {\n      result.value = {\n        success: true,\n        ...response.data.data\n      }\n    } else {\n      result.value = {\n        success: false,\n        message: response.data.message || 'Failed to execute server reboot'\n      }\n    }\n  } catch (err) {\n    console.error('Reboot error:', err)\n    result.value = {\n      success: false,\n      message: err.response?.data?.message || 'Failed to execute server reboot'\n    }\n  } finally {\n    isExecuting.value = false\n  }\n}\n\nconst formatTimestamp = (timestamp) => {\n  if (!timestamp) return ''\n  return new Date(timestamp).toLocaleString()\n}\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.6);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background-color: var(--background-color);\n  border-radius: 8px;\n  width: 90%;\n  max-width: 500px;\n  max-height: 80vh;\n  overflow-y: auto;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n  border: 1px solid var(--border-color);\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid var(--border-color);\n  background-color: var(--container-bg);\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: var(--text-color);\n}\n\n.close-button {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  cursor: pointer;\n  color: var(--text-color);\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.close-button:hover {\n  color: var(--link-color);\n}\n\n.modal-body {\n  padding: 1.5rem;\n}\n\n.confirmation {\n  text-align: center;\n}\n\n.warning-icon {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n}\n\n.confirmation h4 {\n  color: #dc3545;\n  margin-bottom: 1rem;\n}\n\n.warning-text {\n  color: var(--text-color);\n  line-height: 1.5;\n  margin-bottom: 1rem;\n}\n\n.confirmation-actions {\n  display: flex;\n  gap: 1rem;\n  justify-content: center;\n  margin-top: 2rem;\n}\n\n.reboot-button {\n  background-color: #dc3545;\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: bold;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.reboot-button:hover {\n  background-color: #c82333;\n}\n\n.cancel-button {\n  background-color: var(--secondary-bg);\n  color: var(--text-color);\n  border: 1px solid var(--border-color);\n  padding: 12px 24px;\n  border-radius: 6px;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.cancel-button:hover {\n  background-color: var(--border-color);\n}\n\n.loading {\n  text-align: center;\n  padding: 2rem;\n}\n\n.spinner {\n  border: 3px solid var(--border-color);\n  border-top: 3px solid #dc3545;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 1rem;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.loading h4 {\n  color: var(--text-color);\n  margin-bottom: 1rem;\n}\n\n.loading p {\n  color: var(--secondary-text);\n  margin-bottom: 0.5rem;\n}\n\n.note {\n  font-style: italic;\n  color: #dc3545;\n  font-weight: bold;\n}\n\n.result {\n  text-align: center;\n}\n\n.success-result {\n  color: var(--text-color);\n}\n\n.success-icon {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n}\n\n.success-result h4 {\n  color: #28a745;\n  margin-bottom: 1rem;\n}\n\n.error-result {\n  color: var(--text-color);\n}\n\n.error-icon {\n  font-size: 3rem;\n  margin-bottom: 1rem;\n}\n\n.error-result h4 {\n  color: #dc3545;\n  margin-bottom: 1rem;\n}\n\n.result-details {\n  background-color: var(--container-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  padding: 1rem;\n  margin: 1rem 0;\n  text-align: left;\n}\n\n.result-details p {\n  margin: 0.5rem 0;\n  color: var(--secondary-text);\n}\n\n.reboot-notice {\n  background-color: #fff3cd;\n  border: 1px solid #ffeaa7;\n  border-radius: 4px;\n  padding: 1rem;\n  margin: 1rem 0;\n  text-align: left;\n}\n\n.reboot-notice p {\n  margin: 0.5rem 0;\n  color: #856404;\n}\n\n.result-actions {\n  margin-top: 2rem;\n}\n\n.close-result-button {\n  background-color: var(--primary-color);\n  color: white;\n  border: none;\n  padding: 12px 24px;\n  border-radius: 6px;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.close-result-button:hover {\n  background-color: var(--link-color);\n}\n</style>\n"],"names":["props","__props","emit","__emit","isExecuting","ref","result","watch","newVal","resetState","closeModal","executeReboot","response","api","err","_b","_a","formatTimestamp","timestamp","_createElementBlock","_createElementVNode","_cache","_hoisted_1","_openBlock","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","_hoisted_6","_createTextVNode","_hoisted_7"],"mappings":"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"}