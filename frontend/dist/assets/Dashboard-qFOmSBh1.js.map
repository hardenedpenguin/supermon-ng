{"version":3,"mappings":"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","names":["_imports_0","useAstdbStore","defineStore","cache","ref","fullAstdb","stats","lastRefresh","isLoading","error","CACHE_DURATION","MAX_CACHE_SIZE","REFRESH_THRESHOLD","isCacheValid","computed","cacheSize","initialize","loadFullAstdb","err","response","api","_a","_b","_d","_c","astdbData","_e","entryCount","getNodeInfo","nodeId","cacheKey","cachedEntry","nodeInfo","cacheNodeInfo","getMultipleNodesInfo","nodeIds","results","uncachedIds","searchNodes","query","limit","cleanCache","getStats","checkHealth","clearCache","forceRefresh","now","entries","key","entry","sortedEntries","_","a","b","toRemove","getCacheStats","validEntries","expiredEntries","BatchRequestService","config","__publicField","request","id","cached","resolve","reject","batchRequest","nodesResponse","configResponse","astdbResponse","nodeParams","amiResponse","requests","priorityOrder","chunks","chunk","groups","group","promises","data","pending","paramsStr","array","size","i","useBatchRequests","batchService","WebSocketService","wsUrl","ws","connectionTimeout","event","errorMessage","state","reconnectTimer","handler","handlers","attempts","delay","timer","webSocketService","useRealTimeStore","nodes","nodeConfig","astdbStore","isConnected","monitoringNodes","lastUpdateTime","websocketPorts","batchInitialization","messageHandlers","stateHandlers","isMonitoring","startTime","batchResult","newNodes","node","info","newNode","existingIndex","n","existing","newNodeIds","fetchWebSocketPorts","duration","endpoints","getWebSocketUrl","protocol","host","startMonitoring","unsubscribeMessage","updateNodeFromWebSocket","unsubscribeState","stopMonitoring","index","messageUnsubscribe","stateUnsubscribe","existingNodeIndex","nodeUpdate","connectedNodes","remote","existingNode","astdbEntry","callsign","description","location","fetchNodeData","amiData","amiNode","rawNodes","getNodeById","clearError","connectNode","perm","disconnectNode","monitorNode","permConnectNode","localMonitorNode","monitorCmdNode","reset","sanitizeHtml","html","DOMPurify","onMounted","props","nodeInput","openBubbleChart","__props","emit","__emit","loading","success","bubbleChartUrl","closeModal","resetState","copyToClipboard","openInNewWindow","watch","newValue","_createElementBlock","_createElementVNode","_cache","_hoisted_1","_openBlock","_hoisted_2","$event","_hoisted_3","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","_createTextVNode","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","loadLsnodData","axiosError","getNodeCallsign","getCurrentTime","getMyIP","getBubbleChartUrl","getConnectionRowClass","classes","getRegistrationRowClass","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_Fragment","_normalizeClass","_hoisted_46","_hoisted_47","_hoisted_48","registration","_hoisted_49","timerTick","nodeTimers","appStore","useAppStore","nodeData","totalNodes","displayedNodes","showBubbleChart","showLsnodModal","colspan","tableClass","nodeTitle","customUrlKey","customUrl","infoDisplay","targetBlank","url","isPrivateOrHidden","baseTitle","nodeLink","allstarNodeUrl","links","modalLinks","title","headerStatusClass","cosKeyed","txKeyed","statusClass","headerStatusText","statusText","headerStatusDetails","details","cpuInfo","sanitizedNodeTitle","sanitizedHeaderStatusDetails","headerColspan","headerColspan3","displayedConnectedNodes","filteredNodes","maxNodes","showNodeCount","getConnectedNodeClass","className","getModeText","mode","scrollToTop","handleNodeClick","openBubbleChartModal","openLsnodModal","updateNodeData","maxDisplay","nodeKey","elapsedBase","elapsedTimestamp","timeMatch","hours","minutes","seconds","lastKeyedBase","lastKeyedTimestamp","refreshData","watchEffect","formatLastKeyed","lastKeyed","connectedNode","currentSeconds","elapsedSinceUpdate","numValue","formatElapsed","elapsed","secs","handleModalLinkClick","target","timerInterval","tableElement","onUnmounted","__expose","_renderList","_createBlock","BubbleChart","LsnodModal","username","password","showPassword","usernameError","passwordError","isFormValid","validateUsername","validatePassword","clearUsernameError","clearPasswordError","togglePassword","handleLogin","$emit","menuItems","showUrlModal","currentUrl","currentUrlTitle","currentLsnodNodeId","loadMenu","handleMenuClick","item","getSystemMenus","systemMenus","value","items","systemName","_createVNode","UrlModal","DisplayConfig","defineAsyncComponent","__vitePreload","AddFavorite","DeleteFavorite","Favorites","DVSwitchModal","AstLog","AstLookup","BubbleChart$1","ControlPanel","RptStats","CpuStats","Database","Donate","ExtNodes","FastRestart","IRLPLog","LinuxLog","BanAllow","PiGPIO","Reboot","SMLog","Stats","WebAccLog","WebErrLog","Voter","ConfigEditor","SystemInfo","DigitalDashboard","NodeStatus","realTimeStore","selectedNode","selectedLocalNode","targetNode","permConnect","currentDateTime","showDateTime","dateTimeInterval","updateDateTime","options","loadDisplaySettingsFromCookies","cookies","acc","cookie","cleanKey","showLoginModal","showDisplayConfigModal","showAddFavoriteModal","showDeleteFavoriteModal","showFavoritesModal","showAstLogModal","showAstLookupModal","showBubbleChartModal","showControlPanelModal","showRptStatsModal","showCpuStatsModal","showDatabaseModal","showDonateModal","showExtNodesModal","showFastRestartModal","showIrlpLogModal","showLinuxLogModal","showBanAllowModal","showPiGPIOModal","showRebootModal","showSMLogModal","showStatsModal","showWebAccLogModal","showWebErrLogModal","showVoterModal","showConfigEditorModal","showSystemInfoModal","showDvswitchModal","nodeTableRefs","systemInfo","headerBackground","showDigitalDashboardModal","showNodeStatusModal","databaseStatus","isLoadingDefaultNodes","hasControlPermissions","availableNodes","selectedNodeStr","headerBackgroundUrl","backgroundUrl","formatHeaderTag","parts","getCleanUrl","shouldOpenInNewTab","customLogoStyle","styles","welcomeMessage","headerTitle","headerTitleStyle","color","callsignStyle","newSystemInfo","onNodeChange","connect","disconnect","monitor","localmonitor","dtmf","dtmfCommand","nodeToUse","astlookup","rptstats","bubble","openDigitalDashboard","openNodeStatus","configeditor","astreload","astaron","astaroff","fastrestart","reboot","openHelp","openWiki","cpustats","aststats","nodeNumber","openActiveNodes","openAllNodes","database","openpigpio","linuxlog","astlog","webacclog","weberrlog","openbanallow","systeminfo","handleLoginSuccess","defaultNode","handleLogout","openDonatePopup","handleNodeSelection","localNodeId","controlPanel","handleDisplaySettingsUpdated","_settings","handleFavoriteAdded","_result","handleFavoriteDeleted","handleCommandExecuted","onBeforeMount","controller","timeoutId","boot","nextTick","systemResponse","databaseResponse","_f","firstNode","newRefs","_normalizeStyle","_unref","_g","_h","_i","_j","Menu","_k","NodeTable","el","_l","LoginForm","_m","_n","_o","_p","_q"],"ignoreList":[],"sources":["../../../../../../allstarlink.jpg","../../src/stores/astdb.ts","../../src/services/BatchRequestService.ts","../../src/services/WebSocketService.ts","../../src/stores/realTime.ts","../../src/utils/sanitize.ts","../../src/components/BubbleChart.vue","../../src/components/LsnodModal.vue","../../src/components/NodeTable.vue","../../src/components/LoginForm.vue","../../src/components/UrlModal.vue","../../src/components/Menu.vue","../../src/views/Dashboard.vue"],"sourcesContent":["export default \"__VITE_PUBLIC_ASSET__4fdd96fc__\"","import { defineStore } from 'pinia'\nimport { ref, computed } from 'vue'\nimport { api } from '@/utils/api'\nimport type { AstDbEntry } from '@/types'\n\n// ASTDB cache interface\ninterface AstdbCacheEntry {\n  data: AstDbEntry\n  timestamp: number\n  expiresAt: number\n}\n\ninterface AstdbStats {\n  cache_file_size: number\n  compression_ratio: string\n  entries_count: number\n  is_cached: boolean\n  is_compressed: boolean\n}\n\n/**\n * ASTDB Store with Browser-Side Caching (Phase 8 optimization)\n * \n * Implements intelligent caching strategies to reduce redundant API calls\n * and improve frontend performance for ASTDB data access.\n */\nexport const useAstdbStore = defineStore('astdb', () => {\n  // State\n  const cache = ref<Map<string, AstdbCacheEntry>>(new Map())\n  const fullAstdb = ref<AstDbEntry>({})\n  const stats = ref<AstdbStats | null>(null)\n  const lastRefresh = ref<number>(0)\n  const isLoading = ref(false)\n  const error = ref<string | null>(null)\n  \n  // Configuration\n  const CACHE_DURATION = 5 * 60 * 1000 // 5 minutes in milliseconds\n  const MAX_CACHE_SIZE = 1000 // Maximum number of cached entries\n  const REFRESH_THRESHOLD = 10 * 60 * 1000 // 10 minutes before considering data stale\n  \n  // Computed\n  const isCacheValid = computed(() => {\n    return Date.now() - lastRefresh.value < REFRESH_THRESHOLD\n  })\n  \n  const cacheSize = computed(() => cache.value.size)\n  \n  // Actions\n  \n  /**\n   * Initialize ASTDB store and load initial data\n   */\n  const initialize = async (): Promise<void> => {\n    try {\n      isLoading.value = true\n      error.value = null\n      \n      // Check if we have valid cached data first\n      if (isCacheValid.value && Object.keys(fullAstdb.value).length > 0) {\n        console.log('ASTDB: Using cached data')\n        return\n      }\n      \n      // Load fresh data from the optimized endpoint\n      await loadFullAstdb()\n      \n    } catch (err) {\n      error.value = 'Failed to initialize ASTDB store'\n      console.error('ASTDB store initialization error:', err)\n    } finally {\n      isLoading.value = false\n    }\n  }\n  \n  /**\n   * Load full ASTDB data with caching\n   */\n  const loadFullAstdb = async (): Promise<void> => {\n    try {\n      // Try to get from database status endpoint (includes ASTDB)\n      // Use longer timeout for large ASTDB files\n      const response = await api.get('/database/status', {\n        timeout: 30000 // 30 seconds for large ASTDB files\n      })\n      \n      // Debug: Log the full response structure\n      console.log('Database status response:', {\n        status: response.status,\n        success: response.data?.success,\n        hasData: !!response.data?.data,\n        hasAstdb: !!response.data?.data?.astdb\n      })\n      \n      // Check if response is valid\n      if (!response.data) {\n        console.error('Empty response from database status endpoint')\n        throw new Error('Invalid response from database status endpoint: empty response')\n      }\n      \n      if (!response.data.success) {\n        console.error('Database status endpoint returned success=false:', response.data)\n        throw new Error('Invalid response from database status endpoint: ' + (response.data.message || 'Unknown error'))\n      }\n      \n      // Ensure astdb exists in response (may be empty array)\n      const astdbData = response.data.data?.astdb\n      if (astdbData === undefined || astdbData === null) {\n        console.error('ASTDB data missing in response:', response.data)\n        throw new Error('No ASTDB data in response')\n      }\n      \n      // Ensure it's an array or object (should always be from backend, but double-check)\n      if (!Array.isArray(astdbData) && typeof astdbData !== 'object') {\n        console.error('ASTDB data has wrong type:', typeof astdbData, astdbData)\n        throw new Error('ASTDB data is not in expected format')\n      }\n      \n      fullAstdb.value = astdbData\n      lastRefresh.value = Date.now()\n      \n      const entryCount = Array.isArray(astdbData) ? astdbData.length : Object.keys(astdbData).length\n      console.log(`ASTDB: Loaded ${entryCount} entries`)\n    } catch (err) {\n      console.error('Failed to load full ASTDB:', err)\n      throw err\n    }\n  }\n  \n  /**\n   * Get single node information with intelligent caching\n   */\n  const getNodeInfo = async (nodeId: string): Promise<any | null> => {\n    try {\n      // Check browser cache first\n      const cacheKey = `node_${nodeId}`\n      const cachedEntry = cache.value.get(cacheKey)\n      \n      if (cachedEntry && cachedEntry.expiresAt > Date.now()) {\n        console.log(`ASTDB: Cache hit for node ${nodeId}`)\n        return cachedEntry.data\n      }\n      \n      // Check if we have full ASTDB data\n      if (Object.keys(fullAstdb.value).length > 0 && fullAstdb.value[nodeId]) {\n        const nodeInfo = fullAstdb.value[nodeId]\n        \n        // Cache this individual lookup\n        cacheNodeInfo(nodeId, nodeInfo)\n        return nodeInfo\n      }\n      \n      // Use optimized single node endpoint\n      console.log(`ASTDB: Fetching node ${nodeId} from API`)\n      const response = await api.get(`/astdb/node/${nodeId}`)\n      \n      if (response.data.success && response.data.data) {\n        const nodeInfo = {\n          node_id: nodeId,\n          callsign: response.data.data.callsign,\n          description: response.data.data.description,\n          location: response.data.data.location\n        }\n        \n        // Cache the result\n        cacheNodeInfo(nodeId, nodeInfo)\n        return nodeInfo\n      }\n      \n      return null\n    } catch (err) {\n      console.error(`Failed to get node info for ${nodeId}:`, err)\n      return null\n    }\n  }\n  \n  /**\n   * Get multiple nodes information with batch optimization\n   */\n  const getMultipleNodesInfo = async (nodeIds: string[]): Promise<Record<string, any>> => {\n    try {\n      const results: Record<string, any> = {}\n      const uncachedIds: string[] = []\n      \n      // Check cache for each node\n      for (const nodeId of nodeIds) {\n        const cacheKey = `node_${nodeId}`\n        const cachedEntry = cache.value.get(cacheKey)\n        \n        if (cachedEntry && cachedEntry.expiresAt > Date.now()) {\n          results[nodeId] = cachedEntry.data\n        } else {\n          uncachedIds.push(nodeId)\n        }\n      }\n      \n      // If we have uncached nodes, use batch endpoint\n      if (uncachedIds.length > 0) {\n        console.log(`ASTDB: Fetching ${uncachedIds.length} nodes from batch API`)\n        const response = await api.get('/astdb/nodes', {\n          params: { nodes: uncachedIds.join(',') }\n        })\n        \n        if (response.data.success && response.data.data) {\n          for (const [nodeId, nodeInfo] of Object.entries(response.data.data)) {\n            if (nodeInfo) {\n              results[nodeId] = nodeInfo\n              cacheNodeInfo(nodeId, nodeInfo)\n            }\n          }\n        }\n      }\n      \n      return results\n    } catch (err) {\n      console.error('Failed to get multiple nodes info:', err)\n      return {}\n    }\n  }\n  \n  /**\n   * Search ASTDB with caching\n   */\n  const searchNodes = async (query: string, limit: number = 50): Promise<any[]> => {\n    try {\n      const cacheKey = `search_${query}_${limit}`\n      const cachedEntry = cache.value.get(cacheKey)\n      \n      if (cachedEntry && cachedEntry.expiresAt > Date.now()) {\n        console.log(`ASTDB: Cache hit for search \"${query}\"`)\n        return cachedEntry.data\n      }\n      \n      console.log(`ASTDB: Searching for \"${query}\"`)\n      const response = await api.get('/astdb/search', {\n        params: { q: query, limit }\n      })\n      \n      if (response.data.success && response.data.data?.results) {\n        const results = response.data.data.results\n        \n        // Cache search results\n        cache.value.set(cacheKey, {\n          data: results,\n          timestamp: Date.now(),\n          expiresAt: Date.now() + CACHE_DURATION\n        })\n        \n        // Clean cache if it gets too large\n        cleanCache()\n        \n        return results\n      }\n      \n      return []\n    } catch (err) {\n      console.error('Failed to search ASTDB:', err)\n      return []\n    }\n  }\n  \n  /**\n   * Get ASTDB statistics\n   */\n  const getStats = async (): Promise<AstdbStats | null> => {\n    try {\n      const response = await api.get('/astdb/stats')\n      if (response.data.success) {\n        stats.value = response.data.data\n        return stats.value\n      }\n      return null\n    } catch (err) {\n      console.error('Failed to get ASTDB stats:', err)\n      return null\n    }\n  }\n  \n  /**\n   * Check ASTDB health\n   */\n  const checkHealth = async (): Promise<boolean> => {\n    try {\n      const response = await api.get('/astdb/health')\n      return response.data.success && response.data.healthy\n    } catch (err) {\n      console.error('ASTDB health check failed:', err)\n      return false\n    }\n  }\n  \n  /**\n   * Clear browser cache\n   */\n  const clearCache = (): void => {\n    cache.value.clear()\n    fullAstdb.value = {}\n    lastRefresh.value = 0\n    stats.value = null\n    console.log('ASTDB: Browser cache cleared')\n  }\n  \n  /**\n   * Force refresh of all data\n   */\n  const forceRefresh = async (): Promise<void> => {\n    clearCache()\n    await initialize()\n  }\n  \n  /**\n   * Cache individual node info\n   */\n  const cacheNodeInfo = (nodeId: string, nodeInfo: any): void => {\n    const cacheKey = `node_${nodeId}`\n    cache.value.set(cacheKey, {\n      data: nodeInfo,\n      timestamp: Date.now(),\n      expiresAt: Date.now() + CACHE_DURATION\n    })\n    \n    // Clean cache if it gets too large\n    if (cache.value.size > MAX_CACHE_SIZE) {\n      cleanCache()\n    }\n  }\n  \n  /**\n   * Clean expired and old cache entries\n   */\n  const cleanCache = (): void => {\n    const now = Date.now()\n    const entries = Array.from(cache.value.entries())\n    \n    // Remove expired entries\n    for (const [key, entry] of entries) {\n      if (entry.expiresAt <= now) {\n        cache.value.delete(key)\n      }\n    }\n    \n    // If still too large, remove oldest entries\n    if (cache.value.size > MAX_CACHE_SIZE) {\n      const sortedEntries = entries\n        .filter(([_, entry]) => entry.expiresAt > now)\n        .sort((a, b) => a[1].timestamp - b[1].timestamp)\n      \n      const toRemove = sortedEntries.slice(0, sortedEntries.length - MAX_CACHE_SIZE)\n      for (const [key] of toRemove) {\n        cache.value.delete(key)\n      }\n    }\n    \n    console.log(`ASTDB: Cache cleaned, ${cache.value.size} entries remaining`)\n  }\n  \n  /**\n   * Get cache statistics for debugging\n   */\n  const getCacheStats = () => {\n    const now = Date.now()\n    let validEntries = 0\n    let expiredEntries = 0\n    \n    for (const entry of cache.value.values()) {\n      if (entry.expiresAt > now) {\n        validEntries++\n      } else {\n        expiredEntries++\n      }\n    }\n    \n    return {\n      totalEntries: cache.value.size,\n      validEntries,\n      expiredEntries,\n      fullAstdbEntries: Object.keys(fullAstdb.value).length,\n      lastRefresh: new Date(lastRefresh.value).toISOString(),\n      isCacheValid: isCacheValid.value\n    }\n  }\n  \n  return {\n    // State\n    cache: readonly(cache),\n    fullAstdb: readonly(fullAstdb),\n    stats: readonly(stats),\n    isLoading: readonly(isLoading),\n    error: readonly(error),\n    \n    // Computed\n    isCacheValid,\n    cacheSize,\n    \n    // Actions\n    initialize,\n    getNodeInfo,\n    getMultipleNodesInfo,\n    searchNodes,\n    getStats,\n    checkHealth,\n    clearCache,\n    forceRefresh,\n    getCacheStats\n  }\n})\n\n// Helper function to create readonly refs (if not available in Vue version)\nfunction readonly<T>(ref: T): T {\n  return ref\n}\n","/**\n * Smart Request Batching Service\n * \n * Combines multiple API requests into efficient batches, reduces redundant calls,\n * and provides intelligent caching for improved performance.\n */\n\nimport { api } from '@/utils/api'\n\nexport interface BatchRequest {\n  id: string\n  endpoint: string\n  params?: any\n  method: 'GET' | 'POST' | 'PUT' | 'DELETE'\n  priority: 'high' | 'medium' | 'low'\n  ttl?: number // Cache TTL in milliseconds\n  dependencies?: string[] // Request IDs this depends on\n}\n\nexport interface BatchResponse {\n  id: string\n  data?: any\n  error?: string\n  cached?: boolean\n  timestamp: number\n}\n\nexport interface BatchConfig {\n  maxBatchSize: number\n  batchDelay: number // Delay before batching requests (ms)\n  cacheEnabled: boolean\n  defaultCacheTTL: number\n}\n\nexport class BatchRequestService {\n  private config: BatchConfig\n  private requestQueue: Map<string, BatchRequest> = new Map()\n  private responseCache: Map<string, BatchResponse> = new Map()\n  private batchTimer: NodeJS.Timeout | null = null\n  private pendingRequests: Map<string, { resolve: (value: any) => void; reject: (error: any) => void }> = new Map()\n\n  constructor(config: Partial<BatchConfig> = {}) {\n    this.config = {\n      maxBatchSize: 10,\n      batchDelay: 50, // 50ms delay to collect requests\n      cacheEnabled: true,\n      defaultCacheTTL: 30000, // 30 seconds default cache\n      ...config\n    }\n  }\n\n  /**\n   * Add a request to the batch queue\n   */\n  public async addRequest(request: Omit<BatchRequest, 'id'>): Promise<any> {\n    const id = this.generateRequestId(request)\n    \n    // Check cache first\n    if (this.config.cacheEnabled) {\n      const cached = this.getCachedResponse(id)\n      if (cached) {\n        return cached.data\n      }\n    }\n\n    // Check if request is already pending\n    if (this.pendingRequests.has(id)) {\n      return new Promise((resolve, reject) => {\n        // Reuse existing promise\n        this.pendingRequests.get(id)!.resolve = resolve\n        this.pendingRequests.get(id)!.reject = reject\n      })\n    }\n\n    const batchRequest: BatchRequest = {\n      ...request,\n      id,\n      ttl: request.ttl || this.config.defaultCacheTTL\n    }\n\n    return new Promise((resolve, reject) => {\n      // Store the request and promise handlers\n      this.requestQueue.set(id, batchRequest)\n      this.pendingRequests.set(id, { resolve, reject })\n\n      // Schedule batch processing\n      this.scheduleBatch()\n    })\n  }\n\n  /**\n   * Create a batched initialization request\n   */\n  public async batchInitialization(): Promise<{\n    nodes: any\n    config: any\n    astdbHealth: any\n  }> {\n    const batchId = `init_${Date.now()}`\n    \n    try {\n      // Execute requests in parallel but with proper error handling\n      const [nodesResponse, configResponse, astdbResponse] = await Promise.allSettled([\n        this.addRequest({\n          endpoint: '/nodes',\n          method: 'GET',\n          priority: 'high',\n          ttl: 10000 // Cache nodes for 10 seconds\n        }),\n        this.addRequest({\n          endpoint: '/config/nodes',\n          method: 'GET',\n          priority: 'high',\n          ttl: 300000 // Cache config for 5 minutes\n        }),\n        this.addRequest({\n          endpoint: '/astdb/health',\n          method: 'GET',\n          priority: 'medium',\n          ttl: 60000 // Cache health for 1 minute\n        })\n      ])\n\n      return {\n        nodes: nodesResponse.status === 'fulfilled' ? nodesResponse.value : null,\n        config: configResponse.status === 'fulfilled' ? configResponse.value : null,\n        astdbHealth: astdbResponse.status === 'fulfilled' ? astdbResponse.value : null\n      }\n    } catch (error) {\n      throw error\n    }\n  }\n\n  /**\n   * Create a batched real-time update request\n   */\n  public async batchRealTimeUpdate(nodeIds: string[]): Promise<{\n    amiStatus: any\n  }> {\n    try {\n      // Use GET method with query parameters - only use working AMI endpoint\n      const nodeParams = nodeIds.join(',')\n      const [amiResponse] = await Promise.allSettled([\n        this.addRequest({\n          endpoint: `/nodes/ami/status?nodes=${encodeURIComponent(nodeParams)}`,\n          method: 'GET',\n          params: {},\n          priority: 'high',\n          ttl: 500 // Very short 500ms cache to allow near real-time updates\n        })\n      ])\n\n      return {\n        amiStatus: amiResponse.status === 'fulfilled' ? amiResponse.value : null\n      }\n    } catch (error) {\n      throw error\n    }\n  }\n\n  /**\n   * Schedule batch processing\n   */\n  private scheduleBatch(): void {\n    if (this.batchTimer) {\n      return // Already scheduled\n    }\n\n    this.batchTimer = setTimeout(() => {\n      this.processBatch()\n    }, this.config.batchDelay)\n  }\n\n  /**\n   * Process the current batch of requests\n   */\n  private async processBatch(): void {\n    if (this.batchTimer) {\n      clearTimeout(this.batchTimer)\n      this.batchTimer = null\n    }\n\n    if (this.requestQueue.size === 0) {\n      return\n    }\n    \n    const requests = Array.from(this.requestQueue.values())\n    this.requestQueue.clear()\n\n    // Sort by priority\n    requests.sort((a, b) => {\n      const priorityOrder = { high: 0, medium: 1, low: 2 }\n      return priorityOrder[a.priority] - priorityOrder[b.priority]\n    })\n\n    // Process requests in batches\n    const chunks = this.chunkArray(requests, this.config.maxBatchSize)\n    \n    for (const chunk of chunks) {\n      await this.processBatchChunk(chunk)\n    }\n  }\n\n  /**\n   * Process a chunk of requests\n   */\n  private async processBatchChunk(requests: BatchRequest[]): Promise<void> {\n    // Group requests by method and endpoint for potential batching\n    const groups = this.groupRequests(requests)\n    \n    for (const group of groups) {\n      if (group.length === 1) {\n        // Single request - execute directly\n        await this.executeSingleRequest(group[0])\n      } else {\n        // Multiple requests - could potentially batch at API level\n        await this.executeRequestGroup(group)\n      }\n    }\n  }\n\n  /**\n   * Execute a single request\n   */\n  private async executeSingleRequest(request: BatchRequest): Promise<void> {\n    try {\n      \n      let response: any\n      if (request.method === 'GET') {\n        response = await api.get(request.endpoint, { params: request.params })\n      } else {\n        response = await api.request({\n          method: request.method,\n          url: request.endpoint,\n          data: request.params\n        })\n      }\n\n      this.handleRequestSuccess(request, response.data)\n    } catch (error) {\n      this.handleRequestError(request, error)\n    }\n  }\n\n  /**\n   * Execute a group of similar requests\n   */\n  private async executeRequestGroup(requests: BatchRequest[]): Promise<void> {\n    \n    // For now, execute in parallel - could be optimized further\n    const promises = requests.map(request => this.executeSingleRequest(request))\n    await Promise.allSettled(promises)\n  }\n\n  /**\n   * Handle successful request\n   */\n  private handleRequestSuccess(request: BatchRequest, data: any): void {\n    const response: BatchResponse = {\n      id: request.id,\n      data,\n      cached: false,\n      timestamp: Date.now()\n    }\n\n    // Cache the response\n    if (this.config.cacheEnabled && request.ttl && request.ttl > 0) {\n      this.responseCache.set(request.id, response)\n      \n      // Set cache expiration\n      setTimeout(() => {\n        this.responseCache.delete(request.id)\n      }, request.ttl)\n    }\n\n    // Resolve pending promises\n    const pending = this.pendingRequests.get(request.id)\n    if (pending) {\n      pending.resolve(data)\n      this.pendingRequests.delete(request.id)\n    }\n  }\n\n  /**\n   * Handle failed request\n   */\n  private handleRequestError(request: BatchRequest, error: any): void {\n    \n    // Reject pending promises\n    const pending = this.pendingRequests.get(request.id)\n    if (pending) {\n      pending.reject(error)\n      this.pendingRequests.delete(request.id)\n    }\n  }\n\n  /**\n   * Get cached response if available and not expired\n   */\n  private getCachedResponse(id: string): BatchResponse | null {\n    const cached = this.responseCache.get(id)\n    if (!cached) {\n      return null\n    }\n\n    // Check if cache is still valid (basic check)\n    const age = Date.now() - cached.timestamp\n    if (age > 300000) { // 5 minutes max age for safety\n      this.responseCache.delete(id)\n      return null\n    }\n\n    cached.cached = true\n    return cached\n  }\n\n  /**\n   * Generate unique request ID\n   */\n  private generateRequestId(request: Omit<BatchRequest, 'id'>): string {\n    const paramsStr = request.params ? JSON.stringify(request.params) : ''\n    return `${request.method}_${request.endpoint}_${paramsStr}`.replace(/[^a-zA-Z0-9_]/g, '_')\n  }\n\n  /**\n   * Group requests by similarity for potential batching\n   */\n  private groupRequests(requests: BatchRequest[]): BatchRequest[][] {\n    const groups: Map<string, BatchRequest[]> = new Map()\n    \n    requests.forEach(request => {\n      const key = `${request.method}_${request.endpoint}`\n      if (!groups.has(key)) {\n        groups.set(key, [])\n      }\n      groups.get(key)!.push(request)\n    })\n    \n    return Array.from(groups.values())\n  }\n\n  /**\n   * Split array into chunks\n   */\n  private chunkArray<T>(array: T[], size: number): T[][] {\n    const chunks: T[][] = []\n    for (let i = 0; i < array.length; i += size) {\n      chunks.push(array.slice(i, i + size))\n    }\n    return chunks\n  }\n\n  /**\n   * Clear cache\n   */\n  public clearCache(): void {\n    this.responseCache.clear()\n  }\n\n  /**\n   * Get cache statistics\n   */\n  public getCacheStats(): { size: number; entries: string[] } {\n    return {\n      size: this.responseCache.size,\n      entries: Array.from(this.responseCache.keys())\n    }\n  }\n}\n\n/**\n * Vue composable for using the batch request service\n */\nexport function useBatchRequests(config?: Partial<BatchConfig>) {\n  const batchService = new BatchRequestService(config)\n\n  return {\n    addRequest: (request: Omit<BatchRequest, 'id'>) => batchService.addRequest(request),\n    batchInitialization: () => batchService.batchInitialization(),\n    batchRealTimeUpdate: (nodeIds: string[]) => batchService.batchRealTimeUpdate(nodeIds),\n    clearCache: () => batchService.clearCache(),\n    getCacheStats: () => batchService.getCacheStats()\n  }\n}\n","/**\n * WebSocket Service\n * \n * Manages per-node WebSocket connections for real-time data updates.\n * Matches Allmon3's per-node WebSocket architecture.\n */\n\nexport interface WebSocketMessage {\n  node: string\n  timestamp: number\n  status?: string\n  cos_keyed?: number\n  tx_keyed?: number\n  cpu_temp?: string | null\n  cpu_up?: string | null\n  cpu_load?: string | null\n  ALERT?: string | null\n  WX?: string | null\n  DISK?: string | null\n  remote_nodes?: Array<{\n    node: string\n    info: string\n    ip: string\n    direction: string\n    elapsed: string\n    link: string\n    keyed: string\n    last_keyed: string\n    mode: string\n  }>\n  // Legacy fields for backward compatibility\n  xstat?: string\n  sawstat?: string\n  [key: string]: any\n}\n\nexport interface WebSocketConnectionState {\n  connected: boolean\n  connecting: boolean\n  error: string | null\n  reconnectAttempts: number\n  lastMessageTime: number\n}\n\ntype MessageHandler = (data: WebSocketMessage) => void\ntype ConnectionStateHandler = (state: WebSocketConnectionState) => void\n\nclass WebSocketService {\n  private connections: Map<string, WebSocket> = new Map()\n  private connectionStates: Map<string, WebSocketConnectionState> = new Map()\n  private messageHandlers: Map<string, Set<MessageHandler>> = new Map()\n  private stateHandlers: Map<string, Set<ConnectionStateHandler>> = new Map()\n  private reconnectTimers: Map<string, NodeJS.Timeout> = new Map()\n  private pingTimers: Map<string, NodeJS.Timeout> = new Map()\n  \n  private readonly MAX_RECONNECT_ATTEMPTS = 10\n  private readonly INITIAL_RECONNECT_DELAY = 1000 // 1 second\n  private readonly MAX_RECONNECT_DELAY = 30000 // 30 seconds\n  private readonly PING_INTERVAL = 30000 // 30 seconds\n  private readonly CONNECTION_TIMEOUT = 10000 // 10 seconds\n\n  /**\n   * Connect to a node's WebSocket server\n   */\n  async connectToNode(nodeId: string, wsUrl: string): Promise<void> {\n    // Disconnect if already connected\n    if (this.connections.has(nodeId)) {\n      this.disconnectFromNode(nodeId)\n    }\n\n    // Initialize connection state\n    this.connectionStates.set(nodeId, {\n      connected: false,\n      connecting: true,\n      error: null,\n      reconnectAttempts: 0,\n      lastMessageTime: 0\n    })\n    this.notifyStateChange(nodeId)\n\n    return new Promise((resolve, reject) => {\n      try {\n        const ws = new WebSocket(wsUrl)\n        let connectionTimeout: NodeJS.Timeout\n\n        // Set connection timeout\n        connectionTimeout = setTimeout(() => {\n          if (ws.readyState === WebSocket.CONNECTING) {\n            ws.close()\n            const error = 'Connection timeout'\n            this.updateConnectionState(nodeId, {\n              connected: false,\n              connecting: false,\n              error,\n              reconnectAttempts: this.connectionStates.get(nodeId)?.reconnectAttempts || 0,\n              lastMessageTime: 0\n            })\n            reject(new Error(error))\n          }\n        }, this.CONNECTION_TIMEOUT)\n\n        ws.onopen = () => {\n          clearTimeout(connectionTimeout)\n          this.connections.set(nodeId, ws)\n          this.updateConnectionState(nodeId, {\n            connected: true,\n            connecting: false,\n            error: null,\n            reconnectAttempts: 0,\n            lastMessageTime: Date.now()\n          })\n\n          // Start ping interval\n          this.startPing(nodeId)\n\n          // Send subscribe message\n          ws.send(JSON.stringify({ action: 'subscribe', node: nodeId }))\n\n          resolve()\n        }\n\n        ws.onmessage = (event) => {\n          try {\n            const data = JSON.parse(event.data) as WebSocketMessage\n            this.updateConnectionState(nodeId, {\n              ...this.connectionStates.get(nodeId)!,\n              lastMessageTime: Date.now()\n            })\n            this.notifyMessage(nodeId, data)\n          } catch (error) {\n            console.error(`Error parsing WebSocket message for node ${nodeId}:`, error)\n          }\n        }\n\n        ws.onerror = (error) => {\n          clearTimeout(connectionTimeout)\n          const errorMessage = `WebSocket error for node ${nodeId}`\n          console.error(errorMessage, error)\n          this.updateConnectionState(nodeId, {\n            ...this.connectionStates.get(nodeId)!,\n            connecting: false,\n            error: errorMessage\n          })\n          reject(new Error(errorMessage))\n        }\n\n        ws.onclose = (event) => {\n          clearTimeout(connectionTimeout)\n          this.stopPing(nodeId)\n          this.connections.delete(nodeId)\n\n          const state = this.connectionStates.get(nodeId)\n          if (state) {\n            this.updateConnectionState(nodeId, {\n              ...state,\n              connected: false,\n              connecting: false\n            })\n\n            // Attempt reconnection if not a clean close\n            if (event.code !== 1000 && state.reconnectAttempts < this.MAX_RECONNECT_ATTEMPTS) {\n              this.scheduleReconnect(nodeId, wsUrl)\n            } else if (state.reconnectAttempts >= this.MAX_RECONNECT_ATTEMPTS) {\n              this.updateConnectionState(nodeId, {\n                ...state,\n                error: 'Max reconnection attempts reached'\n              })\n            }\n          }\n        }\n\n      } catch (error) {\n        const errorMessage = `Failed to create WebSocket connection for node ${nodeId}`\n        console.error(errorMessage, error)\n        this.updateConnectionState(nodeId, {\n          connected: false,\n          connecting: false,\n          error: errorMessage,\n          reconnectAttempts: this.connectionStates.get(nodeId)?.reconnectAttempts || 0,\n          lastMessageTime: 0\n        })\n        reject(error)\n      }\n    })\n  }\n\n  /**\n   * Disconnect from a node's WebSocket server\n   */\n  disconnectFromNode(nodeId: string): void {\n    // Clear reconnect timer\n    const reconnectTimer = this.reconnectTimers.get(nodeId)\n    if (reconnectTimer) {\n      clearTimeout(reconnectTimer)\n      this.reconnectTimers.delete(nodeId)\n    }\n\n    // Stop ping\n    this.stopPing(nodeId)\n\n    // Close WebSocket connection\n    const ws = this.connections.get(nodeId)\n    if (ws) {\n      ws.close(1000, 'Client disconnect')\n      this.connections.delete(nodeId)\n    }\n\n    // Update state\n    this.connectionStates.delete(nodeId)\n    this.notifyStateChange(nodeId)\n  }\n\n  /**\n   * Subscribe to messages from a node\n   */\n  onNodeMessage(nodeId: string, handler: MessageHandler): () => void {\n    if (!this.messageHandlers.has(nodeId)) {\n      this.messageHandlers.set(nodeId, new Set())\n    }\n    this.messageHandlers.get(nodeId)!.add(handler)\n\n    // Return unsubscribe function\n    return () => {\n      const handlers = this.messageHandlers.get(nodeId)\n      if (handlers) {\n        handlers.delete(handler)\n        if (handlers.size === 0) {\n          this.messageHandlers.delete(nodeId)\n        }\n      }\n    }\n  }\n\n  /**\n   * Subscribe to connection state changes for a node\n   */\n  onNodeStateChange(nodeId: string, handler: ConnectionStateHandler): () => void {\n    if (!this.stateHandlers.has(nodeId)) {\n      this.stateHandlers.set(nodeId, new Set())\n    }\n    this.stateHandlers.get(nodeId)!.add(handler)\n\n    // Return unsubscribe function\n    return () => {\n      const handlers = this.stateHandlers.get(nodeId)\n      if (handlers) {\n        handlers.delete(handler)\n        if (handlers.size === 0) {\n          this.stateHandlers.delete(nodeId)\n        }\n      }\n    }\n  }\n\n  /**\n   * Check if a node is connected\n   */\n  isNodeConnected(nodeId: string): boolean {\n    const state = this.connectionStates.get(nodeId)\n    return state?.connected === true\n  }\n\n  /**\n   * Get connection state for a node\n   */\n  getNodeState(nodeId: string): WebSocketConnectionState | null {\n    return this.connectionStates.get(nodeId) || null\n  }\n\n  /**\n   * Get all connected node IDs\n   */\n  getAllConnectedNodes(): string[] {\n    return Array.from(this.connections.keys())\n  }\n\n  /**\n   * Disconnect from all nodes\n   */\n  disconnectAll(): void {\n    const nodeIds = Array.from(this.connections.keys())\n    nodeIds.forEach(nodeId => this.disconnectFromNode(nodeId))\n  }\n\n  /**\n   * Schedule reconnection attempt\n   */\n  private scheduleReconnect(nodeId: string, wsUrl: string): void {\n    const state = this.connectionStates.get(nodeId)\n    if (!state) return\n\n    const attempts = state.reconnectAttempts + 1\n    const delay = Math.min(\n      this.INITIAL_RECONNECT_DELAY * Math.pow(2, attempts - 1),\n      this.MAX_RECONNECT_DELAY\n    )\n\n    this.updateConnectionState(nodeId, {\n      ...state,\n      reconnectAttempts: attempts\n    })\n\n    const timer = setTimeout(() => {\n      this.reconnectTimers.delete(nodeId)\n      this.connectToNode(nodeId, wsUrl).catch(error => {\n        console.error(`Reconnection failed for node ${nodeId}:`, error)\n      })\n    }, delay)\n\n    this.reconnectTimers.set(nodeId, timer)\n  }\n\n  /**\n   * Start ping interval for a node\n   */\n  private startPing(nodeId: string): void {\n    this.stopPing(nodeId) // Clear any existing ping timer\n\n    const timer = setInterval(() => {\n      const ws = this.connections.get(nodeId)\n      if (ws && ws.readyState === WebSocket.OPEN) {\n        ws.send(JSON.stringify({ action: 'ping' }))\n      } else {\n        this.stopPing(nodeId)\n      }\n    }, this.PING_INTERVAL)\n\n    this.pingTimers.set(nodeId, timer)\n  }\n\n  /**\n   * Stop ping interval for a node\n   */\n  private stopPing(nodeId: string): void {\n    const timer = this.pingTimers.get(nodeId)\n    if (timer) {\n      clearInterval(timer)\n      this.pingTimers.delete(nodeId)\n    }\n  }\n\n  /**\n   * Update connection state and notify handlers\n   */\n  private updateConnectionState(nodeId: string, state: WebSocketConnectionState): void {\n    this.connectionStates.set(nodeId, state)\n    this.notifyStateChange(nodeId)\n  }\n\n  /**\n   * Notify message handlers\n   */\n  private notifyMessage(nodeId: string, data: WebSocketMessage): void {\n    const handlers = this.messageHandlers.get(nodeId)\n    if (handlers) {\n      handlers.forEach(handler => {\n        try {\n          handler(data)\n        } catch (error) {\n          console.error(`Error in message handler for node ${nodeId}:`, error)\n        }\n      })\n    }\n  }\n\n  /**\n   * Notify state change handlers\n   */\n  private notifyStateChange(nodeId: string): void {\n    const handlers = this.stateHandlers.get(nodeId)\n    const state = this.connectionStates.get(nodeId)\n    if (handlers && state) {\n      handlers.forEach(handler => {\n        try {\n          handler(state)\n        } catch (error) {\n          console.error(`Error in state handler for node ${nodeId}:`, error)\n        }\n      })\n    }\n  }\n}\n\n// Export singleton instance\nexport const webSocketService = new WebSocketService()\n\n","import { defineStore } from 'pinia'\nimport { ref, computed } from 'vue'\nimport { api, endpoints } from '@/utils/api'\nimport { useAstdbStore } from './astdb'\nimport { useBatchRequests } from '@/services/BatchRequestService'\nimport { webSocketService, type WebSocketMessage } from '@/services/WebSocketService'\nimport type { Node, ConnectedNode, NodeConfig, AstDbEntry, NodeActionType } from '@/types'\n\nexport const useRealTimeStore = defineStore('realTime', () => {\n  // State\n  const nodes = ref<Node[]>([])\n  const nodeConfig = ref<NodeConfig>({})\n  const astdbStore = useAstdbStore()\n  const isConnected = ref(false)\n  const error = ref<string | null>(null)\n  const monitoringNodes = ref<string[]>([])\n  const lastUpdateTime = ref<number>(0)\n  const websocketPorts = ref<Record<string, number>>({})\n\n  // Services\n  const { batchInitialization, clearCache } = useBatchRequests({\n    maxBatchSize: 5,\n    batchDelay: 25,\n    cacheEnabled: true,\n    defaultCacheTTL: 5000\n  })\n\n  // WebSocket message handlers per node\n  const messageHandlers = new Map<string, () => void>()\n  const stateHandlers = new Map<string, () => void>()\n\n  // Computed\n  const isMonitoring = computed(() => monitoringNodes.value.length > 0)\n\n  // Actions\n  const initialize = async () => {\n    try {\n      const startTime = Date.now()\n      \n      // Use batch initialization for better performance\n      const batchResult = await batchInitialization()\n      \n      // Process nodes data - merge with existing nodes to preserve WebSocket updates\n      if (batchResult.nodes?.data) {\n        const rawNodes = batchResult.nodes.data || []\n        const newNodes = rawNodes.map((node: any) => {\n          // Header uses description only, not full format\n          // Full format (callsign + description + location) is used for connected nodes\n          const info = node.info || node.description || `Node ${node.node_number || node.id}`\n          return {\n            ...node,\n            info\n          }\n        })\n        \n        // Merge new nodes with existing nodes (preserve WebSocket-updated data)\n        newNodes.forEach((newNode: Node) => {\n          const nodeId = String(newNode.id || newNode.node_number)\n          const existingIndex = nodes.value.findIndex(n => String(n.id) === nodeId)\n          \n          if (existingIndex > -1) {\n            // Merge: preserve WebSocket-updated real-time fields, update static fields from API\n            const existing = nodes.value[existingIndex]\n            nodes.value[existingIndex] = {\n              ...existing, // Start with existing (has WebSocket real-time data)\n              // Update static fields from API (callsign, description, location)\n              callsign: newNode.callsign || existing.callsign,\n              description: newNode.description || existing.description,\n              location: newNode.location || existing.location,\n              node_number: newNode.node_number || existing.node_number,\n              id: newNode.id || existing.id,\n              info: newNode.info || existing.info,\n              // Preserve real-time fields from WebSocket\n              connected_nodes: existing.connected_nodes || newNode.connected_nodes,\n              remote_nodes: existing.remote_nodes || newNode.remote_nodes,\n              status: existing.status || newNode.status,\n              is_online: existing.is_online !== undefined ? existing.is_online : newNode.is_online,\n              last_updated: existing.last_updated || newNode.last_updated\n            } as Node\n          } else {\n            // Add new node\n            nodes.value.push(newNode)\n          }\n        })\n        \n        // Remove nodes that are no longer in the API response (cleanup)\n        const newNodeIds = new Set(newNodes.map(n => String(n.id || n.node_number)))\n        nodes.value = nodes.value.filter(n => newNodeIds.has(String(n.id || n.node_number)))\n      }\n      \n      // Process configuration data\n      if (batchResult.config?.data?.config) {\n        nodeConfig.value = batchResult.config.data.config\n      }\n      \n      // Initialize ASTDB store (will use caching)\n      await astdbStore.initialize()\n      \n      // Fetch WebSocket port configuration for all nodes\n      await fetchWebSocketPorts()\n      \n      const duration = Date.now() - startTime\n      \n      error.value = null\n      lastUpdateTime.value = Date.now()\n    } catch (err) {\n      error.value = 'Failed to initialize real-time store'\n      console.error('Real-time store initialization error:', err)\n    }\n  }\n\n  /**\n   * Fetch WebSocket port configuration for all nodes\n   */\n  const fetchWebSocketPorts = async () => {\n    try {\n      const response = await api.get(endpoints.nodes.websocketPorts)\n      if (response.data.success && response.data.nodes) {\n        Object.keys(response.data.nodes).forEach(nodeId => {\n          websocketPorts.value[nodeId] = response.data.nodes[nodeId].port\n        })\n      }\n    } catch (err) {\n      console.error('Error fetching WebSocket ports:', err)\n    }\n  }\n\n  /**\n   * Get WebSocket URL for a node\n   */\n  const getWebSocketUrl = (nodeId: string): string => {\n    // Use the port from configuration or construct URL\n    const port = websocketPorts.value[nodeId]\n    if (port) {\n      // Construct WebSocket URL - Apache will proxy /supermon-ng/ws/{nodeId} to ws://localhost:{port}\n      const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:'\n      const host = window.location.host\n      return `${protocol}//${host}/supermon-ng/ws/${nodeId}`\n    }\n    \n    // Fallback: construct URL based on node index (if ports not loaded yet)\n    const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:'\n    const host = window.location.host\n    return `${protocol}//${host}/supermon-ng/ws/${nodeId}`\n  }\n\n  /**\n   * Start monitoring a node via WebSocket\n   */\n  const startMonitoring = async (nodeId: string) => {\n    if (!monitoringNodes.value.includes(nodeId)) {\n      monitoringNodes.value.push(nodeId)\n    }\n    \n    // If WebSocket ports not loaded, fetch them\n    if (Object.keys(websocketPorts.value).length === 0) {\n      await fetchWebSocketPorts()\n    }\n    \n    // Connect to node's WebSocket\n    try {\n      const wsUrl = getWebSocketUrl(nodeId)\n      \n      // Set up message handler\n      const unsubscribeMessage = webSocketService.onNodeMessage(nodeId, (data: WebSocketMessage) => {\n        updateNodeFromWebSocket(data)\n      })\n      messageHandlers.set(nodeId, unsubscribeMessage)\n      \n      // Set up state change handler\n      const unsubscribeState = webSocketService.onNodeStateChange(nodeId, (state) => {\n        if (state.connected) {\n          isConnected.value = true\n          error.value = null\n        } else if (state.error) {\n          error.value = `WebSocket error for node ${nodeId}: ${state.error}`\n        }\n      })\n      stateHandlers.set(nodeId, unsubscribeState)\n      \n      // Connect to WebSocket\n      await webSocketService.connectToNode(nodeId, wsUrl)\n      \n      isConnected.value = true\n      error.value = null\n    } catch (err) {\n      console.error(`Error connecting to WebSocket for node ${nodeId}:`, err)\n      error.value = `Failed to connect to node ${nodeId}`\n      // Keep node in monitoringNodes so we still poll AMI (fetchNodeData). Otherwise\n      // nodes with WebSocket failures never get status updates and stay \"offline\".\n    }\n  }\n\n  /**\n   * Stop monitoring a node\n   */\n  const stopMonitoring = (nodeId: string) => {\n    const index = monitoringNodes.value.indexOf(nodeId)\n    if (index > -1) {\n      monitoringNodes.value.splice(index, 1)\n    }\n    \n    // Disconnect WebSocket\n    webSocketService.disconnectFromNode(nodeId)\n    \n    // Clean up handlers\n    const messageUnsubscribe = messageHandlers.get(nodeId)\n    if (messageUnsubscribe) {\n      messageUnsubscribe()\n      messageHandlers.delete(nodeId)\n    }\n    \n    const stateUnsubscribe = stateHandlers.get(nodeId)\n    if (stateUnsubscribe) {\n      stateUnsubscribe()\n      stateHandlers.delete(nodeId)\n    }\n    \n    // Update connection status\n    if (monitoringNodes.value.length === 0) {\n      isConnected.value = false\n    }\n  }\n\n  /**\n   * Update node data from WebSocket message\n   * Handles structured JSON data from backend\n   */\n  const updateNodeFromWebSocket = (data: WebSocketMessage) => {\n    try {\n      const nodeId = String(data.node)\n      const existingNodeIndex = nodes.value.findIndex(n => String(n.id) === String(nodeId))\n      \n      // Map WebSocket data to Node structure (only update fields that are provided)\n      const nodeUpdate: Partial<Node> = {\n        status: data.status || 'online',\n        is_online: (data.status || 'online') === 'online',\n        is_keyed: (data.cos_keyed ?? 0) > 0 || (data.tx_keyed ?? 0) > 0,\n        last_updated: Date.now(),\n        updated_at: new Date().toISOString()\n      }\n      \n      // Only update these fields if they are provided (not null/undefined)\n      if (data.cos_keyed !== undefined && data.cos_keyed !== null) {\n        nodeUpdate.cos_keyed = data.cos_keyed\n      }\n      if (data.tx_keyed !== undefined && data.tx_keyed !== null) {\n        nodeUpdate.tx_keyed = data.tx_keyed\n      }\n      if (data.cpu_temp !== undefined && data.cpu_temp !== null) {\n        nodeUpdate.cpu_temp = data.cpu_temp\n      }\n      if (data.cpu_up !== undefined && data.cpu_up !== null) {\n        nodeUpdate.cpu_up = data.cpu_up\n      }\n      if (data.cpu_load !== undefined && data.cpu_load !== null) {\n        nodeUpdate.cpu_load = data.cpu_load\n      }\n      if (data.ALERT !== undefined && data.ALERT !== null) {\n        nodeUpdate.ALERT = data.ALERT\n      }\n      if (data.WX !== undefined && data.WX !== null) {\n        nodeUpdate.WX = data.WX\n      }\n      if (data.DISK !== undefined && data.DISK !== null) {\n        nodeUpdate.DISK = data.DISK\n      }\n      \n      // Process remote nodes if available (only update if provided)\n      if (data.remote_nodes && Array.isArray(data.remote_nodes)) {\n        // Convert remote nodes to connected_nodes format\n        const connectedNodes: ConnectedNode[] = data.remote_nodes.map((remote: any) => ({\n          node: String(remote.node || ''),\n          info: remote.info || `Node ${remote.node}`,\n          ip: remote.ip || '',\n          direction: remote.direction || '',\n          elapsed: remote.elapsed || '',\n          link: remote.link || 'UNKNOWN',\n          keyed: remote.keyed || 'n/a',\n          last_keyed: remote.last_keyed || '-1',\n          mode: remote.mode || 'Allstar'\n        }))\n        \n        nodeUpdate.connected_nodes = connectedNodes\n        nodeUpdate.remote_nodes = connectedNodes\n      }\n      // Note: If remote_nodes is not provided, we preserve existing connected_nodes\n      \n      if (existingNodeIndex > -1) {\n        // Update existing node - preserve all existing fields, only update provided ones\n        const existingNode = nodes.value[existingNodeIndex]\n        nodes.value[existingNodeIndex] = {\n          ...existingNode,\n          ...nodeUpdate\n        } as Node\n      } else {\n        // Add new node if it doesn't exist\n        // Try to get info from ASTDB\n        const astdbEntry = astdbStore.fullAstdb[nodeId]\n        let info = `Node ${nodeId}`\n        let callsign = 'N/A'\n        let description = 'Unknown'\n        let location = 'N/A'\n        \n        if (astdbEntry && Array.isArray(astdbEntry) && astdbEntry.length >= 4) {\n          callsign = astdbEntry[1] || 'N/A'\n          description = astdbEntry[2] || 'Unknown'\n          location = astdbEntry[3] || 'N/A'\n          info = `${callsign} ${description} ${location}`.trim()\n        }\n        \n        nodes.value.push({\n          id: parseInt(nodeId),\n          node_number: parseInt(nodeId),\n          callsign,\n          description,\n          location,\n          last_heard: null,\n          created_at: new Date().toISOString(),\n          info,\n          ...nodeUpdate\n        } as Node)\n      }\n      \n      lastUpdateTime.value = Date.now()\n    } catch (err) {\n      console.error('Error updating node from WebSocket:', err)\n    }\n  }\n\n  /**\n   * Fetch node data (for initial load or fallback)\n   */\n  const fetchNodeData = async () => {\n    try {\n      // If we're monitoring specific nodes, get AMI data for them\n      if (monitoringNodes.value.length > 0) {\n        const nodeParams = monitoringNodes.value.join(',')\n        const amiResponse = await api.get(`/nodes/ami/status?nodes=${encodeURIComponent(nodeParams)}`)\n        \n        if (amiResponse.data.success) {\n          const amiData = amiResponse.data.data\n          \n          // Update nodes with AMI data\n          Object.keys(amiData).forEach(nodeId => {\n            const amiNode = amiData[nodeId]\n            const existingNodeIndex = nodes.value.findIndex(n => String(n.id) === String(nodeId))\n            \n            if (existingNodeIndex > -1) {\n              // Update existing node with AMI data\n              nodes.value[existingNodeIndex] = {\n                ...nodes.value[existingNodeIndex],\n                status: amiNode.status,\n                cos_keyed: amiNode.cos_keyed,\n                tx_keyed: amiNode.tx_keyed,\n                cpu_temp: amiNode.cpu_temp,\n                cpu_up: amiNode.cpu_up,\n                cpu_load: amiNode.cpu_load,\n                ALERT: amiNode.ALERT,\n                WX: amiNode.WX,\n                DISK: amiNode.DISK,\n                remote_nodes: amiNode.remote_nodes,\n                info: amiNode.info\n              }\n            } else {\n              // Add new node with AMI data\n              nodes.value.push({\n                id: parseInt(nodeId),\n                node_number: parseInt(nodeId),\n                callsign: 'N/A',\n                description: amiNode.info,\n                location: 'N/A',\n                status: amiNode.status,\n                last_heard: null,\n                connected_nodes: amiNode.remote_nodes,\n                cos_keyed: amiNode.cos_keyed,\n                tx_keyed: amiNode.tx_keyed,\n                cpu_temp: amiNode.cpu_temp,\n                ALERT: amiNode.ALERT,\n                WX: amiNode.WX,\n                DISK: amiNode.DISK,\n                is_online: amiNode.status === 'online',\n                is_keyed: amiNode.cos_keyed > 0 || amiNode.tx_keyed > 0,\n                created_at: new Date().toISOString(),\n                updated_at: new Date().toISOString(),\n                info: amiNode.info,\n                remote_nodes: amiNode.remote_nodes\n              })\n            }\n          })\n        }\n      } else {\n        // If no specific nodes are being monitored, fetch basic node list\n        const response = await api.get('/nodes')\n        const rawNodes = response.data.data || []\n        \n        // Update nodes with basic data\n        nodes.value = rawNodes.map((node: any) => ({\n          ...node,\n          info: `${node.node_number || node.id} - ${node.description || 'Unknown'}`\n        }))\n      }\n      \n      error.value = null\n    } catch (err) {\n      // Suppress timeout errors for real-time data fetching\n      if (err.code !== 'ECONNABORTED') {\n        console.error('Error fetching node data:', err)\n        error.value = 'Failed to fetch node data'\n        isConnected.value = false\n      }\n    }\n  }\n\n  const getNodeById = (nodeId: string): Node | undefined => {\n    return nodes.value.find(n => String(n.id) === String(nodeId))\n  }\n\n  const getNodeInfo = (nodeId: string): string => {\n    const node = getNodeById(nodeId)\n    if (node) {\n      return node.info\n    }\n    \n    // Fallback to ASTDB using the optimized store\n    const astdbEntry = astdbStore.fullAstdb[nodeId]\n    if (astdbEntry && astdbEntry.length >= 4) {\n      return `${astdbEntry[1]} ${astdbEntry[2]} ${astdbEntry[3]}`\n    }\n    \n    return 'Node not in database'\n  }\n\n  const clearError = () => {\n    error.value = null\n  }\n\n  // Control functions\n  const connectNode = async (nodeId: string, perm: boolean = false) => {\n    try {\n      await api.post(endpoints.nodes.connect(nodeId), {\n        localnode: nodeId,\n        remotenode: nodeId,\n        perm\n      })\n    } catch (error) {\n      console.error('Connect error:', error)\n      throw error\n    }\n  }\n\n  const disconnectNode = async (nodeId: string) => {\n    try {\n      await api.post(endpoints.nodes.disconnect(nodeId), {\n        localnode: nodeId,\n        remotenode: nodeId\n      })\n    } catch (error) {\n      console.error('Disconnect error:', error)\n      throw error\n    }\n  }\n\n  const monitorNode = async (nodeId: string) => {\n    try {\n      await api.post(endpoints.nodes.monitor(nodeId), {\n        localnode: nodeId,\n        remotenode: nodeId\n      })\n    } catch (error) {\n      console.error('Monitor error:', error)\n      throw error\n    }\n  }\n\n  const permConnectNode = async (nodeId: string) => {\n    try {\n      await api.post(endpoints.nodes.connect(nodeId), {\n        localnode: nodeId,\n        remotenode: nodeId,\n        perm: true\n      })\n    } catch (error) {\n      console.error('Perm connect error:', error)\n      throw error\n    }\n  }\n\n  const localMonitorNode = async (nodeId: string) => {\n    try {\n      await api.post(endpoints.nodes.localMonitor(nodeId), {\n        localnode: nodeId,\n        remotenode: nodeId\n      })\n    } catch (error) {\n      console.error('Local monitor error:', error)\n      throw error\n    }\n  }\n\n  const monitorCmdNode = async (nodeId: string) => {\n    try {\n      await api.post(endpoints.nodes.monitor(nodeId), {\n        localnode: nodeId,\n        remotenode: nodeId\n      })\n    } catch (error) {\n      console.error('Monitor CMD error:', error)\n      throw error\n    }\n  }\n\n  const reset = () => {\n    // Disconnect all WebSocket connections\n    monitoringNodes.value.forEach(nodeId => {\n      stopMonitoring(nodeId)\n    })\n    \n    nodes.value = []\n    nodeConfig.value = {}\n    isConnected.value = false\n    error.value = null\n    monitoringNodes.value = []\n    websocketPorts.value = {}\n  }\n\n  return {\n    // State\n    nodes,\n    nodeConfig,\n    astdb: astdbStore.fullAstdb,\n    astdbStore,\n    isConnected,\n    error,\n    monitoringNodes,\n    lastUpdateTime,\n    websocketPorts,\n    \n    // Computed\n    isMonitoring,\n    \n    // Actions\n    initialize,\n    startMonitoring,\n    stopMonitoring,\n    fetchNodeData,\n    updateNodeFromWebSocket,\n    getNodeById,\n    getNodeInfo,\n    clearError,\n    connectNode,\n    disconnectNode,\n    monitorNode,\n    permConnectNode,\n    localMonitorNode,\n    monitorCmdNode,\n    reset,\n    \n    // Optimization features\n    clearCache\n  }\n})\n","/**\n * Sanitize HTML for safe use with v-html / innerHTML.\n * Allows tags and attributes used by ALERT, header, welcome message, node title, etc.\n */\nimport DOMPurify from 'dompurify'\n\nexport function sanitizeHtml(html: string | null | undefined): string {\n  if (html == null || typeof html !== 'string') return ''\n  return DOMPurify.sanitize(html, {\n    ALLOWED_TAGS: ['span', 'a', 'b', 'u', 'br', 'div', 'i'],\n    ALLOWED_ATTR: ['href', 'target', 'style', 'class', 'data-node-id'],\n  })\n}\n","<template>\n  <div v-if=\"open\" class=\"modal-overlay\" @click=\"closeModal\">\n    <div class=\"modal-content\" @click.stop>\n      <!-- Modal Header -->\n      <div class=\"modal-header\">\n        <h3>Bubble Chart</h3>\n        <button class=\"close-button\" @click=\"closeModal\">&times;</button>\n      </div>\n\n      <!-- Modal Body -->\n      <div class=\"modal-body\">\n        <!-- Node Input Form - only show if no localNode prop -->\n        <div v-if=\"!props.localNode\" class=\"form-group\">\n          <label for=\"nodeInput\">Node Number:</label>\n          <input\n            id=\"nodeInput\"\n            v-model=\"nodeInput\"\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"Enter node number (e.g., 546051)\"\n            @keyup.enter=\"openBubbleChart\"\n          />\n        </div>\n        \n        <!-- Show node info when localNode is provided -->\n        <div v-if=\"props.localNode\" class=\"form-group\">\n          <label>Node Number:</label>\n          <div class=\"node-display\">{{ props.localNode }}</div>\n        </div>\n\n        <!-- Status Messages -->\n        <div v-if=\"loading\" class=\"status-message loading\">\n          <i class=\"fas fa-spinner fa-spin\"></i> Loading...\n        </div>\n        \n        <div v-if=\"error\" class=\"status-message error\">\n          <i class=\"fas fa-exclamation-triangle\"></i> {{ error }}\n        </div>\n\n        <div v-if=\"success\" class=\"status-message success\">\n          <i class=\"fas fa-check-circle\"></i> {{ success }}\n        </div>\n\n        <!-- Bubble Chart Display -->\n        <div v-if=\"bubbleChartUrl\" class=\"bubble-chart-container\">\n          <div class=\"bubble-chart-header\">\n            <h4>Bubble Chart for Node {{ nodeInput }}</h4>\n            <div class=\"bubble-chart-actions\">\n              <button class=\"copy-button\" @click=\"copyToClipboard\">\n                <i class=\"fas fa-copy\"></i> Copy URL\n              </button>\n              <button class=\"btn btn-secondary btn-sm\" @click=\"openInNewWindow\">\n                <i class=\"fas fa-external-link-alt\"></i> Open in New Window\n              </button>\n            </div>\n          </div>\n          <div class=\"bubble-chart-iframe-container\">\n            <iframe \n              :src=\"bubbleChartUrl\" \n              class=\"bubble-chart-iframe\"\n              title=\"Bubble Chart\"\n              frameborder=\"0\"\n            ></iframe>\n          </div>\n        </div>\n      </div>\n\n      <!-- Modal Footer -->\n      <div class=\"modal-footer\">\n        <button class=\"btn btn-secondary\" @click=\"closeModal\">\n          Close\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch, onMounted } from 'vue'\nimport api from '@/utils/api'\n\nonMounted(() => {\n  // If the component is mounted with open=true and localNode, automatically generate the chart\n  if (props.open && props.localNode) {\n    nodeInput.value = props.localNode\n    openBubbleChart()\n  }\n})\n\n// Props\nconst props = defineProps({\n  open: {\n    type: Boolean,\n    default: false\n  },\n  localNode: {\n    type: String,\n    default: ''\n  }\n})\n\n// Emits\nconst emit = defineEmits(['update:open'])\n\n// Reactive data\nconst nodeInput = ref('')\nconst loading = ref(false)\nconst error = ref('')\nconst success = ref('')\nconst bubbleChartUrl = ref('')\n\n// Methods\nconst closeModal = () => {\n  emit('update:open', false)\n  resetState()\n}\n\nconst resetState = () => {\n  nodeInput.value = ''\n  loading.value = false\n  error.value = ''\n  success.value = ''\n  bubbleChartUrl.value = ''\n}\n\nconst openBubbleChart = async () => {\n  if (!nodeInput.value || !String(nodeInput.value).trim()) {\n    error.value = 'Please enter a node number'\n    return\n  }\n\n  loading.value = true\n  error.value = ''\n  success.value = ''\n  bubbleChartUrl.value = ''\n\n  try {\n    const response = await api.post('/config/bubblechart', {\n      node: String(nodeInput.value).trim(),\n      localNode: props.localNode || ''\n    })\n\n    if (response.data.success) {\n      bubbleChartUrl.value = response.data.statsUrl\n      success.value = response.data.message || 'Bubble chart URL generated successfully'\n    } else {\n      error.value = response.data.message || 'Failed to generate bubble chart URL'\n    }\n  } catch (err) {\n    console.error('Bubble chart error:', err)\n    if (err.response?.data?.message) {\n      error.value = err.response.data.message\n    } else {\n      error.value = 'Failed to generate bubble chart URL. Please try again.'\n    }\n  } finally {\n    loading.value = false\n  }\n}\n\nconst copyToClipboard = async () => {\n  if (!bubbleChartUrl.value) return\n\n  try {\n    await navigator.clipboard.writeText(bubbleChartUrl.value)\n    success.value = 'URL copied to clipboard!'\n    setTimeout(() => {\n      success.value = ''\n    }, 2000)\n  } catch (err) {\n    console.error('Copy to clipboard failed:', err)\n    error.value = 'Failed to copy URL to clipboard'\n  }\n}\n\nconst openInNewWindow = () => {\n  if (!bubbleChartUrl.value) return\n  window.open(bubbleChartUrl.value, 'BubbleChart', 'status=no,location=no,toolbar=no,width=1200,height=800,left=100,top=100')\n}\n\n// Watch for modal open/close\nwatch(() => props.open, (newValue) => {\n  if (newValue) {\n    // When modal opens, pre-fill with local node if available\n    if (props.localNode) {\n      nodeInput.value = props.localNode\n      // Automatically generate the chart for the local node\n      openBubbleChart()\n    }\n  } else {\n    resetState()\n  }\n})\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);\n  width: 95%;\n  max-width: 1200px;\n  max-height: 90vh;\n  overflow-y: auto;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #e0e0e0;\n  background: #f8f9fa;\n  border-radius: 8px 8px 0 0;\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: #333;\n  font-size: 1.25rem;\n}\n\n.close-button {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  cursor: pointer;\n  color: #666;\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  transition: background-color 0.2s;\n}\n\n.close-button:hover {\n  background-color: #e0e0e0;\n  color: #333;\n}\n\n.modal-body {\n  padding: 20px;\n}\n\n.form-group {\n  margin-bottom: 20px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 600;\n  color: #333;\n}\n\n.form-control {\n  width: 100%;\n  padding: 12px;\n  border: 2px solid #ddd;\n  border-radius: 6px;\n  font-size: 1rem;\n  transition: border-color 0.2s;\n  box-sizing: border-box;\n}\n\n.form-control:focus {\n  outline: none;\n  border-color: #007bff;\n  box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);\n}\n\n.node-display {\n  padding: 12px;\n  background-color: #f8f9fa;\n  border: 2px solid #e9ecef;\n  border-radius: 6px;\n  font-size: 1rem;\n  font-weight: bold;\n  color: #495057;\n}\n\n.status-message {\n  padding: 12px;\n  border-radius: 6px;\n  margin-bottom: 15px;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.status-message.loading {\n  background-color: #e3f2fd;\n  color: #1976d2;\n  border: 1px solid #bbdefb;\n}\n\n.status-message.error {\n  background-color: #ffebee;\n  color: #c62828;\n  border: 1px solid #ffcdd2;\n}\n\n.status-message.success {\n  background-color: #e8f5e8;\n  color: #2e7d32;\n  border: 1px solid #c8e6c9;\n}\n\n.bubble-chart-info {\n  margin-top: 20px;\n  padding: 15px;\n  background-color: #f8f9fa;\n  border-radius: 6px;\n  border: 1px solid #e9ecef;\n}\n\n.bubble-chart-info h4 {\n  margin: 0 0 10px 0;\n  color: #333;\n  font-size: 1.1rem;\n}\n\n.url-display {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-bottom: 10px;\n  flex-wrap: wrap;\n}\n\n.url-display code {\n  flex: 1;\n  min-width: 200px;\n  padding: 8px 12px;\n  background-color: #f1f3f4;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  font-family: 'Courier New', monospace;\n  font-size: 0.9rem;\n  word-break: break-all;\n}\n\n.copy-button {\n  background-color: #6c757d;\n  color: white;\n  border: none;\n  padding: 8px 12px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  transition: background-color 0.2s;\n  white-space: nowrap;\n}\n\n.copy-button:hover {\n  background-color: #5a6268;\n}\n\n.url-description {\n  margin: 0;\n  color: #666;\n  font-size: 0.9rem;\n  line-height: 1.4;\n}\n\n.modal-footer {\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  padding: 20px;\n  border-top: 1px solid #e0e0e0;\n  background: #f8f9fa;\n  border-radius: 0 0 8px 8px;\n}\n\n.btn {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 6px;\n  cursor: pointer;\n  font-size: 1rem;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.2s;\n}\n\n.btn:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.btn-primary {\n  background-color: #007bff;\n  color: white;\n}\n\n.btn-primary:hover:not(:disabled) {\n  background-color: #0056b3;\n}\n\n.btn-secondary {\n  background-color: #6c757d;\n  color: white;\n}\n\n.btn-secondary:hover {\n  background-color: #5a6268;\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .modal-content {\n    width: 95%;\n    margin: 10px;\n  }\n  \n  .url-display {\n    flex-direction: column;\n    align-items: stretch;\n  }\n  \n  .url-display code {\n    min-width: auto;\n  }\n  \n  .modal-footer {\n    flex-direction: column;\n  }\n  \n  .btn {\n    width: 100%;\n    justify-content: center;\n  }\n}\n\n/* Bubble Chart Container Styles */\n.bubble-chart-container {\n  margin-top: 20px;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.bubble-chart-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px;\n  background: #f8f9fa;\n  border-bottom: 1px solid #e0e0e0;\n}\n\n.bubble-chart-header h4 {\n  margin: 0;\n  color: #333;\n  font-size: 1.1rem;\n}\n\n.bubble-chart-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.bubble-chart-actions .copy-button {\n  background: #6c757d;\n  color: white;\n  border: none;\n  padding: 6px 12px;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.875rem;\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  transition: background-color 0.2s;\n}\n\n.bubble-chart-actions .copy-button:hover {\n  background: #5a6268;\n}\n\n.bubble-chart-iframe-container {\n  position: relative;\n  width: 100%;\n  height: 600px;\n  background: #f8f9fa;\n}\n\n.bubble-chart-iframe {\n  width: 100%;\n  height: 100%;\n  border: none;\n  background: white;\n}\n\n@media (max-width: 768px) {\n  .bubble-chart-header {\n    flex-direction: column;\n    gap: 10px;\n    align-items: stretch;\n  }\n  \n  .bubble-chart-actions {\n    justify-content: center;\n  }\n  \n  .bubble-chart-iframe-container {\n    height: 400px;\n  }\n}\n</style>\n","<template>\n  <div v-if=\"isVisible\" class=\"modal-overlay\" @click=\"closeModal\">\n    <div class=\"modal-content\" @click.stop>\n      <div class=\"modal-header\">\n        <h3>lsnod Output for Node {{ nodeId }}</h3>\n        <button class=\"close-button\" @click=\"closeModal\">&times;</button>\n      </div>\n      \n      <div class=\"modal-body\">\n        <div v-if=\"loading\" class=\"loading\">\n          <p>Loading lsnod data...</p>\n        </div>\n        \n        <div v-else-if=\"error\" class=\"error\">\n          <h4>Error</h4>\n          <p>{{ error }}</p>\n        </div>\n        \n        <div v-else-if=\"data\" class=\"lsnod-content\">\n          <!-- Header Information -->\n          <div class=\"header-info\">\n            <h2>Status for {{ getNodeCallsign() }} - Node {{ nodeId }}</h2>\n            <p>Last update {{ getCurrentTime() }}</p>\n            <p>My IP - {{ getMyIP() }}</p>\n            <p class=\"bubble-chart-link\">\n              <a :href=\"getBubbleChartUrl()\" target=\"_blank\">View this Node Graphically</a>\n            </p>\n          </div>\n\n          <!-- Main Content Tables -->\n          <div class=\"tables-container\">\n            <!-- Left Table: Selected system state -->\n            <div class=\"left-table\">\n              <table class=\"system-state-table\">\n                <tr>\n                  <td class=\"label\">Selected system state:</td>\n                  <td class=\"value\">{{ data.selected_system_state || '0' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Signal on input:</td>\n                  <td class=\"value\">{{ data.signal_on_input || 'NO' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">System:</td>\n                  <td class=\"value\">{{ data.system || 'ENABLED' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Parrot Mode:</td>\n                  <td class=\"value\">{{ data.parrot_mode || 'DISABLED' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Scheduler:</td>\n                  <td class=\"value\">{{ data.scheduler || 'ENABLED' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Tail Time:</td>\n                  <td class=\"value\">{{ data.tail_time || 'STANDARD' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Time out timer:</td>\n                  <td class=\"value\">{{ data.timeout_timer || 'ENABLED' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Incoming connections:</td>\n                  <td class=\"value\">{{ data.incoming_connections || 'ENABLED' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Time out timer state:</td>\n                  <td class=\"value\">{{ data.timeout_timer_state || 'RESET' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Time outs since system initialization:</td>\n                  <td class=\"value\">{{ data.timeouts_since_init || '0' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Identifier state:</td>\n                  <td class=\"value\">{{ data.identifier_state || 'CLEAN' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Kerchunks today:</td>\n                  <td class=\"value\">{{ data.kerchunks_today || '0' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Kerchunks since system initialization:</td>\n                  <td class=\"value\">{{ data.kerchunks_since_init || '0' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Keyups today:</td>\n                  <td class=\"value\">{{ data.keyups_today || '0' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Keyups since system initialization:</td>\n                  <td class=\"value\">{{ data.keyups_since_init || '0' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">DTMF commands today:</td>\n                  <td class=\"value\">{{ data.dtmf_commands_today || '0' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">DTMF commands since system initialization:</td>\n                  <td class=\"value\">{{ data.dtmf_commands_since_init || '0' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Last DTMF command executed:</td>\n                  <td class=\"value\">{{ data.last_dtmf_command || 'N/A' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">TX time today:</td>\n                  <td class=\"value\">{{ data.tx_time_today || '00:00:00:000' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">TX time since system initialization:</td>\n                  <td class=\"value\">{{ data.tx_time_since_init || '00:00:00:000' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Uptime:</td>\n                  <td class=\"value\">{{ data.uptime || '00:00:00' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Nodes currently connected to us:</td>\n                  <td class=\"value\">{{ data.nodes_connected || '0' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Autopatch:</td>\n                  <td class=\"value\">{{ data.autopatch || 'ENABLED' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Autopatch state:</td>\n                  <td class=\"value\">{{ data.autopatch_state || 'DOWN' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Autopatch called number:</td>\n                  <td class=\"value\">{{ data.autopatch_called_number || 'N/A' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">Reverse patch/IAXRPT connected:</td>\n                  <td class=\"value\">{{ data.reverse_patch || 'DOWN' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">User linking commands:</td>\n                  <td class=\"value\">{{ data.user_linking_commands || 'ENABLED' }}</td>\n                </tr>\n                <tr>\n                  <td class=\"label\">User functions:</td>\n                  <td class=\"value\">{{ data.user_functions || 'ENABLED' }}</td>\n                </tr>\n              </table>\n            </div>\n\n            <!-- Right Tables -->\n            <div class=\"right-tables\">\n              <!-- Node Information Table -->\n              <div class=\"node-info-table\">\n                <table class=\"info-table\">\n                  <thead>\n                    <tr class=\"header-row\">\n                      <th>Node</th>\n                      <th>Callsign</th>\n                      <th>Frequency</th>\n                      <th>Location</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <!-- Main node (first row) -->\n                    <tr v-if=\"data?.main_node\" class=\"data-row-1\">\n                      <td>{{ data.main_node.node_number }}</td>\n                      <td>{{ data.main_node.callsign }}</td>\n                      <td>{{ data.main_node.frequency }}</td>\n                      <td>{{ data.main_node.location }}</td>\n                    </tr>\n                    <!-- No additional connected nodes in this table - they are shown in the Connected Nodes Table below -->\n                  </tbody>\n                </table>\n              </div>\n\n              <!-- Connected Nodes Table -->\n              <div class=\"connected-nodes-table\">\n                <table class=\"info-table\">\n                  <thead>\n                    <tr class=\"header-row\">\n                      <th>Node</th>\n                      <th>Peer</th>\n                      <th>Reconnects</th>\n                      <th>Direction</th>\n                      <th>Connect Time</th>\n                      <th>Connect State</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <template v-if=\"data?.nodes && data.nodes.length > 0\">\n                      <tr v-for=\"(node, index) in data.nodes\" :key=\"node.node_number\" \n                          :class=\"getConnectionRowClass(index)\">\n                        <td>{{ node.node_number }}</td>\n                        <td>{{ node.peer_ip || 'N/A' }}</td>\n                        <td>{{ node.reconnects || 'N/A' }}</td>\n                        <td>{{ node.direction || 'N/A' }}</td>\n                        <td>{{ node.connect_time || 'N/A' }}</td>\n                        <td>{{ node.connect_state || 'Connected' }}</td>\n                      </tr>\n                    </template>\n                    <tr v-else class=\"data-row-3\">\n                      <td>No connections</td>\n                      <td>-</td>\n                      <td>-</td>\n                      <td>-</td>\n                      <td>-</td>\n                      <td>-</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n\n              <!-- Registry Table -->\n              <div class=\"registry-table\">\n                <table class=\"info-table\">\n                  <thead>\n                    <tr class=\"header-row\">\n                      <th>Host</th>\n                      <th>Username</th>\n                      <th>Perceived</th>\n                      <th>Refresh</th>\n                      <th>State</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <template v-if=\"data?.iax_registry && data.iax_registry.length > 0\">\n                      <tr v-for=\"(registration, index) in data.iax_registry\" :key=\"index\" \n                          :class=\"getRegistrationRowClass(index)\">\n                        <td>{{ registration.host || 'N/A' }}</td>\n                        <td>{{ registration.username || 'N/A' }}</td>\n                        <td>{{ registration.perceived || 'N/A' }}</td>\n                        <td>{{ registration.refresh || 'N/A' }}</td>\n                        <td>{{ registration.state || 'N/A' }}</td>\n                      </tr>\n                    </template>\n                    <tr v-else class=\"data-row-white\">\n                      <td>No registrations</td>\n                      <td>-</td>\n                      <td>-</td>\n                      <td>-</td>\n                      <td>-</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"modal-footer\">\n        <button class=\"btn btn-secondary\" @click=\"closeModal\">Close</button>\n      </div>\n    </div>\n    \n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, watch } from 'vue'\nimport { api } from '@/utils/api'\nimport type { AxiosErrorResponse } from '@/types/api'\n\ninterface LsnodData {\n  selected_system_state?: string\n  signal_on_input?: string\n  system?: string\n  parrot_mode?: string\n  scheduler?: string\n  tail_time?: string\n  timeout_timer?: string\n  incoming_connections?: string\n  timeout_timer_state?: string\n  timeouts_since_init?: string\n  identifier_state?: string\n  kerchunks_today?: string\n  kerchunks_since_init?: string\n  keyups_today?: string\n  keyups_since_init?: string\n  dtmf_commands_today?: string\n  dtmf_commands_since_init?: string\n  last_dtmf_command?: string\n  tx_time_today?: string\n  tx_time_since_init?: string\n  uptime?: string\n  nodes_connected?: string\n  autopatch?: string\n  autopatch_state?: string\n  autopatch_called_number?: string\n  reverse_patch?: string\n  user_linking_commands?: string\n  user_functions?: string\n  main_node?: {\n    node_number: string\n    callsign: string\n    frequency: string\n    location: string\n  }\n  nodes?: any[]\n  node_status?: any[]\n  node_lstatus?: any[]\n  iax_registry?: any[]\n  total_nodes?: number\n}\n\ninterface Props {\n  isVisible: boolean\n  nodeId: string\n}\n\nconst props = defineProps<Props>()\n\nconst emit = defineEmits<{\n  'update:isVisible': [value: boolean]\n}>()\n\n\nconst loading = ref(false)\nconst error = ref('')\nconst data = ref<LsnodData | null>(null)\n\nconst loadLsnodData = async () => {\n  if (!props.nodeId) return\n  \n  try {\n    loading.value = true\n    error.value = ''\n    \n    const response = await api.get(`/nodes/${props.nodeId}/lsnodes/web`)\n    \n    if (response.data.success) {\n      data.value = response.data.data\n    } else {\n      error.value = response.data.message || 'Failed to load lsnod data'\n    }\n  } catch (err: unknown) {\n    const axiosError = err as AxiosErrorResponse\n    console.error('Error loading lsnod data:', err)\n    error.value = axiosError.response?.data?.message || 'Failed to load lsnod data'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst closeModal = () => {\n  emit('update:isVisible', false)\n}\n\n// Watch for visibility changes and load data when modal opens\nwatch(() => props.isVisible, (newValue) => {\n  if (newValue && props.nodeId) {\n    loadLsnodData()\n  }\n}, { immediate: true })\n\n// Watch for nodeId changes\nwatch(() => props.nodeId, (newValue) => {\n  if (props.isVisible && newValue) {\n    loadLsnodData()\n  }\n})\n\n// Helper functions for display\nconst getNodeCallsign = () => {\n  // Get from main node data if available\n  if (data.value?.main_node) {\n    return data.value.main_node.callsign || 'Unknown'\n  }\n  return 'Unknown'\n}\n\nconst getNodeFrequency = () => {\n  // Get from main node data if available\n  if (data.value?.main_node) {\n    return data.value.main_node.frequency || 'Unknown'\n  }\n  return 'Unknown'\n}\n\nconst getNodeLocation = () => {\n  // Get from main node data if available\n  if (data.value?.main_node) {\n    return data.value.main_node.location || 'Unknown'\n  }\n  return 'Unknown'\n}\n\nconst getConnectedNode = () => {\n  // Get the first connected node from the data\n  if (data.value?.nodes && data.value.nodes.length > 0) {\n    return data.value.nodes[0].node_number || '0'\n  }\n  return '0'\n}\n\nconst getConnectTime = () => {\n  // Return a placeholder connect time\n  return '00:00:00:000'\n}\n\nconst getCurrentTime = () => {\n  const now = new Date()\n  return now.toLocaleDateString() + ' ' + now.toLocaleTimeString()\n}\n\nconst getMyIP = () => {\n  // Return a placeholder IP - this would need to be provided by the backend\n  return '127.0.0.1'\n}\n\nconst getBubbleChartUrl = () => {\n  return `https://stats.allstarlink.org/getstatus.cgi?${props.nodeId}`\n}\n\n\nconst getNodeRowClass = (index: number) => {\n  // Apply different row classes based on index to match original color scheme\n  const classes = ['data-row-1', 'data-row-2', 'data-row-3']\n  return classes[index % classes.length]\n}\n\nconst getConnectionRowClass = (index: number) => {\n  // Apply different row classes for connection table\n  const classes = ['data-row-1', 'data-row-2', 'data-row-3']\n  return classes[index % classes.length]\n}\n\nconst getRegistrationRowClass = (index: number) => {\n  // Apply different row classes for registration table\n  const classes = ['data-row-1', 'data-row-2', 'data-row-3']\n  return classes[index % classes.length]\n}\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.8);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background: #1a1a1a;\n  border-radius: 8px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6);\n  max-width: 95vw;\n  max-height: 95vh;\n  width: 1200px;\n  display: flex;\n  flex-direction: column;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px 20px;\n  border-bottom: 1px solid #333;\n  background: #2d2d2d;\n  border-radius: 8px 8px 0 0;\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: #e0e0e0;\n  font-size: 1.25rem;\n}\n\n.close-button {\n  background: none;\n  border: none;\n  font-size: 24px;\n  cursor: pointer;\n  color: #888;\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  transition: background-color 0.2s;\n}\n\n.close-button:hover {\n  background-color: #444;\n  color: #e0e0e0;\n}\n\n.modal-body {\n  padding: 20px;\n  overflow-y: auto;\n  flex: 1;\n  background: #1a1a1a;\n}\n\n.modal-footer {\n  padding: 15px 20px;\n  border-top: 1px solid #333;\n  display: flex;\n  justify-content: flex-end;\n  gap: 10px;\n  background: #2d2d2d;\n  border-radius: 0 0 8px 8px;\n}\n\n.btn {\n  padding: 8px 16px;\n  border: 1px solid #555;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  background: #333;\n  color: #e0e0e0;\n  transition: background-color 0.2s;\n}\n\n.btn:hover {\n  background-color: #444;\n}\n\n.btn-secondary {\n  background: #6c757d;\n  color: white;\n  border-color: #6c757d;\n}\n\n.btn-secondary:hover {\n  background: #5a6268;\n  border-color: #5a6268;\n}\n\n.loading {\n  text-align: center;\n  padding: 20px;\n  color: #e0e0e0;\n  font-size: 16px;\n}\n\n.error {\n  color: #ff6b6b;\n  padding: 20px;\n  background-color: #2d1b1b;\n  border: 1px solid #4a2c2c;\n  border-radius: 4px;\n}\n\n.lsnod-content {\n  color: #e0e0e0;\n}\n\n.header-info {\n  margin-bottom: 20px;\n}\n\n.header-info h2 {\n  margin: 0 0 10px 0;\n  color: #e0e0e0;\n  font-size: 1.5rem;\n}\n\n.header-info p {\n  margin: 5px 0;\n  color: #ccc;\n  font-size: 14px;\n}\n\n.bubble-chart-link a {\n  color: #4a9eff;\n  text-decoration: none;\n}\n\n.bubble-chart-link a:hover {\n  color: #6bb6ff;\n  text-decoration: underline;\n}\n\n.tables-container {\n  display: flex;\n  gap: 20px;\n}\n\n.left-table {\n  flex: 1;\n}\n\n.right-tables {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 15px;\n}\n\n.system-state-table {\n  width: 100%;\n  border-collapse: collapse;\n  background: #87ceeb; /* powderblue - matching original */\n  border: 1px solid #666;\n}\n\n/* Remove hover effects from system state table to make it static */\n.system-state-table tr:hover {\n  background-color: inherit !important;\n}\n\n.system-state-table tr {\n  border-bottom: 1px solid #666;\n}\n\n.system-state-table td {\n  padding: 8px 12px;\n  vertical-align: top;\n}\n\n.system-state-table .label {\n  font-weight: bold;\n  color: #000;\n  width: 60%;\n}\n\n.system-state-table .value {\n  color: #000;\n  width: 40%;\n}\n\n.info-table {\n  width: 100%;\n  border-collapse: collapse;\n  background: #1a1a1a;\n  border: 1px solid #666;\n}\n\n.info-table th {\n  background: #add8e6; /* lightblue - matching original */\n  color: #000;\n  border-bottom: 1px solid #000000;\n  padding: 8px 12px;\n  text-align: left;\n  font-weight: bold;\n  border: 1px solid #666;\n}\n\n.info-table td {\n  padding: 8px 12px;\n  border: 1px solid #666;\n  color: #000;\n}\n\n.header-row {\n  background: #add8e6 !important; /* lightblue - matching original */\n  color: #000 !important;\n}\n\n.data-row-1 {\n  background: #FF90AF !important; /* Exact original pink color */\n}\n\n.data-row-2 {\n  background: #90EE90 !important; /* lightgreen - matching original */\n}\n\n.data-row-3 {\n  background: #D3D3D3 !important; /* lightgray - matching original */\n}\n\n.data-row-white {\n  background: #00BFFF !important; /* lightblue background for registry table */\n}\n\n.node-info-table,\n.connected-nodes-table,\n.registry-table {\n  margin-bottom: 15px;\n}\n\n.node-info-table {\n  max-height: 400px;\n  overflow-y: auto;\n  border: 1px solid #666;\n}\n\n@media (max-width: 1024px) {\n  .tables-container {\n    flex-direction: column;\n  }\n  \n  .modal-content {\n    width: 95vw;\n    max-width: none;\n  }\n}\n\n@media (max-width: 768px) {\n  .modal-content {\n    width: 100vw;\n    height: 100vh;\n    max-height: 100vh;\n    border-radius: 0;\n  }\n  \n  .modal-header,\n  .modal-footer {\n    border-radius: 0;\n  }\n  \n  .system-state-table .label,\n  .system-state-table .value {\n    width: auto;\n    display: block;\n  }\n  \n  .system-state-table .label {\n    font-weight: bold;\n    margin-bottom: 2px;\n  }\n}\n\n</style>\n","<template>\n  <table :class=\"tableClass\" :id=\"`table_${node.id}`\">\n    <thead>\n      <tr>\n        <th :colspan=\"colspan\">\n          <i v-html=\"sanitizedNodeTitle\"></i>\n        </th>\n      </tr>\n      <tr>\n        <th>Node</th>\n        <th>Node Information</th>\n        <th v-if=\"showDetail\">Received</th>\n        <th>Link</th>\n        <th>Dir</th>\n        <th v-if=\"showDetail\">Connected</th>\n        <th>Mode</th>\n      </tr>\n    </thead>\n    <tbody>\n      <!-- Loading State -->\n      <tr v-if=\"!nodeData\">\n        <td :colspan=\"colspan\">   Waiting...</td>\n      </tr>\n      \n      <!-- Node Data -->\n      <template v-else>\n        <!-- Header Status Row -->\n        <tr :class=\"headerStatusClass\">\n          <td colspan=\"1\" align=\"center\" class=\"local-node-number\">{{ node.id }}</td>\n          <td :colspan=\"headerColspan\" align=\"center\">\n            <b>{{ headerStatusText }}<span v-html=\"sanitizedHeaderStatusDetails\"></span></b>\n          </td>\n          <td :colspan=\"headerColspan3\"></td>\n        </tr>\n        \n        <!-- Connected Nodes -->\n        <template v-if=\"connectedNodes && connectedNodes.length > 0\">\n          <tr \n            v-for=\"(connectedNode, index) in displayedConnectedNodes\" \n            :key=\"`${node.id}-${index}`\"\n            :class=\"getConnectedNodeClass(connectedNode, index)\"\n          >\n            <td \n              class=\"nodeNum\" \n              align=\"center\"\n              @click=\"handleNodeClick(connectedNode.node)\"\n              :title=\"`Click to set ${connectedNode.node} as target node`\"\n            >\n              {{ connectedNode.node }}\n            </td>\n            <td>{{ connectedNode.info || connectedNode.ip || 'Unknown' }}</td>\n            <td v-if=\"showDetail\" align=\"center\">\n              {{ formatLastKeyed(connectedNode.last_keyed, index) }}\n            </td>\n            <td align=\"center\">{{ connectedNode.link || 'n/a' }}</td>\n            <td align=\"center\">{{ connectedNode.direction || 'n/a' }}</td>\n            <td v-if=\"showDetail\" align=\"right\">\n              {{ formatElapsed(connectedNode.elapsed, index) }}\n            </td>\n            <td align=\"center\">{{ getModeText(connectedNode.mode) }}</td>\n          </tr>\n          \n          <!-- Node Count Summary -->\n          <tr v-if=\"showNodeCount && totalNodes > displayedNodes\">\n            <td colspan=\"2\">\n              {{ displayedNodes }} shown of {{ totalNodes }} nodes connected\n              <a href=\"#\" @click=\"scrollToTop\">^^^</a>\n            </td>\n            <td :colspan=\"showDetail ? 5 : 3\"></td>\n          </tr>\n        </template>\n        \n        <!-- No Connections -->\n        <tr v-else>\n          <td :colspan=\"colspan\">No Connections.</td>\n        </tr>\n      </template>\n    </tbody>\n  </table>\n  <br />\n  \n  <!-- Bubble Chart Modal -->\n  <BubbleChart \n    v-if=\"showBubbleChart\"\n    :open=\"showBubbleChart\"\n    :localNode=\"node.id\"\n    @update:open=\"showBubbleChart = $event\"\n  />\n  \n  <!-- Lsnod Modal -->\n  <LsnodModal \n    v-if=\"showLsnodModal\"\n    :isVisible=\"showLsnodModal\"\n    :nodeId=\"node.id\"\n    @update:isVisible=\"showLsnodModal = $event\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, ref, watchEffect, onMounted, onUnmounted } from 'vue'\nimport { useAppStore } from '@/stores/app'\nimport { sanitizeHtml } from '@/utils/sanitize'\nimport BubbleChart from './BubbleChart.vue'\nimport LsnodModal from './LsnodModal.vue'\nimport type { ConnectedNode, Node } from '@/types/node'\n\n// Timer state for real-time updates\nconst timerTick = ref(0)\nconst nodeTimers = ref<Map<string, { elapsedBase: number | null, elapsedTimestamp: number | null, lastKeyedBase: number | null, lastKeyedTimestamp: number | null }>>(new Map())\n\n// Emits\nconst emit = defineEmits<{\n  'node-click': [nodeId: string, localNodeId: string]\n}>()\n\n// Store\nconst appStore = useAppStore()\n\n// Props\ninterface Props {\n  node: {\n    id: string\n    info?: string\n    callsign?: string\n  }\n  showDetail?: boolean\n  astdb?: Record<string, any>\n  config?: Record<string, any>\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  showDetail: true,\n  astdb: () => ({}),\n  config: () => ({})\n})\n\n// Reactive state\nconst nodeData = ref<any>(null)\nconst connectedNodes = ref<any[]>([])\nconst totalNodes = ref(0)\nconst displayedNodes = ref(0)\nconst showBubbleChart = ref(false)\nconst showLsnodModal = ref(false)\n\n// Computed properties\nconst colspan = computed(() => props.showDetail ? 7 : 5)\n\nconst tableClass = computed(() => {\n  return props.showDetail ? 'gridtable' : 'gridtable-large'\n})\n\nconst nodeTitle = computed(() => {\n  const nodeId = props.node.id\n  let nodeInfo = props.node.info || 'Node not in database'\n  \n  // If nodeInfo is just \"Node X\", \"Node not in database\", or missing, try to get info from ASTDB\n  if (props.astdb && (!nodeInfo || nodeInfo === `Node ${nodeId}` || nodeInfo === 'Node not in database' || (nodeInfo.startsWith('Node ') && nodeInfo.trim() === `Node ${nodeId}`))) {\n    const astdbEntry = props.astdb[nodeId]\n    if (astdbEntry && Array.isArray(astdbEntry) && astdbEntry.length >= 4) {\n      const callsign = astdbEntry[1] || 'N/A'\n      const description = astdbEntry[2] || 'Unknown'\n      const location = astdbEntry[3] || 'N/A'\n      nodeInfo = `${callsign} ${description} ${location}`.trim()\n    }\n  }\n  \n  // Prepend callsign if available and not already in info (like in 4.0.9)\n  if (props.node.callsign && props.node.callsign !== 'N/A' && !nodeInfo.startsWith(props.node.callsign)) {\n    nodeInfo = `${props.node.callsign} ${nodeInfo}`.trim()\n  }\n  \n  // Check for custom URL\n  const customUrlKey = `URL_${nodeId}`\n  const customUrl = props.config ? (props.config as any)[customUrlKey] : null\n  \n  let infoDisplay = nodeInfo\n  let targetBlank = ''\n  \n  if (customUrl) {\n    let url = customUrl\n    if (url.endsWith('>')) {\n      url = url.slice(0, -1)\n      targetBlank = 'target=\"_blank\"'\n    }\n    infoDisplay = `<a href=\"${url}\" ${targetBlank}>${nodeInfo}</a>`\n  }\n  \n  // Determine base title and node link\n  const isPrivateOrHidden = nodeInfo === 'Node not in database' || \n    (props.config && props.config[nodeId]?.hideNodeURL === 1)\n  \n  const baseTitle = isPrivateOrHidden ? 'Private Node' : 'Node'\n  let nodeLink = nodeId\n  \n  if (isPrivateOrHidden) {\n    if (customUrl) {\n      let url = customUrl\n      if (url.endsWith('>')) url = url.slice(0, -1)\n      nodeLink = `<a href=\"${url}\" ${targetBlank}>${nodeId}</a>`\n    }\n  } else {\n    const allstarNodeUrl = parseInt(nodeId) >= 2000 \n      ? `http://stats.allstarlink.org/nodeinfo.cgi?node=${encodeURIComponent(nodeId)}`\n      : ''\n    \n    if (allstarNodeUrl) {\n      nodeLink = `<a href=\"${allstarNodeUrl}\" target=\"_blank\">${nodeId}</a>`\n    } else if (customUrl) {\n      let url = customUrl\n      if (url.endsWith('>')) url = url.slice(0, -1)\n      nodeLink = `<a href=\"${url}\" ${targetBlank}>${nodeId}</a>`\n    }\n  }\n  \n  // Add external links\n  const links: string[] = []\n  \n  // Add Bubble Chart and lsNodes links for the main node on the same line\n  const modalLinks = []\n  if (!isPrivateOrHidden && parseInt(nodeId) >= 2000) {\n    // Bubble Chart link - now opens modal instead of external site\n    modalLinks.push(`<a href=\"#\" class=\"bubble-chart-modal-link\" data-node-id=\"${nodeId}\">Bubble Chart</a>`)\n  }\n  modalLinks.push(`<a href=\"#\" class=\"lsnod-modal-link\" data-node-id=\"${nodeId}\">lsNodes</a>`)\n  \n  if (props.config && props.config[nodeId]?.listenlive) {\n    links.push(`<a href=\"${props.config[nodeId].listenlive}\" target=\"_blank\">Listen Live</a>`)\n  }\n  \n  if (props.config && props.config[nodeId]?.archive) {\n    links.push(`<a href=\"${props.config[nodeId].archive}\" target=\"_blank\">Archive</a>`)\n  }\n  \n  let title = `  ${baseTitle} ${nodeLink} => ${infoDisplay}  `\n  \n  // Add modal links on the same line with 4 spaces between them\n  if (modalLinks.length > 0) {\n    title += '<br>' + modalLinks.join('    ')\n  }\n  \n  if (links.length > 0) {\n    title += '<br>' + links.join('  ')\n  }\n  \n  return title\n})\n\nconst headerStatusClass = computed(() => {\n  if (!nodeData.value) return ''\n  \n  const cosKeyed = nodeData.value.cos_keyed || 0\n  const txKeyed = nodeData.value.tx_keyed || 0\n  \n  let statusClass = ''\n  \n  if (cosKeyed === 0) {\n    if (txKeyed === 0) statusClass = 'gColor' // Idle\n    else statusClass = 'tColor' // PTT-Keyed\n  } else {\n    if (txKeyed === 0) statusClass = 'lColor' // COS-Detected\n    else statusClass = 'bColor' // COS-Detected and PTT-Keyed (Full-Duplex)\n  }\n  \n\n  \n  return statusClass\n})\n\nconst headerStatusText = computed(() => {\n  if (!nodeData.value) return ''\n  \n  const cosKeyed = nodeData.value.cos_keyed || 0\n  const txKeyed = nodeData.value.tx_keyed || 0\n  \n  let statusText = ''\n  \n  if (cosKeyed === 0) {\n    if (txKeyed === 0) statusText = 'Idle'\n    else statusText = 'PTT-Keyed'\n  } else {\n    if (txKeyed === 0) statusText = 'COS-Detected'\n    else statusText = 'COS-Detected and PTT-Keyed (Full-Duplex)'\n  }\n  \n  // Apply the same text transformations as the original - only when cpu_temp exists\n  if (nodeData.value.cpu_temp) {\n    if (statusText === 'PTT-Keyed') statusText = 'PTT-KEYED'\n    if (statusText === 'COS-Detected') statusText = 'COS-DETECTED'\n    if (statusText === 'COS-Detected and PTT-Keyed (Full-Duplex)') statusText = 'COS-Detected and PTT-Keyed (Full Duplex)'\n  }\n  \n  return statusText\n})\n\nconst headerStatusDetails = computed(() => {\n  if (!nodeData.value) return ''\n  \n  // Original logic: only show details if cpu_temp exists\n  if (!nodeData.value.cpu_temp) return ''\n  \n  const details = []\n  \n  // Skywarn/Alert information (these contain HTML)\n  if (nodeData.value.ALERT) details.push(nodeData.value.ALERT)\n  if (nodeData.value.WX) details.push(nodeData.value.WX)\n  \n  // System information (plain text) - match original format exactly\n  const cpuInfo = `CPU=${nodeData.value.cpu_temp}`\n  if (nodeData.value.cpu_up) details.push(cpuInfo + ` - ${nodeData.value.cpu_up}`)\n  else details.push(cpuInfo)\n  \n  if (nodeData.value.cpu_load) details.push(nodeData.value.cpu_load)\n  if (nodeData.value.DISK) details.push(nodeData.value.DISK)\n  \n  return details.length > 0 ? details.join('<br>') : ''\n})\n\nconst sanitizedNodeTitle = computed(() => sanitizeHtml(nodeTitle.value))\nconst sanitizedHeaderStatusDetails = computed(() => sanitizeHtml(headerStatusDetails.value))\n\nconst headerColspan = computed(() => {\n  if (!nodeData.value) return 1\n  \n  const cosKeyed = nodeData.value.cos_keyed || 0\n  const txKeyed = nodeData.value.tx_keyed || 0\n  \n  // Original logic: when both COS and TX are keyed (both are 1), use colspan 2\n  if (cosKeyed === 1 && txKeyed === 1) return 2\n  return 1\n})\n\nconst headerColspan3 = computed(() => {\n  if (!nodeData.value) return 5\n  \n  const cosKeyed = nodeData.value.cos_keyed || 0\n  const txKeyed = nodeData.value.tx_keyed || 0\n  \n  // Original logic: when both COS and TX are keyed (both are 1), use colspan 4\n  if (cosKeyed === 1 && txKeyed === 1) return 4\n  return 5\n})\n\nconst displayedConnectedNodes = computed(() => {\n  if (!connectedNodes.value) return []\n  \n  // Filter out node 1 if it has no info\n  const filteredNodes = connectedNodes.value.filter(node => \n    node.node !== 1 || (node.info && node.info !== 'NO CONNECTION')\n  )\n  \n  // Apply display logic based on user preferences\nif (appStore.user?.preferences?.showAll) {\n  return filteredNodes\n} else {\n  const maxNodes = appStore.user?.preferences?.displayedNodes || 999\n  return filteredNodes.slice(0, maxNodes)\n}\n})\n\nconst showNodeCount = computed(() => {\n  return totalNodes.value > displayedNodes.value && totalNodes.value > 1\n})\n\n// Methods\nconst getConnectedNodeClass = (node: ConnectedNode, index: number): string => {\n  // First connected node gets lighter header color, others get darker gColor\n  let className = ''\n  \n  if (index === 0) {\n    if (node.keyed === 'yes') {\n      className = node.mode === 'R' ? 'rxkColor' : 'rColor'\n    } else if (node.mode === 'C') {\n      className = 'cColor'\n    } else if (node.mode === 'R') {\n      className = 'rxColor'\n    } else {\n      className = 'firstNodeColor' // Lighter color for first connected node when idle (different from gColor)\n    }\n  } else {\n    // Subsequent nodes get darker gColor (idle state)\n    className = 'gColor'\n  }\n  \n\n  \n  return className\n}\n\nconst getModeText = (mode: string): string => {\n  switch (mode) {\n    case 'R': return 'RX Only'\n    case 'T': return 'Transceive'\n    case 'C': return 'Connecting'\n    case 'Echolink': return 'Echolink'\n    case 'Local RX': return 'Local RX'\n    default: return mode || 'n/a'\n  }\n}\n\nconst scrollToTop = () => {\n  window.scrollTo(0, 0)\n}\n\nconst handleNodeClick = (nodeId: string) => {\n  // Emit event to parent component with both the clicked node and the local node (table owner)\n  emit('node-click', nodeId, props.node.id)\n}\n\nconst openBubbleChartModal = () => {\n  showBubbleChart.value = true\n}\n\nconst openLsnodModal = () => {\n  showLsnodModal.value = true\n}\n\n// Update node data from real-time store\nconst updateNodeData = (data: Node | null) => {\n  nodeData.value = data\n  \n  if (data && data.remote_nodes) {\n    connectedNodes.value = data.remote_nodes\n    totalNodes.value = connectedNodes.value.length\n    // Use user preferences for display count, fallback to 999\n    const maxDisplay = appStore.user?.preferences?.displayedNodes || 999\n    displayedNodes.value = Math.min(totalNodes.value, maxDisplay)\n    \n    // Update timer bases for real-time calculations\n    connectedNodes.value.forEach((node: ConnectedNode) => {\n      const nodeKey = `${props.node.id}-${node.node}`\n      \n      // Parse elapsed time - could be HH:MM:SS or seconds\n      let elapsedBase: number | null = null\n      let elapsedTimestamp: number | null = null\n      if (node.elapsed && node.elapsed !== 'N/A' && node.elapsed !== 'unknown' && node.elapsed !== '') {\n        // Try parsing as HH:MM:SS\n        const timeMatch = node.elapsed.match(/(\\d+):(\\d+):(\\d+)/)\n        if (timeMatch) {\n          const hours = parseInt(timeMatch[1])\n          const minutes = parseInt(timeMatch[2])\n          const seconds = parseInt(timeMatch[3])\n          elapsedBase = hours * 3600 + minutes * 60 + seconds\n          elapsedTimestamp = Date.now() // Store when we received this value\n        } else {\n          // Try parsing as seconds\n          const seconds = parseInt(node.elapsed)\n          if (!isNaN(seconds)) {\n            elapsedBase = seconds\n            elapsedTimestamp = Date.now() // Store when we received this value\n          }\n        }\n      }\n      \n      // Parse last_keyed - should be seconds since last keyed\n      let lastKeyedBase: number | null = null\n      let lastKeyedTimestamp: number | null = null\n      if (node.last_keyed && node.last_keyed !== '-1' && node.last_keyed !== 'N/A' && node.last_keyed !== 'n/a') {\n        const seconds = parseInt(node.last_keyed)\n        if (!isNaN(seconds) && seconds >= 0) {\n          lastKeyedBase = seconds\n          lastKeyedTimestamp = Date.now() // Store when we received this value\n        }\n      }\n      \n      // Update or create timer entry\n      nodeTimers.value.set(nodeKey, {\n        elapsedBase,\n        elapsedTimestamp,\n        lastKeyedBase,\n        lastKeyedTimestamp\n      })\n    })\n  } else {\n    connectedNodes.value = []\n    totalNodes.value = 0\n    displayedNodes.value = 0\n    // Clear timers when no nodes\n    nodeTimers.value.clear()\n  }\n}\n\n// Refresh data method for parent component\nconst refreshData = () => {\n  // This will be called by the parent when new data is available\n}\n\n// Watch for header status details changes\nwatchEffect(() => {\n  // Header status details have changed\n})\n\n// Format last keyed time with real-time updates\nconst formatLastKeyed = (lastKeyed: string | null | undefined, index: number): string => {\n  // Access timerTick to trigger reactivity\n  const _ = timerTick.value\n  \n  if (!lastKeyed || lastKeyed === 'N/A' || lastKeyed === 'n/a') {\n    return 'N/A'\n  }\n  \n  // If it's -1, return \"Never\"\n  if (lastKeyed === -1 || lastKeyed === '-1' || lastKeyed === '-1') {\n    return 'Never'\n  }\n  \n  // Get the connected node to find its timer\n  const connectedNode = connectedNodes.value[index]\n  if (!connectedNode) {\n    return 'N/A'\n  }\n  \n  const nodeKey = `${props.node.id}-${connectedNode.node}`\n  const timer = nodeTimers.value.get(nodeKey)\n  \n  // Calculate current seconds since last keyed\n  let currentSeconds: number | null = null\n  if (timer && timer.lastKeyedBase !== null && timer.lastKeyedTimestamp !== null) {\n    // Calculate elapsed time since we received the value\n    const elapsedSinceUpdate = Math.floor((Date.now() - timer.lastKeyedTimestamp) / 1000)\n    currentSeconds = timer.lastKeyedBase + elapsedSinceUpdate\n  } else {\n    // Fallback: try parsing the value directly\n    const numValue = parseInt(lastKeyed)\n    if (!isNaN(numValue) && numValue >= 0) {\n      currentSeconds = numValue\n    }\n  }\n  \n  if (currentSeconds !== null) {\n    // Convert seconds to HH:MM:SS format (matching original Supermon-ng)\n    const hours = Math.floor(currentSeconds / 3600)\n    const minutes = Math.floor((currentSeconds % 3600) / 60)\n    const seconds = currentSeconds % 60\n    \n    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`\n  }\n  \n  // If it's already a formatted string, return as is\n  return String(lastKeyed)\n}\n\n// Format elapsed time with real-time updates\nconst formatElapsed = (elapsed: string | null | undefined, index: number): string => {\n  // Access timerTick to trigger reactivity\n  const _ = timerTick.value\n  \n  if (!elapsed || elapsed === 'N/A' || elapsed === 'unknown' || elapsed === '') {\n    return 'N/A'\n  }\n  \n  // Get the connected node to find its timer\n  const connectedNode = connectedNodes.value[index]\n  if (!connectedNode) {\n    return 'N/A'\n  }\n  \n  const nodeKey = `${props.node.id}-${connectedNode.node}`\n  const timer = nodeTimers.value.get(nodeKey)\n  \n  // Calculate current elapsed time\n  let currentSeconds: number | null = null\n  if (timer && timer.elapsedBase !== null && timer.elapsedTimestamp !== null) {\n    // Calculate elapsed time since we received the value\n    // The backend sends the elapsed time since connection started\n    // So we add the time that has passed since we received the update\n    const elapsedSinceUpdate = Math.floor((Date.now() - timer.elapsedTimestamp) / 1000)\n    currentSeconds = timer.elapsedBase + elapsedSinceUpdate\n  } else {\n    // Try parsing the value directly\n    // Try parsing as HH:MM:SS\n    const timeMatch = elapsed.match(/(\\d+):(\\d+):(\\d+)/)\n    if (timeMatch) {\n      const hours = parseInt(timeMatch[1])\n      const minutes = parseInt(timeMatch[2])\n      const seconds = parseInt(timeMatch[3])\n      currentSeconds = hours * 3600 + minutes * 60 + seconds\n    } else {\n      // Try parsing as seconds\n      const seconds = parseInt(elapsed)\n      if (!isNaN(seconds)) {\n        currentSeconds = seconds\n      }\n    }\n  }\n  \n  if (currentSeconds !== null) {\n    // Convert seconds to HH:MM:SS format\n    const hours = Math.floor(currentSeconds / 3600)\n    const minutes = Math.floor((currentSeconds % 3600) / 60)\n    const secs = currentSeconds % 60\n    \n    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\n  }\n  \n  // If it's already a formatted string, return as is\n  return String(elapsed)\n}\n\n// Event handling for modal links\nconst handleModalLinkClick = (event: Event) => {\n  const target = event.target as HTMLElement\n  if (target.classList.contains('bubble-chart-modal-link')) {\n    event.preventDefault()\n    event.stopPropagation()\n    openBubbleChartModal()\n  } else if (target.classList.contains('lsnod-modal-link')) {\n    event.preventDefault()\n    event.stopPropagation()\n    openLsnodModal()\n  }\n}\n\n// Set up real-time timer updates\nlet timerInterval: ReturnType<typeof setInterval> | null = null\n\nonMounted(() => {\n  // Use a more specific selector to avoid conflicts\n  const tableElement = document.querySelector(`#table_${props.node.id}`)\n  if (tableElement) {\n    tableElement.addEventListener('click', handleModalLinkClick)\n  }\n  \n  // Start timer for real-time updates (update every second)\n  timerInterval = setInterval(() => {\n    timerTick.value = Date.now()\n  }, 1000)\n})\n\nonUnmounted(() => {\n  const tableElement = document.querySelector(`#table_${props.node.id}`)\n  if (tableElement) {\n    tableElement.removeEventListener('click', handleModalLinkClick)\n  }\n  \n  // Clear timer interval\n  if (timerInterval) {\n    clearInterval(timerInterval)\n    timerInterval = null\n  }\n  \n  // Clear timers\n  nodeTimers.value.clear()\n})\n\n// Expose methods for parent component\ndefineExpose({\n  updateNodeData,\n  refreshData\n})\n</script>\n\n<style scoped>\n.node-table-wrapper {\n  width: 100%;\n  margin-bottom: 20px;\n}\n\n/* Original Gridtable Styles */\n.gridtable {\n  font-family: verdana, arial, sans-serif;\n  font-size: 12px;\n  font-weight: bold;\n  color: var(--text-color);\n  padding: 4px;\n  border-collapse: collapse;\n  width: auto;\n  min-width: 50%;\n  max-width: 100%;\n  margin: 0 auto;\n  background: transparent;\n}\n\n/* Clickable node styling */\n.clickable-node {\n  cursor: pointer;\n  transition: background-color 0.2s ease;\n}\n\n.clickable-node:hover {\n  background-color: rgba(255, 255, 255, 0.1);\n  text-decoration: underline;\n}\n\n.gridtable-large {\n  font-family: verdana, arial, sans-serif;\n  font-size: 22px;\n  font-weight: bold;\n  color: var(--text-color);\n  padding: 4px;\n  border-collapse: collapse;\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n/* Node number cell - matches original Supermon-ng styling */\n.nodeNum {\n  color: var(--link-color);\n  text-decoration: none;\n  transition: color 0.3s ease;\n  cursor: pointer;\n  user-select: none;\n}\n\n.nodeNum:hover {\n  color: var(--link-hover);\n  font-weight: bold;\n}\n\n/* Header status details */\n.gridtable td b {\n  display: block;\n  white-space: normal;\n  word-wrap: break-word;\n  line-height: 1.3;\n}\n\n.gridtable td b span {\n  display: block;\n  margin-top: 0;\n  font-weight: normal;\n}\n\n/* Ensure proper centering for header status row */\n.gridtable tr.rColor td {\n  text-align: center;\n  vertical-align: middle;\n}\n\n/* Ensure proper centering for local node number in header status row */\n.gridtable tr.rColor td:first-child {\n  text-align: center !important;\n  vertical-align: middle !important;\n  line-height: normal !important;\n}\n\n/* Specific styling for local node number */\n.gridtable .local-node-number {\n  text-align: center !important;\n  vertical-align: middle !important;\n  line-height: normal !important;\n  height: 100% !important;\n  display: table-cell !important;\n}\n\n/* Center local node information column */\n.gridtable tr.rColor td:nth-child(2),\n.gridtable tr.cColor td:nth-child(2),\n.gridtable tr.tColor td:nth-child(2) {\n  text-align: center !important;\n}\n\n/* Force center all content in local node information column */\n.gridtable tr.rColor td:nth-child(2) *,\n.gridtable tr.cColor td:nth-child(2) *,\n.gridtable tr.tColor td:nth-child(2) * {\n  text-align: center !important;\n}\n\n/* Ultra-specific centering for local node info */\n.gridtable tr.rColor td:nth-child(2),\n.gridtable tr.cColor td:nth-child(2),\n.gridtable tr.tColor td:nth-child(2),\n.gridtable tr.rColor td:nth-child(2) b,\n.gridtable tr.cColor td:nth-child(2) b,\n.gridtable tr.tColor td:nth-child(2) b,\n.gridtable tr.rColor td:nth-child(2) span,\n.gridtable tr.cColor td:nth-child(2) span,\n.gridtable tr.tColor td:nth-child(2) span,\n.gridtable tr.rColor td:nth-child(2) i,\n.gridtable tr.cColor td:nth-child(2) i,\n.gridtable tr.tColor td:nth-child(2) i {\n  text-align: center !important;\n  display: block !important;\n}\n\n/* Local node table styling with custom theme support */\n.gridtable tr.rColor {\n  background-color: var(--local-node-header) !important;\n  color: var(--local-node-header-text) !important;\n}\n\n.gridtable tr.rColor td {\n  background-color: var(--local-node-header) !important;\n  color: var(--local-node-header-text) !important;\n  border-color: var(--local-node-border) !important;\n}\n\n.gridtable tr.cColor {\n  background-color: var(--local-node-bg) !important;\n  color: var(--local-node-text) !important;\n}\n\n.gridtable tr.cColor td {\n  background-color: var(--local-node-bg) !important;\n  color: var(--local-node-text) !important;\n  border-color: var(--local-node-border) !important;\n}\n\n/* Connected nodes table styling with custom theme support */\n.gridtable tr:not(.rColor):not(.cColor):not(.gColor):not(.tColor):not(.bColor):not(.lColor):not(.rxkColor):not(.firstNodeColor) {\n  background-color: var(--table-bg) !important;\n  color: var(--text-color) !important;\n}\n\n.gridtable tr:not(.rColor):not(.cColor):not(.gColor):not(.tColor):not(.bColor):not(.lColor):not(.rxkColor):not(.firstNodeColor) td {\n  background-color: var(--table-bg) !important;\n  color: var(--text-color) !important;\n  border-color: transparent !important;\n}\n\n\n.gridtable th {\n  padding: 2px 4px;\n  background-color: var(--table-header-bg);\n  color: var(--primary-color);\n  font-size: 12px;\n  text-align: center;\n  border-bottom: 1px solid #000000;\n}\n\n.gridtable td {\n  padding: 2px 4px;\n  background-color: var(--container-bg);\n  font-size: 11px;\n  line-height: 1.2;\n}\n\n/* Table row colors - matching original Supermon-ng with theme support */\n/* Removed duplicate rule - handled by status colors above */\n\n.gridtable tr.cColor td,\n.gridtable tr.cColor td a {\n  background-color: var(--local-node-bg) !important;\n  font-weight: bold;\n  color: var(--local-node-text) !important;\n  text-align: center !important;\n}\n\n/* Status colors for local node - dedicated COS/PTT theme colors */\n.gridtable tr.gColor td {\n  background-color: var(--status-idle) !important;\n  font-weight: bold;\n  color: var(--local-node-text) !important;\n}\n\n.gridtable tr.tColor td {\n  background-color: var(--status-ptt) !important;\n  font-weight: bold;\n  color: var(--background-color) !important;\n}\n\n.gridtable tr.bColor td {\n  background-color: var(--status-full-duplex) !important;\n  font-weight: bold;\n  color: var(--background-color) !important;\n}\n\n.gridtable tr.lColor td {\n  background-color: var(--status-cos) !important;\n  font-weight: bold;\n  color: var(--background-color) !important;\n}\n\n.gridtable tr.rxkColor td {\n  background-color: var(--status-receiving) !important;\n  font-weight: bold;\n  color: var(--background-color) !important;\n}\n\n.gridtable tr.firstNodeColor td {\n  background-color: var(--status-first-node) !important;\n  font-weight: bold;\n  color: var(--background-color) !important;\n}\n\n/* Always center Node Information column content */\n.gridtable td:nth-child(2) {\n  text-align: center !important;\n}\n\n\n/* Enable horizontal scrolling for tables on mobile to show all content */\n.node-table-wrapper {\n  overflow-x: auto;\n  -webkit-overflow-scrolling: touch;\n}\n</style>\n","<template>\n  <div class=\"login-form-container\">\n    <form @submit.prevent=\"handleLogin\" class=\"login-form\">\n      <div class=\"form-group\">\n        <label for=\"username\" class=\"form-label\">Username</label>\n        <div class=\"input-wrapper\">\n          <input\n            id=\"username\"\n            v-model=\"username\"\n            type=\"text\"\n            required\n            class=\"form-input\"\n            :class=\"{ 'error': usernameError }\"\n            placeholder=\"Enter your username\"\n            @input=\"clearUsernameError\"\n            @blur=\"validateUsername\"\n          />\n          <div class=\"input-icon\">\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path d=\"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2\"></path>\n              <circle cx=\"12\" cy=\"7\" r=\"4\"></circle>\n            </svg>\n          </div>\n        </div>\n        <span v-if=\"usernameError\" class=\"error-text\">{{ usernameError }}</span>\n      </div>\n      \n      <div class=\"form-group\">\n        <label for=\"password\" class=\"form-label\">Password</label>\n        <div class=\"input-wrapper\">\n          <input\n            id=\"password\"\n            v-model=\"password\"\n            :type=\"showPassword ? 'text' : 'password'\"\n            required\n            class=\"form-input\"\n            :class=\"{ 'error': passwordError }\"\n            placeholder=\"Enter your password\"\n            @input=\"clearPasswordError\"\n            @blur=\"validatePassword\"\n          />\n          <div class=\"input-icon\">\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\n              <circle cx=\"12\" cy=\"16\" r=\"1\"></circle>\n              <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\n            </svg>\n          </div>\n          <button \n            type=\"button\" \n            class=\"password-toggle\"\n            @click=\"togglePassword\"\n            :aria-label=\"showPassword ? 'Hide password' : 'Show password'\"\n          >\n            <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n              <path v-if=\"showPassword\" d=\"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24\"></path>\n              <path v-else d=\"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z\"></path>\n              <circle v-if=\"!showPassword\" cx=\"12\" cy=\"12\" r=\"3\"></circle>\n              <line v-if=\"showPassword\" x1=\"1\" y1=\"1\" x2=\"23\" y2=\"23\"></line>\n            </svg>\n          </button>\n        </div>\n        <span v-if=\"passwordError\" class=\"error-text\">{{ passwordError }}</span>\n      </div>\n      \n      <div v-if=\"error\" class=\"error-message\">\n        <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n          <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\n          <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\n          <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\n        </svg>\n        {{ error }}\n      </div>\n      \n      <div class=\"form-actions\">\n        <button \n          type=\"button\" \n          @click=\"$emit('login-cancel')\"\n          class=\"cancel-button\"\n        >\n          Cancel\n        </button>\n        <button \n          type=\"submit\" \n          class=\"login-button\"\n          :disabled=\"loading || !isFormValid\"\n          :class=\"{ 'loading': loading }\"\n        >\n          <span v-if=\"loading\" class=\"loading-spinner\"></span>\n          <span v-else>Sign In</span>\n        </button>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport { useAppStore } from '@/stores/app'\n\nconst emit = defineEmits<{\n  'login-success': []\n  'login-cancel': []\n}>()\n\nconst appStore = useAppStore()\n\nconst username = ref('')\nconst password = ref('')\nconst loading = ref(false)\nconst error = ref('')\nconst showPassword = ref(false)\nconst usernameError = ref('')\nconst passwordError = ref('')\n\nconst isFormValid = computed(() => {\n  return username.value.trim() && password.value.trim() && !usernameError.value && !passwordError.value\n})\n\nconst validateUsername = () => {\n  if (!username.value.trim()) {\n    usernameError.value = 'Username is required'\n  } else if (username.value.length < 2) {\n    usernameError.value = 'Username must be at least 2 characters'\n  } else {\n    usernameError.value = ''\n  }\n}\n\nconst validatePassword = () => {\n  if (!password.value.trim()) {\n    passwordError.value = 'Password is required'\n  } else if (password.value.length < 1) {\n    passwordError.value = 'Password is required'\n  } else {\n    passwordError.value = ''\n  }\n}\n\nconst clearUsernameError = () => {\n  if (usernameError.value) {\n    usernameError.value = ''\n  }\n}\n\nconst clearPasswordError = () => {\n  if (passwordError.value) {\n    passwordError.value = ''\n  }\n}\n\nconst togglePassword = () => {\n  showPassword.value = !showPassword.value\n}\n\nconst handleLogin = async () => {\n  // Validate form\n  validateUsername()\n  validatePassword()\n  \n  if (!isFormValid.value) {\n    return\n  }\n  \n  loading.value = true\n  error.value = ''\n  \n  try {\n    await appStore.login(username.value.trim(), password.value)\n    emit('login-success')\n  } catch (err: any) {\n    error.value = err.response?.data?.message || 'Login failed. Please check your credentials.'\n  } finally {\n    loading.value = false\n  }\n}\n</script>\n\n<style scoped>\n.login-form-container {\n  padding: 20px;\n}\n\n.login-form {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.form-group {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.form-label {\n  font-weight: 600;\n  color: var(--text-color);\n  font-size: 0.9rem;\n  text-transform: uppercase;\n  letter-spacing: 0.5px;\n}\n\n.input-wrapper {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.form-input {\n  width: 100%;\n  padding: 12px 44px 12px 44px;\n  border: 2px solid rgba(64, 64, 64, 0.5);\n  border-radius: 8px;\n  background: rgba(26, 26, 26, 0.8);\n  color: var(--text-color);\n  font-size: 16px;\n  transition: all 0.3s ease;\n}\n\n.form-input:focus {\n  outline: none;\n  border-color: var(--primary-color);\n  box-shadow: 0 0 0 3px rgba(224, 224, 224, 0.1);\n  background: rgba(26, 26, 26, 0.9);\n}\n\n.form-input.error {\n  border-color: var(--error-color);\n  box-shadow: 0 0 0 3px rgba(244, 67, 54, 0.1);\n}\n\n.form-input::placeholder {\n  color: #666;\n}\n\n.input-icon {\n  position: absolute;\n  left: 12px;\n  color: #666;\n  pointer-events: none;\n}\n\n.password-toggle {\n  position: absolute;\n  right: 12px;\n  background: none;\n  border: none;\n  color: #666;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 4px;\n  transition: color 0.3s ease;\n}\n\n.password-toggle:hover {\n  color: var(--primary-color);\n}\n\n.error-text {\n  color: var(--error-color);\n  font-size: 0.85rem;\n  margin-top: 4px;\n}\n\n.error-message {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: var(--error-color);\n  text-align: center;\n  padding: 12px;\n  background: rgba(244, 67, 54, 0.1);\n  border: 1px solid rgba(244, 67, 54, 0.3);\n  border-radius: 8px;\n  font-size: 0.9rem;\n}\n\n.form-actions {\n  display: flex;\n  gap: 12px;\n  justify-content: flex-end;\n  margin-top: 8px;\n}\n\n.cancel-button {\n  padding: 10px 20px;\n  background: rgba(64, 64, 64, 0.3);\n  border: 1px solid rgba(224, 224, 224, 0.2);\n  border-radius: 6px;\n  color: var(--text-color);\n  font-size: 14px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.3s ease;\n}\n\n.cancel-button:hover {\n  background: rgba(224, 224, 224, 0.1);\n  border-color: var(--text-color);\n}\n\n.login-button {\n  padding: 10px 20px;\n  background: linear-gradient(135deg, var(--primary-color) 0%, #d0d0d0 100%);\n  color: #1a1a1a;\n  border: none;\n  border-radius: 6px;\n  font-size: 14px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.login-button:hover:not(:disabled) {\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(224, 224, 224, 0.3);\n}\n\n.login-button:disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n  transform: none;\n}\n\n.login-button.loading {\n  cursor: wait;\n}\n\n.loading-spinner {\n  width: 16px;\n  height: 16px;\n  border: 2px solid transparent;\n  border-top: 2px solid #1a1a1a;\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n</style>\n\n\n","<template>\n  <div v-if=\"isVisible\" class=\"url-modal-overlay\" @click=\"closeModal\">\n    <div class=\"url-modal-content\" @click.stop>\n      <div class=\"url-modal-header\">\n        <h3>{{ title }}</h3>\n        <button class=\"url-modal-close\" @click=\"closeModal\">&times;</button>\n      </div>\n      <div class=\"url-modal-body\">\n        <iframe \n          v-if=\"url\" \n          :src=\"url\" \n          class=\"url-iframe\"\n          frameborder=\"0\"\n          allowfullscreen\n        ></iframe>\n        <div v-else class=\"url-loading\">\n          Loading...\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue'\n\ninterface Props {\n  isVisible: boolean\n  url?: string\n  title?: string\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  title: 'External Content'\n})\n\nconst emit = defineEmits<{\n  'update:isVisible': [value: boolean]\n}>()\n\nconst closeModal = () => {\n  emit('update:isVisible', false)\n}\n</script>\n\n<style scoped>\n.url-modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.8);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.url-modal-content {\n  background-color: var(--background-color);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  width: 90%;\n  max-width: 1200px;\n  height: 80%;\n  max-height: 800px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.url-modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 15px 20px;\n  border-bottom: 1px solid var(--border-color);\n  background-color: var(--container-bg);\n}\n\n.url-modal-header h3 {\n  margin: 0;\n  color: var(--text-color);\n  font-size: 18px;\n}\n\n.url-modal-close {\n  background: none;\n  border: none;\n  color: var(--text-color);\n  font-size: 24px;\n  cursor: pointer;\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 4px;\n  transition: background-color 0.3s ease;\n}\n\n.url-modal-close:hover {\n  background-color: var(--border-color);\n}\n\n.url-modal-body {\n  flex: 1;\n  overflow: hidden;\n  position: relative;\n}\n\n.url-iframe {\n  width: 100%;\n  height: 100%;\n  border: none;\n}\n\n.url-loading {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n  color: var(--text-color);\n  font-size: 16px;\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .url-modal-content {\n    width: 95%;\n    height: 90%;\n  }\n  \n  .url-modal-header {\n    padding: 10px 15px;\n  }\n  \n  .url-modal-header h3 {\n    font-size: 16px;\n  }\n}\n</style>\n","<template>\n  <div id=\"menu\" v-if=\"menuItems && Object.keys(menuItems).length > 0\">\n    <ul>\n      <!-- Main menu items (horizontal) - integrated directly -->\n      <li \n        v-for=\"item in (menuItems.mainItems || [])\" \n        :key=\"item.name\"\n      >\n        <a \n          href=\"#\"\n          @click=\"handleMenuClick(item, $event)\"\n        >\n          {{ item.name }}\n        </a>\n      </li>\n      \n      <!-- Dropdown menus for other systems -->\n      <li \n        v-for=\"(items, systemName) in getSystemMenus()\" \n        :key=\"systemName\"\n        class=\"dropdown\"\n      >\n        <a href=\"#\" class=\"dropbtn\">{{ systemName }}</a>\n        <div class=\"dropdown-content\">\n          <a \n            v-for=\"item in items\" \n            :key=\"item.name\"\n            href=\"#\"\n            @click=\"handleMenuClick(item, $event)\"\n          >\n            {{ item.name }}\n          </a>\n        </div>\n      </li>\n    </ul>\n  </div>\n  \n  <!-- URL Modal for external links -->\n  <UrlModal\n    v-model:isVisible=\"showUrlModal\"\n    :url=\"currentUrl\"\n    :title=\"currentUrlTitle\"\n  />\n  \n  <!-- Lsnod Modal for lsnod data -->\n  <LsnodModal\n    v-model:isVisible=\"showLsnodModal\"\n    :nodeId=\"currentLsnodNodeId\"\n  />\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted, watch } from 'vue'\nimport { api } from '@/utils/api'\nimport { useAppStore } from '@/stores/app'\nimport UrlModal from './UrlModal.vue'\nimport LsnodModal from './LsnodModal.vue'\n\ninterface MenuItem {\n  name: string\n  url: string\n  targetBlank: boolean\n}\n\ninterface MenuItems {\n  [systemName: string]: MenuItem[]\n}\n\nconst appStore = useAppStore()\nconst menuItems = ref<MenuItems>({})\nconst isLoading = ref(false)\n\n// URL Modal state\nconst showUrlModal = ref(false)\nconst currentUrl = ref('')\nconst currentUrlTitle = ref('')\n\n// Lsnod Modal state\nconst showLsnodModal = ref(false)\nconst currentLsnodNodeId = ref('')\n\nconst loadMenu = async () => {\n  try {\n    isLoading.value = true\n    const response = await api.get('/config/menu')\n    if (response.data.success) {\n      // Only update menu items if we got valid data\n      if (response.data.data && Object.keys(response.data.data).length > 0) {\n        menuItems.value = response.data.data\n      }\n    }\n  } catch (error) {\n    console.error('Failed to load menu:', error)\n  } finally {\n    isLoading.value = false\n  }\n}\n\nconst emit = defineEmits<{\n  nodeSelection: [nodeSelection: string]\n}>()\n\nconst handleMenuClick = (item: MenuItem, event: Event) => {\n  // Prevent default link behavior\n  event.preventDefault()\n  \n  // Handle internal navigation if needed\n  if (item.url.startsWith('link.php') || item.url.startsWith('voter.php')) {\n    // Parse node selection from URL\n    const urlParams = new URLSearchParams(item.url.split('?')[1])\n    const nodes = urlParams.get('nodes')\n    if (nodes) {\n      emit('nodeSelection', nodes)\n    }\n  } else if (item.url.startsWith('/lsnod/')) {\n    // Handle lsnod URLs - open in modal\n    const nodeId = item.url.replace('/lsnod/', '')\n    currentLsnodNodeId.value = nodeId\n    showLsnodModal.value = true\n  } else if (item.url.startsWith('http')) {\n    // External links - check if they should open in new tab or modal\n    if (item.targetBlank) {\n      // Open in new tab/window as intended\n      window.open(item.url, '_blank', 'noopener,noreferrer')\n    } else {\n      // Open in modal for internal dashboard experience\n      currentUrl.value = item.url\n      currentUrlTitle.value = item.name\n      showUrlModal.value = true\n    }\n  } else {\n    // For other internal links, just emit the nodeSelection if it's a node-related URL\n    // This handles cases where the URL might contain node information in other formats\n    if (item.url.includes('nodes=')) {\n      const urlParams = new URLSearchParams(item.url.split('?')[1])\n      const nodes = urlParams.get('nodes')\n      if (nodes) {\n        emit('nodeSelection', nodes)\n      }\n    }\n  }\n}\n\nconst getSystemMenus = () => {\n  const systemMenus: MenuItems = {}\n  for (const [key, value] of Object.entries(menuItems.value)) {\n    if (key !== 'mainItems') {\n      systemMenus[key] = value\n    }\n  }\n  return systemMenus\n}\n\nonMounted(() => {\n  loadMenu()\n})\n\n// Watch for authentication changes and reload menu with a small delay\nwatch(() => appStore.isAuthenticated, () => {\n  // Add a small delay to prevent menu flash when authentication state changes\n  setTimeout(() => {\n    loadMenu()\n  }, 100)\n})\n</script>\n\n<style scoped>\n#menu {\n  width: calc(100% + 40px); /* Match header width - extend beyond dashboard padding */\n  margin-left: -20px; /* Offset the dashboard padding */\n  margin-right: -20px; /* Offset the dashboard padding */\n  background-color: var(--menu-background, #2a2a2a);\n  border-radius: 5px;\n  margin-bottom: 20px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  /* Ensure dropdown overlays subsequent content */\n  position: relative;\n  z-index: 100;\n  /* Allow dropdown to extend beyond menu boundaries */\n  overflow: visible;\n  box-sizing: border-box;\n}\n\n#menu ul {\n  list-style: none;\n  margin: 0;\n  padding: 0;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n}\n\n#menu li {\n  margin: 0;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  align-items: center;\n}\n\n#menu li a,\n#menu li a:link,\n#menu li a:visited {\n  display: inline-block;\n  color: var(--text-color, #e0e0e0);\n  text-align: center;\n  padding: 8px 12px;\n  text-decoration: none;\n  border-radius: 5px;\n  transition: background-color 0.3s ease;\n  margin: 2px;\n}\n\n#menu li a:hover {\n  background-color: var(--border-color, rgba(64, 64, 64, 0.5));\n  color: var(--primary-color, #e0e0e0);\n}\n\n#menu li.dropdown {\n  position: relative;\n  display: block;\n  overflow: visible;\n}\n\n#menu .dropdown-content {\n  display: none;\n  position: absolute;\n  background-color: var(--container-bg, #2a2a2a);\n  min-width: 160px;\n  box-shadow: var(--shadow-lg, 0 10px 15px -3px rgba(0, 0, 0, 0.3));\n  border: 1px solid var(--border-color, #404040);\n  /* Lift dropdown above buttons/content below */\n  z-index: 999;\n  border-radius: 5px;\n  top: 100%;\n  left: 0;\n}\n\n#menu .dropdown-content a {\n  color: var(--text-color, #e0e0e0);\n  padding: 12px 16px;\n  text-decoration: none;\n  display: block;\n}\n\n#menu .dropdown-content a:hover {\n  background-color: var(--border-color, rgba(64, 64, 64, 0.5));\n  color: var(--primary-color, #e0e0e0);\n}\n\n#menu .dropdown:hover .dropdown-content {\n  display: block;\n}\n\n/* No responsive design - mobile displays exactly like desktop */\n\n/* Print Menu Styles */\n@media print {\n  #menu {\n    display: none;\n  }\n}\n</style>\n","<template>\n  <div class=\"dashboard\">\n    <!-- Header Section (mimics header.inc structure) -->\n    <div class=\"header\" :style=\"headerBackgroundUrl ? { backgroundImage: headerBackgroundUrl } : {}\">\n      <!-- Main Title -->\n      <div class=\"header-title\" :style=\"headerTitleStyle\">\n        <a href=\"#\"><i>{{ headerTitle }}</i></a>\n      </div>\n      \n      <!-- Call Sign -->\n      <div v-if=\"systemInfo?.callsign\" class=\"header-title2\" :style=\"callsignStyle\">\n        <a v-if=\"systemInfo?.myUrl\" :href=\"getCleanUrl(systemInfo.myUrl)\" :target=\"shouldOpenInNewTab(systemInfo.myUrl) ? '_blank' : '_self'\">\n          <i>{{ systemInfo.callsign }}</i>\n        </a>\n        <i v-else>{{ systemInfo.callsign }}</i>\n      </div>\n      \n      <!-- Location and Title -->\n      <div class=\"header-tag\">\n        <i v-html=\"sanitizeHtml(formatHeaderTag())\"></i>\n      </div>\n      \n\n      \n      <!-- Login/Logout positioning -->\n      <div v-if=\"!appStore.isAuthenticated\" class=\"header-login\">\n        <a href=\"#\" @click.prevent=\"showLoginModal = true\">Login</a>\n      </div>\n      <div v-else class=\"header-logout\">\n        <div class=\"header-logout2\">\n          <a href=\"#\" @click.prevent=\"handleLogout\">Logout {{ appStore.user?.name }}</a>\n        </div>\n      </div>\n      \n      <!-- Custom Logo (if configured) -->\n      <div v-if=\"systemInfo?.logoName\" class=\"custom-logo\" :style=\"customLogoStyle\">\n        <a v-if=\"systemInfo?.logoUrl\" :href=\"getCleanUrl(systemInfo.logoUrl)\" :target=\"shouldOpenInNewTab(systemInfo.logoUrl) ? '_blank' : '_self'\">\n          <img :src=\"`/supermon-ng/user_files/${systemInfo.logoName}`\" :style=\"{ width: systemInfo?.logoSize || '15%', border: '0px' }\" alt=\"Custom Logo\">\n        </a>\n        <img v-else :src=\"`/supermon-ng/user_files/${systemInfo.logoName}`\" :style=\"{ width: systemInfo?.logoSize || '15%', border: '0px' }\" alt=\"Custom Logo\">\n      </div>\n\n      <!-- AllStar Logo (default or if no custom logo) -->\n      <div v-if=\"!systemInfo?.logoName\" class=\"header-img\">\n        <a :href=\"systemInfo?.logoUrl ? getCleanUrl(systemInfo.logoUrl) : 'https://www.allstarlink.org'\" :target=\"systemInfo?.logoUrl ? (shouldOpenInNewTab(systemInfo.logoUrl) ? '_blank' : '_self') : '_blank'\">\n          <img src=\"/allstarlink.jpg\" width=\"70%\" style=\"border: 0px;\" alt=\"Allstar Logo\">\n        </a>\n      </div>\n    </div>\n\n    <!-- Menu Component -->\n    <Menu @node-selection=\"handleNodeSelection\" />\n\n    <!-- Date and Time Display -->\n    <div v-if=\"showDateTime\" class=\"datetime-display\">\n      {{ currentDateTime }}\n    </div>\n\n    <!-- Welcome Message -->\n    <div v-if=\"welcomeMessage\" class=\"welcome-message\" v-html=\"sanitizeHtml(welcomeMessage)\"></div>\n\n    <!-- Control Panel (matches original link.php structure exactly) -->\n    <div v-if=\"hasControlPermissions\" id=\"connect_form\" style=\"text-align: center;\">\n      <!-- Node Selection (matches original layout exactly) -->\n      <div v-if=\"displayedNodes.length > 0\">\n        <!-- Local node dropdown (only show if multiple nodes) -->\n        <select v-if=\"displayedNodes.length > 1\" v-model=\"selectedLocalNode\" class=\"submit\">\n          <option v-for=\"node in displayedNodes\" :key=\"String(node.id)\" :value=\"String(node.id)\" class=\"submit\">\n            {{ node.id }} => {{ (node as NodeType).info || (node as NodeType).description || 'Node not in database' }}\n          </option>\n        </select>\n        \n        <!-- Hidden input for single node -->\n        <input v-else-if=\"displayedNodes.length === 1\" type=\"hidden\" v-model=\"selectedLocalNode\">\n        \n        <!-- Hidden input for single node (matches original) -->\n        <input v-else class=\"submit\" type=\"hidden\" :value=\"displayedNodes[0]\">\n        \n        <!-- Node Input and Permission Controls -->\n        <input\n          v-model=\"targetNode\"\n          type=\"text\"\n          class=\"submit\"\n          placeholder=\"Node to connect/DTMF\"\n        />\n        \n        <label v-if=\"appStore.hasPermission('PERMUSER')\" class=\"perm-label\">\n          Perm <input type=\"checkbox\" v-model=\"permConnect\" />\n        </label>\n        <br>\n      </div>\n      \n      <!-- Primary Control Buttons (matches original order exactly) -->\n      <input type=\"button\" class=\"submit\" value=\"Connect\" @click=\"connect\">\n      <input type=\"button\" class=\"submit\" value=\"Disconnect\" @click=\"disconnect\">\n      <input v-if=\"appStore.hasPermission('MONUSER')\" type=\"button\" class=\"submit\" value=\"Monitor\" @click=\"monitor\">\n      <input v-if=\"appStore.hasPermission('LMONUSER')\" type=\"button\" class=\"submit\" value=\"Local Monitor\" @click=\"localmonitor\">\n      <input type=\"button\" class=\"submit\" value=\"Voter\" @click=\"showVoterModal = true\">\n      \n      <!-- Secondary Control Buttons (matches original order exactly) -->\n      <input v-if=\"appStore.hasPermission('DTMFUSER')\" type=\"button\" class=\"submit\" value=\"DTMF\" @click=\"dtmf\">\n      <input v-if=\"appStore.hasPermission('ASTLKUSER')\" type=\"button\" class=\"submit\" value=\"Lookup\" @click=\"astlookup\">\n      <input v-if=\"appStore.hasPermission('RSTATUSER')\" type=\"button\" class=\"submit\" value=\"Rpt Stats\" @click=\"rptstats\">\n      <input v-if=\"appStore.hasPermission('BUBLUSER')\" type=\"button\" class=\"submit\" value=\"Bubble\" @click=\"bubble\">\n      <input v-if=\"appStore.hasPermission('CTRLUSER')\" type=\"button\" class=\"submit\" value=\"Control Panel\" @click=\"showControlPanelModal = true\">\n      <input v-if=\"appStore.hasPermission('FAVUSER')\" type=\"button\" class=\"submit\" value=\"Favorites\" @click=\"showFavoritesModal = true\">\n      <input v-if=\"appStore.hasPermission('FAVUSER')\" type=\"button\" class=\"submit\" value=\"Add Favorite\" @click=\"showAddFavoriteModal = true\">\n      <input v-if=\"appStore.hasPermission('FAVUSER')\" type=\"button\" class=\"submit\" value=\"Delete Favorite\" @click=\"showDeleteFavoriteModal = true\">\n      \n      <!-- Configuration Editor Section -->\n      <hr class=\"button-separator\">\n      <input v-if=\"appStore.hasPermission('CFGEDUSER')\" type=\"button\" class=\"submit\" value=\"Configuration Editor\" @click=\"configeditor\">\n      <input v-if=\"appStore.hasPermission('HWTOUSER')\" type=\"button\" class=\"submit\" value=\"AllStar How To's\" @click=\"openHelp\">\n      <input v-if=\"appStore.hasPermission('WIKIUSER')\" type=\"button\" class=\"submit\" value=\"AllStar Wiki\" @click=\"openWiki\">\n      <input v-if=\"appStore.hasPermission('CSTATUSER')\" type=\"button\" class=\"submit\" value=\"CPU Status\" @click=\"cpustats\">\n      <input v-if=\"appStore.hasPermission('ASTATUSER')\" type=\"button\" class=\"submit\" value=\"AllStar Status\" @click=\"aststats\">\n      <input v-if=\"appStore.hasPermission('ACTNUSER')\" type=\"button\" class=\"submit\" value=\"Active Nodes\" @click=\"openActiveNodes\">\n      <input v-if=\"appStore.hasPermission('ALLNUSER')\" type=\"button\" class=\"submit\" value=\"All Nodes\" @click=\"openAllNodes\">\n      \n      <!-- Database Section -->\n      <input v-if=\"appStore.hasPermission('DBTUSER')\" type=\"button\" class=\"submit\" value=\"Database\" @click=\"database\">\n      <input v-if=\"appStore.hasPermission('LLOGUSER')\" type=\"button\" class=\"submit\" value=\"Linux Log\" @click=\"linuxlog\">\n      <input v-if=\"appStore.hasPermission('ASTLUSER')\" type=\"button\" class=\"submit\" value=\"AST Log\" @click=\"astlog\">\n      <input v-if=\"appStore.hasPermission('WLOGUSER')\" type=\"button\" class=\"submit\" value=\"Web Access Log\" @click=\"webacclog\">\n      <input v-if=\"appStore.hasPermission('WERRUSER')\" type=\"button\" class=\"submit\" value=\"Web Error Log\" @click=\"weberrlog\">\n      \n      <!-- System Control Buttons -->\n      <input v-if=\"appStore.hasPermission('ASTRELUSER')\" type=\"button\" class=\"submit\" value=\"IAX2/Module RELOAD\" @click=\"astreload\">\n      <input v-if=\"appStore.hasPermission('ASTSTRUSER')\" type=\"button\" class=\"submit\" value=\"AST START\" @click=\"astaron\">\n      <input v-if=\"appStore.hasPermission('ASTSTPUSER')\" type=\"button\" class=\"submit\" value=\"AST STOP\" @click=\"astaroff\">\n      <input v-if=\"appStore.hasPermission('FSTRESUSER')\" type=\"button\" class=\"submit\" value=\"RESTART\" @click=\"fastrestart\">\n      <input v-if=\"appStore.hasPermission('RBTUSER')\" type=\"button\" class=\"submit\" value=\"Server REBOOT\" @click=\"reboot\">\n      \n      <!-- Additional System Buttons -->\n      <input v-if=\"appStore.hasPermission('GPIOUSER')\" type=\"button\" class=\"submit\" value=\"GPIO\" @click=\"openpigpio\">\n      <input v-if=\"appStore.hasPermission('BANUSER')\" type=\"button\" class=\"submit\" value=\"Access List\" @click=\"openbanallow\">\n      <input v-if=\"appStore.hasPermission('DVSWITCHUSER')\" type=\"button\" class=\"submit\" value=\"DVSwitch Mode\" @click=\"showDvswitchModal = true\">\n    </div>\n\n    <!-- Bottom Utility Buttons (matches original exactly) -->\n    <p class=\"button-container\">\n      <input type=\"button\" class=\"submit\" value=\"Display Configuration\" @click=\"showDisplayConfigModal = true\">\n      <input v-if=\"systemInfo?.dvmUrl\" type=\"button\" class=\"submit\" value=\"Digital Dashboard\" @click=\"openDigitalDashboard\">\n      <input v-if=\"appStore.isAuthenticated && appStore.hasPermission('SYSINFUSER')\" type=\"button\" class=\"submit\" value=\"Node Status\" @click=\"openNodeStatus\">\n      <input v-if=\"appStore.isAuthenticated && appStore.hasPermission('SYSINFUSER')\" type=\"button\" class=\"submit\" value=\"System Info\" @click=\"systeminfo\">\n    </p>\n\n    <!-- Node Tables (mimics link.php structure) -->\n    <div style=\"text-align: center;\">\n      <div v-if=\"displayedNodes.length === 0\" class=\"no-nodes-message\">\n        Select a node or group from the menu to display node tables\n      </div>\n      <div v-else class=\"node-tables-container\">\n        <NodeTable \n          v-for=\"(node, index) in displayedNodes\"\n          :key=\"String(node.id)\"\n          :node=\"{ id: String(node.id), info: (node as NodeType).info, callsign: (node as NodeType).callsign }\"\n          :show-detail=\"true\"\n          :astdb=\"realTimeStore.astdb\"\n          :config=\"realTimeStore.nodeConfig\"\n          :ref=\"el => { if (el) nodeTableRefs[index] = el }\"\n          @node-click=\"handleNodeClick\"\n        />\n      </div>\n    </div>\n\n    <!-- Footer Info -->\n    <div class=\"clearer\"></div>\n    \n    <div v-if=\"systemInfo?.maintainer\" id=\"footer\">\n      <b>System maintained by: <i>{{ systemInfo.maintainer }}</i></b>\n    </div>\n\n    <!-- Donate Button Section -->\n    <div id=\"donate-section\" style=\"margin-top: 10px; text-align: center;\">\n      <button id=\"donatebutton\" class=\"submit-large\" @click=\"openDonatePopup\" style=\"background-color: #6b4ce6; color: white; border: none; padding: 12px 24px; font-size: 1.1em; font-weight: bold; border-radius: 6px; cursor: pointer; transition: background-color 0.3s ease;\">\n         Support This Project\n      </button>\n    </div>\n\n    <!-- Login Modal -->\n    <div v-if=\"showLoginModal\" class=\"login-modal\" @click=\"showLoginModal = false\">\n      <div class=\"login-modal-content\" @click.stop>\n        <LoginForm @login-success=\"handleLoginSuccess\" @login-cancel=\"showLoginModal = false\" />\n      </div>\n    </div>\n\n    <!-- Display Configuration Modal -->\n    <DisplayConfig \n      v-model:open=\"showDisplayConfigModal\"\n      @settings-updated=\"handleDisplaySettingsUpdated\"\n    />\n\n    <!-- Add Favorite Modal -->\n    <AddFavorite \n      v-model:isVisible=\"showAddFavoriteModal\"\n      :node-number=\"targetNode\"\n      @favorite-added=\"handleFavoriteAdded\"\n    />\n\n            <!-- Delete Favorite Modal -->\n        <DeleteFavorite \n          v-model:open=\"showDeleteFavoriteModal\"\n          @favorite-deleted=\"handleFavoriteDeleted\"\n        />\n        \n        <!-- Favorites Modal -->\n        <Favorites \n          v-model:open=\"showFavoritesModal\"\n          :local-node=\"selectedLocalNode || selectedNode || String(displayedNodes[0]?.id || '')\"\n          @command-executed=\"handleCommandExecuted\"\n        />\n        \n        <!-- AST Log Modal -->\n        <AstLog v-model:open=\"showAstLogModal\" />\n        \n        <!-- AST Lookup Modal -->\n        <AstLookup v-model:open=\"showAstLookupModal\" />\n        \n        <!-- Bubble Chart Modal -->\n        <BubbleChart v-model:open=\"showBubbleChartModal\" :local-node=\"targetNode\" />\n        \n        <!-- Control Panel Modal -->\n        <ControlPanel v-model:isVisible=\"showControlPanelModal\" :local-node=\"targetNode || selectedLocalNode || selectedNode || String(displayedNodes[0]?.id || '')\" />\n        \n                  <!-- RPT Stats Modal -->\n          <RptStats v-model:isVisible=\"showRptStatsModal\" :node-number=\"targetNode\" />\n          \n          <!-- CPU Stats Modal -->\n          <CpuStats v-model:isVisible=\"showCpuStatsModal\" />\n          \n          <!-- Database Modal -->\n          <Database \n            v-model:isVisible=\"showDatabaseModal\" \n            :localnode=\"selectedLocalNode || selectedNode || String(displayedNodes[0]?.id || '')\" \n          />\n          \n          <!-- Donate Modal -->\n          <Donate v-model:isVisible=\"showDonateModal\" />\n          \n          <!-- ExtNodes Modal -->\n          <ExtNodes v-model:isVisible=\"showExtNodesModal\" />\n          \n          <!-- FastRestart Modal -->\n          <FastRestart \n            v-model:isVisible=\"showFastRestartModal\" \n            :localnode=\"selectedLocalNode || selectedNode\" \n          />\n          \n          <!-- IRLP Log Modal -->\n          <IRLPLog v-model:isVisible=\"showIrlpLogModal\" />\n          \n          <!-- Linux Log Modal -->\n          <LinuxLog v-model:isVisible=\"showLinuxLogModal\" />\n          \n          <!-- Ban/Allow Modal -->\n          <BanAllow \n            v-model:isVisible=\"showBanAllowModal\" \n            :available-nodes=\"availableNodes\"\n            :default-node=\"selectedNode\"\n            :displayed-nodes=\"displayedNodes\"\n          />\n          \n          <!-- Pi GPIO Modal -->\n          <PiGPIO v-model:isVisible=\"showPiGPIOModal\" />\n          \n          <!-- Reboot Modal -->\n          <Reboot v-model:isVisible=\"showRebootModal\" />\n          \n          <!-- SMLog Modal -->\n          <SMLog v-model:isVisible=\"showSMLogModal\" />\n          \n          <!-- Stats Modal -->\n          <Stats v-model:isVisible=\"showStatsModal\" :localnode=\"targetNode\" />\n          \n          <!-- Web Access Log Modal -->\n          <WebAccLog v-model:isVisible=\"showWebAccLogModal\" />\n          \n          <!-- Web Error Log Modal -->\n          <WebErrLog v-model:isVisible=\"showWebErrLogModal\" />\n    \n    <!-- Voter Modal -->\n    <Voter :show=\"showVoterModal\" @close=\"showVoterModal = false\" />\n    \n    <!-- DVSwitch Modal -->\n    <DVSwitchModal \n      v-model:isVisible=\"showDvswitchModal\" \n      :local-node=\"selectedLocalNode || selectedNode || String(displayedNodes[0]?.id || '')\" \n    />\n    \n    <!-- ConfigEditor Modal -->\n    <ConfigEditor v-model:open=\"showConfigEditorModal\" />\n    \n    <!-- SystemInfo Modal -->\n    <SystemInfo v-model:open=\"showSystemInfoModal\" />\n\n    <!-- Digital Dashboard Modal -->\n    <DigitalDashboard\n      v-model:isVisible=\"showDigitalDashboardModal\"\n      :url=\"systemInfo?.dvmUrl || ''\"\n    />\n\n    <!-- Node Status Modal -->\n    <NodeStatus\n      v-model:isVisible=\"showNodeStatusModal\"\n      @close=\"showNodeStatusModal = false\"\n    />\n    \n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, onUnmounted, watch, nextTick, onBeforeMount, defineAsyncComponent } from 'vue'\nimport { useAppStore } from '@/stores/app'\nimport { useRealTimeStore } from '@/stores/realTime'\nimport { api } from '@/utils/api'\nimport { sanitizeHtml } from '@/utils/sanitize'\nimport type { Node as NodeType } from '@/types'\nimport NodeTable from '@/components/NodeTable.vue'\nimport LoginForm from '@/components/LoginForm.vue'\nimport Menu from '@/components/Menu.vue'\nconst DisplayConfig = defineAsyncComponent(() => import('@/components/DisplayConfig.vue'))\nconst AddFavorite = defineAsyncComponent(() => import('@/components/AddFavorite.vue'))\nconst DeleteFavorite = defineAsyncComponent(() => import('@/components/DeleteFavorite.vue'))\nconst Favorites = defineAsyncComponent(() => import('@/components/Favorites.vue'))\nconst DVSwitchModal = defineAsyncComponent(() => import('@/components/DVSwitchModal.vue'))\nconst AstLog = defineAsyncComponent(() => import('@/components/AstLog.vue'))\nconst AstLookup = defineAsyncComponent(() => import('@/components/AstLookup.vue'))\nconst BubbleChart = defineAsyncComponent(() => import('@/components/BubbleChart.vue'))\nconst ControlPanel = defineAsyncComponent(() => import('@/components/ControlPanel.vue'))\nconst RptStats = defineAsyncComponent(() => import('@/components/RptStats.vue'))\nconst CpuStats = defineAsyncComponent(() => import('@/components/CpuStats.vue'))\nconst Database = defineAsyncComponent(() => import('@/components/Database.vue'))\nconst Donate = defineAsyncComponent(() => import('@/components/Donate.vue'))\nconst ExtNodes = defineAsyncComponent(() => import('@/components/ExtNodes.vue'))\nconst FastRestart = defineAsyncComponent(() => import('@/components/FastRestart.vue'))\nconst IRLPLog = defineAsyncComponent(() => import('@/components/IRLPLog.vue'))\nconst LinuxLog = defineAsyncComponent(() => import('@/components/LinuxLog.vue'))\nconst BanAllow = defineAsyncComponent(() => import('@/components/BanAllow.vue'))\nconst PiGPIO = defineAsyncComponent(() => import('@/components/PiGPIO.vue'))\nconst Reboot = defineAsyncComponent(() => import('@/components/Reboot.vue'))\nconst SMLog = defineAsyncComponent(() => import('@/components/SMLog.vue'))\nconst Stats = defineAsyncComponent(() => import('@/components/Stats.vue'))\nconst WebAccLog = defineAsyncComponent(() => import('@/components/WebAccLog.vue'))\nconst WebErrLog = defineAsyncComponent(() => import('@/components/WebErrLog.vue'))\nconst Voter = defineAsyncComponent(() => import('@/components/Voter.vue'))\nconst ConfigEditor = defineAsyncComponent(() => import('@/components/ConfigEditor.vue'))\nconst SystemInfo = defineAsyncComponent(() => import('@/components/SystemInfo.vue'))\nconst DigitalDashboard = defineAsyncComponent(() => import('@/components/DigitalDashboard.vue'))\nconst NodeStatus = defineAsyncComponent(() => import('@/components/NodeStatus.vue'))\n\n\nconst appStore = useAppStore()\nconst realTimeStore = useRealTimeStore()\n\n// Reactive data\nconst selectedNode = ref('')\nconst selectedLocalNode = ref('')\nconst targetNode = ref('')\nconst permConnect = ref(false)\n\n// Date and time display\nconst currentDateTime = ref('')\nconst showDateTime = ref(true)\nlet dateTimeInterval: ReturnType<typeof setInterval> | null = null\n\nconst updateDateTime = () => {\n  const now = new Date()\n  const options: Intl.DateTimeFormatOptions = {\n    weekday: 'long',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit',\n    second: '2-digit',\n    hour12: true\n  }\n  currentDateTime.value = now.toLocaleString('en-US', options)\n}\n\nconst loadDisplaySettingsFromCookies = () => {\n  const cookies = document.cookie.split(';').reduce((acc, cookie) => {\n    const [key, value] = cookie.trim().split('=')\n    if (key.startsWith('display-data[')) {\n      const cleanKey = key.replace('display-data[', '').replace(']', '')\n      acc[cleanKey] = value\n    }\n    return acc\n  }, {} as Record<string, string>)\n\n  showDateTime.value = cookies['show-date-time'] !== '0'\n}\nconst showLoginModal = ref(false)\nconst showDisplayConfigModal = ref(false)\nconst showAddFavoriteModal = ref(false)\nconst showDeleteFavoriteModal = ref(false)\nconst showFavoritesModal = ref(false)\nconst showAstLogModal = ref(false)\nconst showAstLookupModal = ref(false)\nconst showBubbleChartModal = ref(false)\nconst showControlPanelModal = ref(false)\nconst showRptStatsModal = ref(false)\nconst showCpuStatsModal = ref(false)\nconst showDatabaseModal = ref(false)\nconst showDonateModal = ref(false)\n  const showExtNodesModal = ref(false)\n  const showFastRestartModal = ref(false)\n  const showIrlpLogModal = ref(false)\n  const showLinuxLogModal = ref(false)\n  const showBanAllowModal = ref(false)\n  const showPiGPIOModal = ref(false)\n  const showRebootModal = ref(false)\n  const showSMLogModal = ref(false)\n  const showStatsModal = ref(false)\nconst showWebAccLogModal = ref(false)\nconst showWebErrLogModal = ref(false)\nconst showVoterModal = ref(false)\nconst showConfigEditorModal = ref(false)\nconst showSystemInfoModal = ref(false)\nconst showDvswitchModal = ref(false)\n\n\nconst nodeTableRefs = ref<any[]>([])\nconst systemInfo = ref<any>(null)\nconst headerBackground = ref<string | null>(null)\nconst showDigitalDashboardModal = ref(false)\nconst showNodeStatusModal = ref(false)\nconst databaseStatus = ref<any>(null)\nconst isLoadingDefaultNodes = ref(true)\n\n// Computed properties\nconst hasControlPermissions = computed(() => {\n  // Only show controls if user is authenticated\n  if (!appStore.isAuthenticated) {\n    return false\n  }\n  \n  return appStore.hasPermission('CONNECTUSER') || \n         appStore.hasPermission('DISCONNECTUSER') || \n         appStore.hasPermission('MONITORUSER') || \n         appStore.hasPermission('PERMUSER')\n})\n\n\nconst availableNodes = computed(() => {\n  return realTimeStore.nodes\n})\n\n\n\nconst displayedNodes = computed((): NodeType[] => {\n  // If no node is selected, show empty array until default is loaded\n  // This prevents showing all available nodes on initial page load\n  if (!selectedNode.value) {\n    return []\n  }\n  \n  const selectedNodeStr = String(selectedNode.value)\n\n  // Handle comma-separated node IDs (for groups)\n  if (selectedNodeStr.includes(',')) {\n    const nodeIds = selectedNodeStr.split(',').map(id => id.trim())\n\n    const filteredNodes = availableNodes.value.filter(node => \n      nodeIds.includes(String(node.id)) || \n      nodeIds.includes(String(node.node_number || node.id))\n    )\n    \n    // Convert node IDs to strings for consistency\n    return filteredNodes.map(node => ({\n      ...node,\n      id: String(node.id)\n    }))\n  }\n  \n  // Handle single node ID\n  const filteredNodes = availableNodes.value.filter(node => \n    String(node.id) === selectedNodeStr || \n    String(node.node_number || node.id) === selectedNodeStr\n  )\n\n  // If no nodes found but we have a selected node, create a placeholder node\n  // This handles cases where the node exists in the menu but not yet loaded in availableNodes\n  if (filteredNodes.length === 0 && selectedNodeStr && availableNodes.value.length > 0) {\n    // Create a temporary node entry for the selected node\n    const tempNode: NodeType = {\n      id: selectedNodeStr, // Keep as string to match Node type\n      node_number: parseInt(selectedNodeStr),\n      callsign: `Node ${selectedNodeStr}`,\n      description: 'Loading...',\n      location: 'Unknown',\n      status: 'unknown',\n      last_heard: undefined,\n      connected_nodes: [],\n      cos_keyed: 0,\n      tx_keyed: 0,\n      cpu_temp: undefined,\n      alert: undefined,\n      wx: undefined,\n      disk: undefined,\n      is_online: false,\n      is_keyed: false,\n      created_at: new Date().toISOString(),\n      updated_at: new Date().toISOString(),\n      info: `Node ${selectedNodeStr}`\n    }\n    return [tempNode]\n  }\n\n  // Convert node IDs to strings for consistency\n  return filteredNodes.map(node => ({\n    ...node,\n    id: String(node.id)\n  }))\n})\n\nconst headerBackgroundUrl = computed(() => {\n  // Don't set background until we've checked for custom header\n  // This prevents the default from loading before we know if custom exists\n  const backgroundUrl = headerBackground.value || systemInfo.value?.customHeaderBackground\n  if (!backgroundUrl) {\n    // Return null to prevent any background from loading until we know which one to use\n    return null\n  }\n  return `url('${backgroundUrl}')`\n})\n\nconst formatHeaderTag = () => {\n  const parts = []\n  \n  if (systemInfo.value?.location) {\n    parts.push(systemInfo.value.location)\n  }\n  \n  if (systemInfo.value?.title2) {\n    parts.push(systemInfo.value.title2)\n  }\n  \n  if (systemInfo.value?.title3) {\n    parts.push(systemInfo.value.title3)\n  }\n  \n  return parts.join('<br>')\n}\n\n// Helper methods for URL handling (matching legacy header.inc behavior)\nconst getCleanUrl = (url: string): string => {\n  // Remove trailing \">\" if present (legacy format for target=\"_blank\")\n  return url.endsWith('>') ? url.slice(0, -1) : url\n}\n\nconst shouldOpenInNewTab = (url: string): boolean => {\n  // Check if URL ends with \">\" (legacy format for target=\"_blank\")\n  return url.endsWith('>')\n}\n\n// Computed property for custom logo positioning\nconst customLogoStyle = computed(() => {\n  if (!systemInfo.value?.logoName) return {}\n  \n  const styles: Record<string, string> = {\n    position: 'absolute',\n    border: '0px'\n  }\n  \n  if (systemInfo.value.logoPositionTop) {\n    styles.top = systemInfo.value.logoPositionTop\n  }\n  \n  if (systemInfo.value.logoPositionRight) {\n    styles.right = systemInfo.value.logoPositionRight\n  }\n  \n  return styles\n})\n\n// Computed property for welcome message (depends on authentication status)\nconst welcomeMessage = computed(() => {\n  if (appStore.isAuthenticated && systemInfo.value?.welcomeMsgLogged) {\n    return systemInfo.value.welcomeMsgLogged\n  } else if (!appStore.isAuthenticated && systemInfo.value?.welcomeMsg) {\n    return systemInfo.value.welcomeMsg\n  }\n  return null\n})\n\nconst headerTitle = computed(() => {\n  if (appStore.isAuthenticated && systemInfo.value?.titleLogged) {\n    return systemInfo.value.titleLogged\n  } else if (!appStore.isAuthenticated && systemInfo.value?.titleNotLogged) {\n    return systemInfo.value.titleNotLogged\n  }\n  // Fallback to default titles if API doesn't provide them\n  return appStore.isAuthenticated ? \n    'Supermon-ng AllStar Manager' : \n    'Supermon-ng AllStar Monitor'\n})\n\n// Computed property for header title color (title_logged or title_not_logged)\nconst headerTitleStyle = computed(() => {\n  const color = appStore.isAuthenticated \n    ? systemInfo.value?.titleLoggedColor \n    : systemInfo.value?.titleNotLoggedColor\n  \n  if (color) {\n    return { color: color }\n  }\n  return {}\n})\n\n// Computed property for callsign color\nconst callsignStyle = computed(() => {\n  if (systemInfo.value?.callsignColor) {\n    return { color: systemInfo.value.callsignColor }\n  }\n  return {}\n})\n\n// Watcher to update selectedLocalNode when selectedNode changes\nwatch(selectedNode, (newValue) => {\n  if (newValue) {\n    const selectedNodeStr = String(newValue)\n    if (selectedNodeStr.includes(',')) {\n      // Group mode - set first node as local node\n      const nodeIds = selectedNodeStr.split(',').map(id => id.trim())\n      if (nodeIds.length > 0) {\n        selectedLocalNode.value = nodeIds[0]\n      }\n    } else {\n      // Single node mode\n      selectedLocalNode.value = selectedNodeStr\n    }\n  }\n}, { immediate: true })\n\n// Watcher to update selectedLocalNode when displayedNodes changes (for single node case)\nwatch(displayedNodes, (newNodes) => {\n  if (newNodes.length === 1 && !selectedLocalNode.value) {\n    selectedLocalNode.value = String(newNodes[0].id)\n  }\n}, { immediate: true })\n\n// Watcher to update document title when systemInfo changes\nwatch(systemInfo, (newSystemInfo) => {\n  if (newSystemInfo?.smServerName) {\n    document.title = newSystemInfo.smServerName\n  }\n}, { immediate: true })\n\n// Methods\nconst onNodeChange = () => {\n  \n  // Ensure selectedNode is always a string for processing\n  const selectedNodeStr = String(selectedNode.value)\n  \n  if (selectedNodeStr.includes(',')) {\n    // Handle group selection\n    const nodeIds = selectedNodeStr.split(',').map(id => id.trim())\n\n    \n    // Start monitoring each node in the group\n    nodeIds.forEach(nodeId => {\n\n      realTimeStore.startMonitoring(nodeId)\n    })\n    \n    // Set the first node as the default local node for operations\n    if (nodeIds.length > 0) {\n      selectedLocalNode.value = nodeIds[0]\n    }\n  } else {\n    // Handle single node selection\n\n    selectedLocalNode.value = selectedNodeStr\n    realTimeStore.startMonitoring(selectedNodeStr)\n  }\n}\n\nconst connect = async () => {\n  if (!targetNode.value || !selectedLocalNode.value) return\n  \n  try {\n    const response = await api.post('/nodes/connect', {\n      localnode: selectedLocalNode.value,\n      remotenode: targetNode.value,\n      perm: permConnect.value ? 'on' : null\n    })\n    \n    if (response.data.success) {\n      // Refresh node data after successful connection\n      await realTimeStore.fetchNodeData()\n    } else {\n      // Connect failed - error already shown to user\n    }\n  } catch (error) {\n    // Connect error - error already shown to user\n  }\n}\n\nconst disconnect = async () => {\n  if (!targetNode.value || !selectedLocalNode.value) return\n  \n  try {\n    const response = await api.post('/nodes/disconnect', {\n      localnode: selectedLocalNode.value,\n      remotenode: targetNode.value,\n      perm: null\n    })\n    \n    if (response.data.success) {\n      // Refresh node data after successful disconnection\n      await realTimeStore.fetchNodeData()\n    }\n  } catch (error) {\n    // Disconnect error handled\n  }\n}\n\nconst monitor = async () => {\n  if (!targetNode.value || !selectedLocalNode.value) return\n  try {\n    const response = await api.post('/nodes/monitor', {\n      localnode: selectedLocalNode.value,\n      remotenode: targetNode.value,\n      perm: null\n    })\n    \n    if (response.data.success) {\n\n      // Refresh node data after successful monitoring\n      await realTimeStore.fetchNodeData()\n    }\n  } catch (error) {\n    // Monitor error handled\n  }\n}\n\nconst localmonitor = async () => {\n  if (!targetNode.value || !selectedLocalNode.value) return\n  try {\n    const response = await api.post('/nodes/local-monitor', {\n      localnode: selectedLocalNode.value,\n      remotenode: targetNode.value,\n      perm: null\n    })\n    \n    if (response.data.success) {\n\n      // Refresh node data after successful local monitoring\n      await realTimeStore.fetchNodeData()\n    }\n  } catch (error) {\n    // Local monitor error handled\n  }\n}\n\n// Additional button methods to match link.php\nconst dtmf = async () => {\n  // Always prompt user for DTMF command first\n  const dtmfCommand = prompt('Enter DTMF command:')\n  if (!dtmfCommand || dtmfCommand.trim() === '') {\n    return\n  }\n  \n  // Determine which node to use for DTMF command\n  let nodeToUse: string | null = null\n  \n  // First, check if we have a local node selected\n  if (selectedLocalNode.value) {\n    nodeToUse = selectedLocalNode.value\n  } else if (selectedNode.value) {\n    // If no local node but we have a selected node, use it\n    nodeToUse = String(selectedNode.value).split(',')[0] // Use first node if it's a group\n  } else if (displayedNodes.value.length === 1) {\n    // If only one node is displayed, use it\n    nodeToUse = String(displayedNodes.value[0].id)\n  } else if (availableNodes.value.length === 1) {\n    // If only one node is available in total, use it\n    nodeToUse = String(availableNodes.value[0].id)\n  }\n  \n  // If we still don't have a node, show error\n  if (!nodeToUse) {\n    alert('No local node selected. Please select a node first.')\n    return\n  }\n  \n  try {\n    const response = await api.post('/nodes/dtmf', {\n      localnode: nodeToUse,\n      dtmf: dtmfCommand.trim()\n    })\n    \n    if (response.data.success) {\n\n      // Show success message to user\n      \n      // Refresh node data after successful DTMF command\n      await realTimeStore.fetchNodeData()\n    }\n  } catch (error) {\n    // DTMF error handled\n  }\n}\n\nconst astlookup = async () => {\n  try {\n    showAstLookupModal.value = true\n  } catch (error) {\n    // AST lookup error handled\n  }\n}\n\nconst rptstats = async () => {\n  try {\n    showRptStatsModal.value = true\n  } catch (error) {\n    // RPT stats error handled\n  }\n}\n\n\n\nconst bubble = async () => {\n  try {\n    showBubbleChartModal.value = true\n  } catch (error) {\n    // Bubble chart error handled\n  }\n}\n\n\n\n\n\nconst openDigitalDashboard = async () => {\n  try {\n    if (systemInfo.value?.dvmUrl) {\n      showDigitalDashboardModal.value = true\n    }\n  } catch (error) {\n    // Digital dashboard error handled\n  }\n}\n\nconst openNodeStatus = async () => {\n  try {\n    showNodeStatusModal.value = true\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n    alert('Error opening Node Status: ' + errorMessage)\n  }\n}\n\n\n// Additional button methods to match original Supermon-ng\nconst configeditor = async () => {\n  try {\n    showConfigEditorModal.value = true\n  } catch (error) {\n    // Config editor error handled\n  }\n}\n\n\n\nconst astreload = async () => {\n  try {\n    // IAX2/Module reload is local only - no node selection needed\n    const response = await api.post('/config/asterisk/reload', {})\n\n    if (response.data.success) {\n      alert('Asterisk configuration reload completed successfully!\\n\\n' + response.data.results.join('\\n'))\n    } else {\n      alert('Error: ' + response.data.message)\n    }\n  } catch (error: any) {\n    alert('Error executing Asterisk reload: ' + (error.response?.data?.message || error.message))\n  }\n}\n\nconst astaron = async () => {\n  try {\n\n    \n    if (!confirm('Are you sure you want to START the AllStar service? This will bring the service online.')) {\n      return\n    }\n\n    const response = await api.post('/config/asterisk/control', {\n      action: 'start'\n    })\n\n    if (response.data.success) {\n      alert('AllStar service started successfully!\\n\\n' + response.data.output.join('\\n'))\n    } else {\n      alert('Error: ' + response.data.message)\n    }\n  } catch (error: any) {\n    alert('Error starting AllStar service: ' + (error.response?.data?.message || error.message))\n  }\n}\n\nconst astaroff = async () => {\n  try {\n\n    \n    if (!confirm('Are you sure you want to STOP the AllStar service? This will bring the service offline.')) {\n      return\n    }\n\n    const response = await api.post('/config/asterisk/control', {\n      action: 'stop'\n    })\n\n    if (response.data.success) {\n      alert('AllStar service stopped successfully!\\n\\n' + response.data.output.join('\\n'))\n    } else {\n      alert('Error: ' + response.data.message)\n    }\n  } catch (error: any) {\n    alert('Error stopping AllStar service: ' + (error.response?.data?.message || error.message))\n  }\n}\n\n  const fastrestart = async () => {\n    try {\n  \n      \n      // Use selectedLocalNode if available, otherwise use selectedNode\n      if (selectedLocalNode.value) {\n        showFastRestartModal.value = true\n      } else if (selectedNode.value) {\n        showFastRestartModal.value = true\n      } else {\n        alert('Please select a node first to perform fast restart.')\n        return\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n      alert(`Failed to open FastRestart: ${errorMessage}`)\n    }\n  }\n\nconst reboot = async () => {\n  try {\n\n    showRebootModal.value = true\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n    alert(`Failed to open Server Reboot: ${errorMessage}`)\n  }\n}\n\nconst openHelp = async () => {\n  try {\n    window.open('https://allstarlink.github.io/adv-topics/', 'AllStarHelp', 'status=no,location=no,toolbar=yes,width=800,height=600,left=100,top=100')\n  } catch (error) {\n    // Help link error handled\n  }\n}\n\nconst openWiki = async () => {\n  try {\n    window.open('https://wiki.allstarlink.org', 'AllStarWiki', 'status=no,location=no,toolbar=yes,width=800,height=600,left=100,top=100')\n  } catch (error) {\n    // Wiki link error handled\n  }\n}\n\nconst cpustats = async () => {\n  try {\n\n    showCpuStatsModal.value = true\n  } catch (error) {\n    // CPU Status error handled\n  }\n}\n\nconst aststats = async () => {\n  try {\n    // Prompt user for node number (like the original implementation)\n    const nodeNumber = prompt('Enter node number for AllStar Status:')\n    if (!nodeNumber || nodeNumber.trim() === '') {\n      return\n    }\n    \n    // Validate node number is numeric\n    if (!/^\\d+$/.test(nodeNumber.trim())) {\n      alert('Please enter a valid numeric node number')\n      return\n    }\n    \n    // Set the target node and show the stats modal\n    targetNode.value = nodeNumber.trim()\n    showStatsModal.value = true\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n    alert(`Failed to open AllStar Statistics: ${errorMessage}`)\n  }\n}\n\n\nconst openActiveNodes = async () => {\n  try {\n    window.open('https://stats.allstarlink.org/', 'ActiveNodes', 'status=no,location=no,toolbar=yes,width=1200,height=800,left=100,top=100')\n  } catch (error) {\n    // Active nodes link error handled\n  }\n}\n\nconst openAllNodes = async () => {\n  try {\n    window.open('https://www.allstarlink.org/nodelist/', 'AllNodes', 'status=no,location=no,toolbar=yes,width=1200,height=800,left=100,top=100')\n  } catch (error) {\n    // All nodes link error handled\n  }\n}\n\nconst database = async () => {\n  try {\n    showDatabaseModal.value = true\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n    alert(`Failed to open Database: ${errorMessage}`)\n  }\n}\n\nconst openpigpio = async () => {\n  try {\n\n    showPiGPIOModal.value = true\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n    alert(`Failed to open Pi GPIO: ${errorMessage}`)\n  }\n}\n\nconst linuxlog = async () => {\n  try {\n\n    showLinuxLogModal.value = true\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n    alert(`Failed to open Linux Log: ${errorMessage}`)\n  }\n}\n\nconst astlog = async () => {\n  try {\n\n    showAstLogModal.value = true\n  } catch (error) {\n    // AST Log error handled\n  }\n}\n\nconst webacclog = async () => {\n  try {\n\n    showWebAccLogModal.value = true\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n    alert(`Failed to open Web Access Log: ${errorMessage}`)\n  }\n}\n\nconst weberrlog = async () => {\n  try {\n\n    showWebErrLogModal.value = true\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n    alert(`Failed to open Web Error Log: ${errorMessage}`)\n  }\n}\n\nconst openbanallow = async () => {\n  try {\n\n    showBanAllowModal.value = true\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : 'Unknown error'\n    alert(`Failed to open Ban/Allow: ${errorMessage}`)\n  }\n}\n\nconst systeminfo = async () => {\n  try {\n    showSystemInfoModal.value = true\n  } catch (error) {\n    // System info error handled\n  }\n}\n\nconst handleLoginSuccess = async () => {\n  showLoginModal.value = false\n  await appStore.checkAuth()\n  \n  // Refetch configuration data after login to get user's personal default node\n  try {\n    const nodesResponse = await api.get('/config/nodes')\n    if (nodesResponse.data.success && nodesResponse.data.data?.default_node) {\n      const defaultNode = nodesResponse.data.data.default_node\n    \n        \n        // Set the default node as selected\n        selectedNode.value = defaultNode\n        \n        // Start monitoring the default node(s)\n        if (defaultNode.includes(',')) {\n          // Group mode - monitor each node individually\n          const nodeIds = defaultNode.split(',').map((id: string) => id.trim())\n          for (const nodeId of nodeIds) {\n            await realTimeStore.startMonitoring(nodeId)\n          }\n        } else {\n          // Single node mode\n          await realTimeStore.startMonitoring(defaultNode)\n        }\n    }\n  } catch (error) {\n    // Configuration refetch error handled\n  }\n}\n\nconst handleLogout = async () => {\n  await appStore.logout()\n  \n  // Refetch configuration data after logout to get new default node\n  try {\n    const nodesResponse = await api.get('/config/nodes')\n    if (nodesResponse.data.success && nodesResponse.data.data?.default_node) {\n      const defaultNode = nodesResponse.data.data.default_node\n    \n        \n        // Set the default node as selected\n        selectedNode.value = defaultNode\n        \n        // Start monitoring the default node(s)\n        if (defaultNode.includes(',')) {\n          // Group mode - monitor each node individually\n          const nodeIds = defaultNode.split(',').map((id: string) => id.trim())\n          for (const nodeId of nodeIds) {\n            await realTimeStore.startMonitoring(nodeId)\n          }\n        } else {\n          // Single node mode\n          await realTimeStore.startMonitoring(defaultNode)\n        }\n    }\n  } catch (error) {\n    // Configuration refetch error handled\n  }\n}\n\nconst openDonatePopup = () => {\n  showDonateModal.value = true\n}\n\n  // Handle menu node selection\n  const handleNodeSelection = async (nodeId: string) => {\n    // Ensure realTime store is initialized and nodes are loaded\n    if (realTimeStore.nodes.length === 0) {\n      await realTimeStore.initialize()\n    }\n    \n    selectedNode.value = nodeId\n    onNodeChange()\n  }\n\n  // Handle node click from NodeTable (for quick target node selection)\n  const handleNodeClick = (nodeId: string, localNodeId: string) => {\n    // Set the clicked node as the target node\n    targetNode.value = nodeId\n    \n    // Update the local node selection to the table owner\n    selectedLocalNode.value = localNodeId\n    \n\n    \n    // Scroll to the control panel\n    const controlPanel = document.getElementById('connect_form')\n    if (controlPanel) {\n      controlPanel.scrollIntoView({ behavior: 'smooth', block: 'center' })\n    }\n  }\n\n  // Handle display settings updated\n  const handleDisplaySettingsUpdated = (_settings: any) => {\n    // Refresh the page to apply new display settings\n    window.location.reload()\n  }\n\n  // Handle favorite added\n  const handleFavoriteAdded = (_result: any) => {\n    // Could show a notification or refresh the page\n    \n  }\n\n  // Handle favorite deleted\n  const handleFavoriteDeleted = (_result: any) => {\n    // Could show a notification or refresh the page\n    \n  }\n\n  // Handle command executed\n  const handleCommandExecuted = (_result: any) => {\n    // Could show a notification or refresh the page\n    \n  }\n\n// Check for custom header background BEFORE component mounts to prevent default from loading\n// We'll check quickly, but won't set default until we've confirmed from systemInfo\nonBeforeMount(async () => {\n  // Check for custom header immediately using fetch with very short timeout\n  // This runs before the component is mounted\n  const controller = new AbortController()\n  const timeoutId = setTimeout(() => controller.abort(), 50) // 50ms timeout - fail very fast\n  \n  try {\n    const response = await fetch('/supermon-ng/api/config/header-background', {\n      method: 'GET',\n      cache: 'no-cache',\n      signal: controller.signal\n    })\n    clearTimeout(timeoutId)\n    if (response.ok) {\n      // Custom header exists - set it immediately\n      headerBackground.value = '/supermon-ng/api/config/header-background'\n      return\n    }\n  } catch (e) {\n    clearTimeout(timeoutId)\n    // Don't set default here - wait for systemInfo to confirm\n    // This prevents default from loading if systemInfo will have the custom URL\n  }\n  // Don't set default here - let systemInfo be the source of truth\n  // Only set default if systemInfo confirms there's no custom header\n})\n\n// Lifecycle\nonMounted(async () => {\n  // Initialize date/time display\n  loadDisplaySettingsFromCookies()\n  if (showDateTime.value) {\n    updateDateTime()\n    dateTimeInterval = setInterval(updateDateTime, 1000)\n  }\n  \n  // Initialize realTime store\n  await realTimeStore.initialize()\n  \n  const boot = appStore.bootstrapData\n  if (boot?.systemInfo != null || boot?.databaseStatus != null || boot?.nodes != null) {\n    if (boot.systemInfo) {\n      systemInfo.value = boot.systemInfo\n      if (systemInfo.value?.customHeaderBackground) {\n        headerBackground.value = systemInfo.value.customHeaderBackground\n      } else if (!headerBackground.value) {\n        headerBackground.value = '/supermon-ng/background.jpg'\n      }\n      if (systemInfo.value?.smServerName) {\n        document.title = systemInfo.value.smServerName\n      }\n    }\n    if (boot.databaseStatus) databaseStatus.value = boot.databaseStatus\n    const defaultNode = boot.nodes?.default_node\n    if (defaultNode) {\n      selectedNode.value = defaultNode\n      if (defaultNode.includes(',')) {\n        const nodeIds = defaultNode.split(',').map((id: string) => id.trim())\n        for (const nodeId of nodeIds) {\n          await realTimeStore.startMonitoring(nodeId)\n        }\n      } else {\n        await realTimeStore.startMonitoring(defaultNode)\n      }\n      await nextTick()\n      isLoadingDefaultNodes.value = false\n    } else {\n      isLoadingDefaultNodes.value = false\n    }\n  } else {\n    try {\n      const [systemResponse, databaseResponse, nodesResponse] = await Promise.all([\n        api.get('/config/system-info'),\n        api.get('/database/status'),\n        api.get('/config/nodes')\n      ])\n      \n      if (systemResponse.data.success) {\n        systemInfo.value = systemResponse.data.data || systemResponse.data\n        if (systemInfo.value?.customHeaderBackground) {\n          headerBackground.value = systemInfo.value.customHeaderBackground\n        } else if (!headerBackground.value) {\n          headerBackground.value = '/supermon-ng/background.jpg'\n        }\n        if (systemInfo.value?.smServerName) {\n          document.title = systemInfo.value.smServerName\n        }\n      }\n      \n      if (databaseResponse.data.success) {\n        databaseStatus.value = databaseResponse.data.data || databaseResponse.data\n      }\n\n      if (nodesResponse.data.success && nodesResponse.data.data?.default_node) {\n        const defaultNode = nodesResponse.data.data.default_node\n    \n        \n        // Set the default node as selected\n        selectedNode.value = defaultNode\n        \n        // Start monitoring the default node(s)\n        if (defaultNode.includes(',')) {\n          // Group mode - monitor each node individually\n          const nodeIds = defaultNode.split(',').map((id: string) => id.trim())\n          for (const nodeId of nodeIds) {\n            await realTimeStore.startMonitoring(nodeId)\n          }\n        } else {\n          // Single node mode\n          await realTimeStore.startMonitoring(defaultNode)\n        }\n        \n        // Force a reactive update to ensure displayedNodes recomputes\n        await nextTick()\n        \n        // Small delay to ensure the default node is properly set\n        await new Promise(resolve => setTimeout(resolve, 100))\n      } else {\n        // No default node from backend, wait for user to select a node\n        // This prevents showing all nodes initially\n    \n        if (realTimeStore.nodes.length > 0) {\n          const firstNode = realTimeStore.nodes[0]\n          selectedNode.value = String(firstNode.id)\n      \n          await realTimeStore.startMonitoring(String(firstNode.id))\n        }\n      }\n      \n      // Mark default nodes as loaded\n      isLoadingDefaultNodes.value = false\n    } catch (error) {\n      console.error('Error loading system info and default nodes:', error)\n      isLoadingDefaultNodes.value = false\n    }\n  }\n})\n\nonUnmounted(() => {\n  // Clean up date/time interval\n  if (dateTimeInterval) {\n    clearInterval(dateTimeInterval)\n    dateTimeInterval = null\n  }\n  \n  // WebSocket connections are cleaned up automatically when stopMonitoring() is called\n})\n\n// Watch for node table refs updates\nwatch(nodeTableRefs, (newRefs) => {\n  if (Array.isArray(newRefs)) {\n    nextTick(() => {\n      newRefs.forEach(ref => {\n        if (ref && typeof ref.refreshData === 'function') {\n          ref.refreshData()\n        }\n      })\n    })\n  }\n}, { deep: true })\n\n// Watch for real-time store updates and update NodeTable components\nwatch(() => realTimeStore.nodes, (newNodes) => {\n  nextTick(() => {\n    nodeTableRefs.value.forEach((ref, index) => {\n      if (ref && typeof ref.updateNodeData === 'function') {\n        const nodeId = displayedNodes.value[index] ? String(displayedNodes.value[index].id) : undefined\n        if (nodeId) {\n          const nodeData = newNodes.find(n => String(n.id) === String(nodeId))\n          if (nodeData) {\n            ref.updateNodeData(nodeData)\n          }\n        }\n      }\n    })\n  })\n}, { deep: true })\n\n// Watch for displayed nodes changes and update NodeTable components\n// TEMPORARILY DISABLED TO DEBUG GROUP MODE ISSUE\n/*\nwatch(displayedNodes, (newDisplayedNodes) => {\n  \n  \n  // Only set default node if we don't have any selection AND we have multiple nodes\n  // This prevents overriding group selections\n  if (newDisplayedNodes.length > 1 && !selectedNode.value) {\n    nextTick(() => {\n      // Create a group selection from all displayed nodes\n      const nodeIds = newDisplayedNodes.map(node => node.id).join(',')\n      selectedNode.value = nodeIds\n  \n      // Trigger onNodeChange to update target node and start monitoring\n      onNodeChange()\n    })\n  } else if (newDisplayedNodes.length > 1 && selectedNode.value) {\n    // If we have a selection and multiple displayed nodes, check if it's a group selection\n    const selectedNodeStr = String(selectedNode.value)\n    if (!selectedNodeStr.includes(',')) {\n      // If current selection is not a group, but we have multiple displayed nodes,\n      // this might be a case where we need to create a group selection\n      // But we should be careful not to override existing group selections\n  \n    } else {\n      \n    }\n  }\n  \n  nextTick(() => {\n    newDisplayedNodes.forEach((node, index) => {\n      if (nodeTableRefs.value[index] && typeof nodeTableRefs.value[index].updateNodeData === 'function') {\n        const nodeData = realTimeStore.nodes.find(n => String(n.id) === String(node.id))\n        if (nodeData) {\n          nodeTableRefs.value[index].updateNodeData(nodeData)\n        }\n      }\n    })\n  })\n}, { deep: true })\n*/\n</script>\n\n<style scoped>\n.dashboard {\n  max-width: 880px;\n  width: 100%;\n  margin: 0 auto;\n  padding: 20px;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  /* Allow menu dropdowns to extend beyond dashboard boundaries */\n  overflow: visible;\n  /* Prevent horizontal scrolling on mobile */\n  box-sizing: border-box;\n}\n\n\n/* Original Supermon-ng table container styling */\n.fxwidth {\n  width: auto;\n  min-width: 50%;\n  max-width: 880px;\n  margin: 0 auto;\n  border-collapse: collapse;\n  overflow-x: auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.fxwidth td {\n  padding: 5px;\n  vertical-align: top;\n}\n\n.no-nodes-message {\n  text-align: center;\n  padding: 40px;\n  color: var(--text-color);\n  font-size: 16px;\n  background-color: var(--container-bg);\n  border: 1px solid var(--primary-color);\n  border-radius: 4px;\n  margin: 20px 0;\n}\n\n.node-tables-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 2px;\n  width: 100%;\n}\n\n/* Header styling (mimics header.inc layout) */\n.header {\n  position: relative;\n  width: calc(100% + 40px); /* Extend beyond dashboard padding */\n  height: 164px;\n  background-size: cover;\n  background-position: center;\n  border-radius: 8px;\n  margin-bottom: 0;\n  margin-left: -20px; /* Offset the dashboard padding */\n  margin-right: -20px; /* Offset the dashboard padding */\n  overflow: hidden;\n}\n\n/* Header Title (main title) */\n.header-title {\n  position: absolute;\n  top: 3px;\n  left: 25px; /* Adjusted for header extension */\n  margin: 0;\n  font-weight: bold;\n  font-size: 1.1em;\n  color: white;\n  line-height: normal;\n  letter-spacing: normal;\n  font-family: \"Lucida Grande\", Lucida, Verdana, sans-serif;\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);\n}\n\n.header-title a,\n.header-title a:link,\n.header-title a:visited {\n  text-decoration: none;\n  color: inherit;\n}\n\n/* Header Title2 (call sign) */\n.header-title2 {\n  position: absolute;\n  top: 5px;\n  left: 570px; /* Adjusted for header extension */\n  margin: 0;\n  font-weight: bold;\n  font-size: 1.1em;\n  color: white;\n  line-height: normal;\n  font-family: \"Lucida Grande\", Lucida, Verdana, sans-serif;\n  letter-spacing: normal;\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);\n}\n\n.header-title2 a,\n.header-title2 a:link,\n.header-title2 a:visited {\n  text-decoration: none;\n  color: inherit;\n}\n\n/* Header Tag (location and title) */\n.header-tag {\n  position: absolute;\n  bottom: 2%;\n  left: 30px; /* Adjusted for header extension */\n  text-align: left;\n  margin: 0;\n  color: white;\n  font-weight: bold;\n  font-size: 1.1em;\n  line-height: normal;\n  font-family: \"Lucida Grande\", Lucida, Verdana, sans-serif;\n  letter-spacing: normal;\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);\n}\n\n/* Header2 Tag (additional info when logged in) */\n.header2-tag {\n  position: absolute;\n  top: 145px;\n  left: 30px; /* Adjusted for header extension */\n  margin: 0;\n  font-size: 0.9em;\n  color: white;\n  font-weight: bold;\n  line-height: normal;\n  font-family: \"Lucida Grande\", Lucida, Verdana, sans-serif;\n  letter-spacing: normal;\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);\n}\n\n/* Header Login (positioned like original) */\n.header-login {\n  position: absolute;\n  top: 82%;\n  left: 92%;\n  font-size: 14px;\n  font-family: Verdana, Arial, sans-serif;\n  color: white;\n  text-align: right;\n  font-weight: bold;\n  font-style: italic;\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);\n}\n\n.header-login a,\n.header-login a:link,\n.header-login a:visited {\n  text-decoration: none;\n  color: white;\n}\n\n.header-login a:hover {\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: bold;\n  color: #00ff00;\n}\n\n/* Header Logout (positioned like original) */\n.header-logout2 {\n  position: absolute;\n  bottom: 2%;\n  left: 58%;\n  text-align: right;\n  width: 22em;\n  font-size: 14px;\n  font-family: Verdana, Arial, sans-serif;\n  color: white;\n  font-weight: bold;\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);\n}\n\n.header-logout a:link,\n.header-logout a:visited {\n  text-decoration: none;\n  font-weight: bold;\n  color: white;\n}\n\n.header-logout a:hover {\n  text-decoration: none;\n  font-size: 15px;\n  font-weight: bold;\n  color: #00ff00;\n}\n\n/* Header Image (AllStar logo) */\n.header-img {\n  position: absolute;\n  top: 2px;\n  right: 12px;\n}\n\n.custom-logo {\n  /* Default positioning - will be overridden by inline styles from global.inc */\n  position: absolute;\n  top: 20%;\n  right: 12%;\n}\n\n.datetime-display {\n  margin: 15px auto;\n  max-width: 880px;\n  padding: 10px;\n  text-align: center;\n  font-size: 1.1em;\n  font-weight: 500;\n  color: var(--text-color, #e0e0e0);\n  width: calc(100% + 40px);\n  margin-left: -20px;\n  margin-right: -20px;\n}\n\n.welcome-message {\n  margin: 20px auto;\n  max-width: 880px;\n  padding: 10px;\n  text-align: center;\n}\n\n/* Configuration buttons */\n.config-buttons {\n  display: flex;\n  gap: 10px;\n  margin-bottom: 20px;\n}\n\n.config-button {\n  padding: 8px 16px;\n  background-color: var(--background-color);\n  color: var(--text-color);\n  border: 1px solid var(--primary-color);\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 14px;\n  transition: all 0.3s ease;\n}\n\n.config-button.active {\n  background-color: var(--primary-color);\n  color: white;\n}\n\n.config-button:hover {\n  background-color: var(--primary-color);\n  color: white;\n}\n\n/* Target node indicator styling */\n.target-node-indicator {\n  margin: 5px 0;\n  padding: 5px 10px;\n  background-color: var(--primary-color);\n  color: white;\n  border-radius: 4px;\n  font-size: 14px;\n  text-align: center;\n  border: 1px solid var(--primary-color);\n}\n\n/* Control panel styling */\n.control-panel {\n  padding: 15px;\n  background-color: var(--background-color);\n  border: 1px solid var(--primary-color);\n  border-radius: 4px;\n  margin-bottom: 20px;\n}\n\n/* Original Supermon-ng layout styling */\n.perm-label {\n  font-size: 14px;\n  font-weight: bold;\n  color: var(--text-color);\n  display: inline-block;\n  margin-left: 5px;\n}\n\n.perm-label input[type=\"checkbox\"] {\n  margin: 0;\n}\n\n/* Perm input styling - matches original forms.css */\n.perm-input-detailed {\n  margin-top: 10px;\n  font-size: 16px;\n  border-radius: 15px;\n}\n\n.perm-input-large {\n  font-size: 22px;\n  margin-top: 15px;\n}\n\n.perm-label-detailed {\n  font-size: 16px;\n}\n\n.perm-label-large {\n  font-size: 22px;\n}\n\n.button-separator {\n  border: none;\n  height: 1px;\n  background-color: var(--border-color);\n  margin: 10px 0;\n}\n\n.section-label {\n  background-color: var(--table-header-bg);\n  color: var(--text-color);\n  padding: 8px 16px;\n  margin: 10px 0;\n  border-radius: 15px;\n  font-weight: bold;\n  font-size: 14px;\n  display: inline-block;\n  border: 1px solid var(--border-color);\n}\n\n.button-container {\n  margin-bottom: 5px;\n  margin-top: 5px;\n  text-align: center;\n}\n\n/* Button margin classes - matches original forms.css */\n.button-margin-top {\n  margin-top: 2px;\n}\n\n.button-margin-bottom {\n  margin-bottom: 5px;\n}\n\n.submit, .submit-large, .submit2 {\n  background-color: var(--table-header-bg);\n  color: var(--primary-color);\n  border: 1px solid var(--border-color);\n  padding: 5px 10px;\n  margin: 2px;\n  border-radius: 15px;\n  cursor: pointer;\n  font-weight: bold;\n  transition: all 0.3s ease;\n  font-size: 14px;\n}\n\n\n.submit:hover, .submit-large:hover, .submit2:hover {\n  background-color: var(--primary-color);\n  color: var(--background-color);\n  border-color: var(--primary-color);\n  transform: translateY(-1px);\n}\n\n.submit2 {\n  background-color: var(--table-header-bg);\n}\n\n.no-nodes-message {\n  text-align: center;\n  padding: 40px;\n  color: var(--text-color);\n  font-size: 16px;\n  opacity: 0.7;\n}\n\n/* Footer styling - matching original footer.inc */\n.clearer {\n  clear: both;\n}\n\n#footer {\n  text-align: center;\n  margin: 20px 0;\n  padding: 10px;\n  color: var(--text-color);\n  font-size: 14px;\n}\n\n/* Login modal */\n.login-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.login-modal-content {\n  background-color: var(--background-color);\n  padding: 30px;\n  border-radius: 8px;\n  border: 2px solid var(--primary-color);\n  max-width: 400px;\n  width: 90%;\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .dashboard {\n    padding: 10px;\n  }\n  \n  .header {\n    height: 150px;\n    width: calc(100% + 20px); /* Adjust for mobile padding (10px each side) */\n    margin-left: -10px; /* Offset mobile padding */\n    margin-right: -10px; /* Offset mobile padding */\n  }\n  \n  .header-title {\n    font-size: 20px;\n    left: 15px; /* Adjust for mobile header extension */\n  }\n  \n  .header-title2 {\n    left: 280px; /* Adjust callsign position for mobile */\n  }\n  \n  .header-tag {\n    left: 20px; /* Adjust for mobile header extension */\n  }\n  \n  .header2-tag {\n    left: 20px; /* Adjust for mobile header extension */\n  }\n  \n  .nav-tabs {\n    flex-direction: column;\n  }\n  \n  .button-group {\n    flex-direction: column;\n  }\n  \n  .node-selection {\n    flex-direction: column;\n    align-items: stretch;\n  }\n}\n\n/* Extra small screens */\n@media (max-width: 480px) {\n  .dashboard {\n    padding: 5px;\n  }\n  \n  .header {\n    width: calc(100% + 10px); /* Adjust for extra small padding */\n    margin-left: -5px;\n    margin-right: -5px;\n    height: 120px; /* Reduce height for small screens */\n  }\n  \n  .header-title {\n    font-size: 16px;\n    left: 10px;\n  }\n  \n  .header-title2 {\n    left: 200px; /* Further adjust for small screens */\n    font-size: 0.9em;\n  }\n  \n  .header-tag {\n    left: 10px;\n    font-size: 0.9em;\n  }\n  \n  .header2-tag {\n    left: 10px;\n    font-size: 0.8em;\n  }\n  \n  .node-dropdown,\n  .node-input {\n    min-width: auto;\n  }\n}\n</style>\n"],"file":"assets/Dashboard-qFOmSBh1.js"}