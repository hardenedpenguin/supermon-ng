import{r,w as M,f as l,l as c,k as a,g as e,t as d,C as k,F,p as w,h as x}from"./vendor-BDu8AGUg.js";import{_ as B,a as N}from"./index-Cd0Rm2MK.js";const D={class:"modal-body"},R={key:0,class:"loading"},T={key:1,class:"error-message"},E={key:2,class:"smlog-content"},I={class:"log-info"},O={class:"log-content"},P={key:0,class:"log-entries"},U={key:1,class:"empty-log"},j={class:"log-actions"},q=["disabled"],z={__name:"SMLog",props:{isVisible:{type:Boolean,default:!1}},emits:["update:isVisible"],setup(m,{emit:b}){const L=m,h=b,n=r(!1),i=r(""),f=r("Loading..."),v=r(""),u=r([]),g=r("");M(()=>L.isVisible,t=>{t&&(_(),y())});const p=()=>{h("update:isVisible",!1),_()},_=()=>{n.value=!1,i.value="",v.value="",u.value=[],g.value=""},y=async()=>{var t,s;n.value=!0,f.value="Loading Supermon log...",i.value="";try{const o=await N.post("/nodes/smlog");o.data.success?(v.value=o.data.data.log_file_path,u.value=o.data.data.log_content,g.value=o.data.data.timestamp):i.value=o.data.message||"Failed to load Supermon log"}catch(o){console.error("SMLog error:",o),i.value=((s=(t=o.response)==null?void 0:t.data)==null?void 0:s.message)||"Failed to load Supermon log"}finally{n.value=!1}},S=()=>{y()},C=t=>t?new Date(t).toLocaleString():"";return(t,s)=>m.isVisible?(a(),l("div",{key:0,class:"modal-overlay",onClick:p},[e("div",{class:"modal-content",onClick:s[0]||(s[0]=x(()=>{},["stop"]))},[e("div",{class:"modal-header"},[s[1]||(s[1]=e("h3",null,"Supermon Login/Out Log",-1)),e("button",{class:"close-button",onClick:p},"Ã—")]),e("div",D,[n.value?(a(),l("div",R,[s[2]||(s[2]=e("div",{class:"spinner"},null,-1)),e("p",null,d(f.value),1)])):c("",!0),i.value?(a(),l("div",T,[e("p",null,d(i.value),1)])):c("",!0),!n.value&&!i.value?(a(),l("div",E,[e("div",I,[e("p",null,[s[3]||(s[3]=e("strong",null,"File:",-1)),k(" "+d(v.value),1)]),e("p",null,[s[4]||(s[4]=e("strong",null,"Last Updated:",-1)),k(" "+d(C(g.value)),1)])]),e("div",O,[u.value&&u.value.length>0?(a(),l("div",P,[(a(!0),l(F,null,w(u.value,(o,V)=>(a(),l("div",{key:V,class:"log-entry"},d(o),1))),128))])):(a(),l("div",U,[...s[5]||(s[5]=[e("p",null,"No log entries found",-1)])]))]),e("div",j,[e("button",{onClick:S,class:"refresh-button",disabled:n.value},d(n.value?"Refreshing...":"Refresh Log"),9,q),e("button",{onClick:p,class:"close-button-secondary"}," Close ")])])):c("",!0)])])])):c("",!0)}},H=B(z,[["__scopeId","data-v-299e7acd"]]);export{H as default};
//# sourceMappingURL=SMLog-BNGadzfT.js.map
