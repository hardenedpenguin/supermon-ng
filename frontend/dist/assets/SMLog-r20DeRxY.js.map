{"version":3,"file":"SMLog-r20DeRxY.js","sources":["../../src/components/SMLog.vue"],"sourcesContent":["<template>\n  <div v-if=\"isVisible\" class=\"modal-overlay\" @click=\"closeModal\">\n    <div class=\"modal-content\" @click.stop>\n      <div class=\"modal-header\">\n        <h3>Supermon Login/Out Log</h3>\n        <button class=\"close-button\" @click=\"closeModal\">&times;</button>\n      </div>\n\n      <div class=\"modal-body\">\n        <!-- Loading State -->\n        <div v-if=\"loading\" class=\"loading\">\n          <div class=\"spinner\"></div>\n          <p>{{ loadingMessage }}</p>\n        </div>\n\n        <!-- Error State -->\n        <div v-if=\"error\" class=\"error-message\">\n          <p>{{ error }}</p>\n        </div>\n\n        <!-- Main Content -->\n        <div v-if=\"!loading && !error\" class=\"smlog-content\">\n          <!-- Log File Info -->\n          <div class=\"log-info\">\n            <p><strong>File:</strong> {{ logFilePath }}</p>\n            <p><strong>Last Updated:</strong> {{ formatTimestamp(timestamp) }}</p>\n          </div>\n\n          <!-- Log Content -->\n          <div class=\"log-content\">\n            <div v-if=\"logContent && logContent.length > 0\" class=\"log-entries\">\n              <div \n                v-for=\"(entry, index) in logContent\" \n                :key=\"index\" \n                class=\"log-entry\"\n              >\n                {{ entry }}\n              </div>\n            </div>\n            <div v-else class=\"empty-log\">\n              <p>No log entries found</p>\n            </div>\n          </div>\n\n          <!-- Actions -->\n          <div class=\"log-actions\">\n            <button @click=\"refreshLog\" class=\"refresh-button\" :disabled=\"loading\">\n              {{ loading ? 'Refreshing...' : 'Refresh Log' }}\n            </button>\n            <button @click=\"closeModal\" class=\"close-button-secondary\">\n              Close\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, watch } from 'vue'\nimport { api } from '@/utils/api'\n\nconst props = defineProps({\n  isVisible: {\n    type: Boolean,\n    default: false\n  }\n})\n\nconst emit = defineEmits(['update:isVisible'])\n\n// Reactive state\nconst loading = ref(false)\nconst error = ref('')\nconst loadingMessage = ref('Loading...')\nconst logFilePath = ref('')\nconst logContent = ref([])\nconst timestamp = ref('')\n\n// Watch for modal visibility changes\nwatch(() => props.isVisible, (newVal) => {\n  if (newVal) {\n    resetState()\n    loadSMLog()\n  }\n})\n\n// Methods\nconst closeModal = () => {\n  emit('update:isVisible', false)\n  resetState()\n}\n\nconst resetState = () => {\n  loading.value = false\n  error.value = ''\n  logFilePath.value = ''\n  logContent.value = []\n  timestamp.value = ''\n}\n\nconst loadSMLog = async () => {\n  loading.value = true\n  loadingMessage.value = 'Loading Supermon log...'\n  error.value = ''\n\n  try {\n    const response = await api.post('/nodes/smlog')\n\n    if (response.data.success) {\n      logFilePath.value = response.data.data.log_file_path\n      logContent.value = response.data.data.log_content\n      timestamp.value = response.data.data.timestamp\n    } else {\n      error.value = response.data.message || 'Failed to load Supermon log'\n    }\n  } catch (err) {\n    console.error('SMLog error:', err)\n    error.value = err.response?.data?.message || 'Failed to load Supermon log'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst refreshLog = () => {\n  loadSMLog()\n}\n\nconst formatTimestamp = (timestamp) => {\n  if (!timestamp) return ''\n  return new Date(timestamp).toLocaleString()\n}\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background-color: var(--background-color);\n  border-radius: 8px;\n  width: 95%;\n  max-width: 1000px;\n  max-height: 90vh;\n  overflow: hidden;\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n  border: 1px solid var(--border-color);\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 1.5rem;\n  border-bottom: 1px solid var(--border-color);\n  background-color: var(--container-bg);\n}\n\n.modal-header h3 {\n  margin: 0;\n  color: var(--text-color);\n}\n\n.close-button {\n  background: none;\n  border: none;\n  font-size: 1.5rem;\n  cursor: pointer;\n  color: var(--text-color);\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.close-button:hover {\n  color: var(--link-color);\n}\n\n.modal-body {\n  padding: 1.5rem;\n  max-height: calc(90vh - 120px);\n  overflow-y: auto;\n}\n\n.loading {\n  text-align: center;\n  padding: 2rem;\n}\n\n.spinner {\n  border: 3px solid var(--border-color);\n  border-top: 3px solid var(--link-color);\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 1rem;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.error-message {\n  background-color: var(--error-bg);\n  color: var(--error-color);\n  padding: 1rem;\n  border-radius: 4px;\n  margin: 1rem 0;\n}\n\n.smlog-content {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n\n.log-info {\n  background-color: var(--container-bg);\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  padding: 1rem;\n}\n\n.log-info p {\n  margin: 0.5rem 0;\n  color: var(--text-color);\n  font-size: 0.9rem;\n}\n\n.log-content {\n  background-color: #000;\n  border: 1px solid var(--border-color);\n  border-radius: 4px;\n  padding: 1rem;\n  max-height: 400px;\n  overflow-y: auto;\n  font-family: 'Courier New', monospace;\n  font-size: 0.85rem;\n  line-height: 1.4;\n}\n\n.log-entries {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n}\n\n.log-entry {\n  color: #00ff00;\n  padding: 0.25rem 0;\n  border-bottom: 1px solid #333;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n}\n\n.log-entry:last-child {\n  border-bottom: none;\n}\n\n.empty-log {\n  text-align: center;\n  padding: 2rem;\n  color: #666;\n  font-style: italic;\n}\n\n.log-actions {\n  display: flex;\n  gap: 1rem;\n  justify-content: flex-end;\n  padding-top: 1rem;\n  border-top: 1px solid var(--border-color);\n}\n\n.refresh-button, .close-button-secondary {\n  padding: 0.75rem 1.5rem;\n  border: none;\n  border-radius: 4px;\n  font-size: 1rem;\n  cursor: pointer;\n  transition: background-color 0.3s ease;\n}\n\n.refresh-button {\n  background-color: var(--primary-color);\n  color: white;\n}\n\n.refresh-button:hover:not(:disabled) {\n  background-color: var(--link-color);\n}\n\n.refresh-button:disabled {\n  background-color: var(--secondary-bg);\n  cursor: not-allowed;\n}\n\n.close-button-secondary {\n  background-color: var(--secondary-bg);\n  color: var(--text-color);\n  border: 1px solid var(--border-color);\n}\n\n.close-button-secondary:hover {\n  background-color: var(--border-color);\n}\n\n@media (max-width: 768px) {\n  .modal-content {\n    width: 98%;\n    max-width: none;\n  }\n  \n  .log-actions {\n    flex-direction: column;\n  }\n  \n  .log-content {\n    font-size: 0.8rem;\n  }\n}\n</style>\n"],"names":["props","__props","emit","__emit","loading","ref","error","loadingMessage","logFilePath","logContent","timestamp","watch","newVal","resetState","loadSMLog","closeModal","response","api","err","_b","_a","refreshLog","formatTimestamp","_createElementBlock","_createElementVNode","_cache","_hoisted_1","_openBlock","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createTextVNode","_toDisplayString","_hoisted_6","_hoisted_7","_Fragment","_renderList","entry","index","_hoisted_8","_hoisted_9","_hoisted_10"],"mappings":"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"}