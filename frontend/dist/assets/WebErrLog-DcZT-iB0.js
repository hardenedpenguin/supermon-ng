import{r as c,w as D,f as a,l as u,k as r,g as s,t as i,C as h,F as p,p as b,m as M,h as S}from"./vendor-BDu8AGUg.js";import{_ as x,a as y}from"./index-Cd0Rm2MK.js";const R={class:"modal-body"},T={key:0,class:"loading"},z={key:1,class:"error-message"},U={key:2,class:"weberrlog-content"},j={key:0,class:"log-file-info"},q={key:1,class:"log-entries"},A={class:"table-container"},G={class:"log-table"},H={key:0,class:"line-number"},J={key:2,class:"log-content"},K={key:2,class:"no-entries"},O={key:3,class:"refresh-section"},P=["disabled"],Q={__name:"WebErrLog",props:{isVisible:{type:Boolean,default:!1}},emits:["update:isVisible"],setup(_,{emit:k}){const L=_,C=k,d=c(!1),v=c(!1),n=c(null),o=c({}),m=c("Loading web error log...");D(()=>L.isVisible,t=>{t&&F()});const w=()=>{C("update:isVisible",!1),V()},V=()=>{d.value=!1,v.value=!1,n.value=null,o.value={}},F=async()=>{var t,e;d.value=!0,n.value=null,m.value="Loading web error log...";try{const l=await y.post("/nodes/weberrlog");l.data.success?o.value=l.data.data:n.value=l.data.message||"Failed to load web error log"}catch(l){console.error("Web error log error:",l),n.value=((e=(t=l.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to load web error log"}finally{d.value=!1}},E=async()=>{var t,e;v.value=!0,n.value=null;try{const l=await y.post("/nodes/weberrlog");l.data.success?o.value=l.data.data:n.value=l.data.message||"Failed to refresh web error log"}catch(l){console.error("Web error log refresh error:",l),n.value=((e=(t=l.response)==null?void 0:t.data)==null?void 0:e.message)||"Failed to refresh web error log"}finally{v.value=!1}},W=t=>t?new Date(t).toLocaleString():"",B=t=>{const e=t.toLowerCase();return e==="error"?"level-error":e==="warn"||e==="warning"?"level-warning":e==="info"?"level-info":e==="debug"?"level-debug":"level-default"};return(t,e)=>_.isVisible?(r(),a("div",{key:0,class:"modal-overlay",onClick:w},[s("div",{class:"modal-content",onClick:e[0]||(e[0]=S(()=>{},["stop"]))},[s("div",{class:"modal-header"},[e[1]||(e[1]=s("h3",null,"Web Error Log",-1)),s("button",{class:"close-button",onClick:w},"Ã—")]),s("div",R,[d.value?(r(),a("div",T,[e[2]||(e[2]=s("div",{class:"spinner"},null,-1)),s("p",null,i(m.value),1)])):u("",!0),n.value?(r(),a("div",z,[s("p",null,i(n.value),1)])):u("",!0),!d.value&&!n.value?(r(),a("div",U,[o.value.log_file_path?(r(),a("div",j,[s("p",null,[e[3]||(e[3]=s("strong",null,"Log File:",-1)),h(" "+i(o.value.log_file_path),1)]),s("p",null,[e[4]||(e[4]=s("strong",null,"Last Updated:",-1)),h(" "+i(W(o.value.timestamp)),1)])])):u("",!0),o.value.parsed_data&&o.value.parsed_data.rows&&o.value.parsed_data.rows.length>0?(r(),a("div",q,[e[5]||(e[5]=s("h4",null,"Web Error Log Entries",-1)),s("div",A,[s("table",G,[s("thead",null,[s("tr",null,[(r(!0),a(p,null,b(o.value.parsed_data.headers,l=>(r(),a("th",{key:l,class:"log-header"},i(l),1))),128))])]),s("tbody",null,[(r(!0),a(p,null,b(o.value.parsed_data.rows,(l,N)=>(r(),a("tr",{key:N,class:"log-row"},[(r(!0),a(p,null,b(l,(g,f)=>(r(),a("td",{key:f,class:"log-cell"},[f===0?(r(),a("span",H,i(g),1)):f===2?(r(),a("span",{key:1,class:M(["log-level",B(g)])},i(g),3)):(r(),a("span",J,i(g),1))]))),128))]))),128))])])])])):o.value.parsed_data&&(!o.value.parsed_data.rows||o.value.parsed_data.rows.length===0)?(r(),a("div",K,[...e[6]||(e[6]=[s("p",null,"No error log entries found in the web error log file.",-1)])])):u("",!0)])):u("",!0),!d.value&&!n.value?(r(),a("div",O,[s("button",{onClick:E,class:"refresh-button",disabled:v.value},i(v.value?"Refreshing...":"Refresh Log"),9,P)])):u("",!0)])])])):u("",!0)}},Z=x(Q,[["__scopeId","data-v-908fe29e"]]);export{Z as default};
//# sourceMappingURL=WebErrLog-DcZT-iB0.js.map
