import{e as L,r as d,w,o as x,G as A,k as n,q as T,P as B,T as F,Q as M,f as r,l as N,g as o,t as c,C as b}from"./vendor-BDu8AGUg.js";import{a as V,_ as E}from"./index-ixAHyd21.js";const P={key:0,class:"astlog-modal"},R={class:"astlog-content"},q={class:"astlog-body"},D={key:0,class:"loading"},G={key:1,class:"error-message"},I={key:2,class:"log-content"},Q={class:"log-info"},S={class:"log-controls"},U=["disabled"],j={class:"log-viewer-pre"},z={key:3,class:"empty-state"},H=L({__name:"AstLog",props:{open:{type:Boolean}},emits:["update:open"],setup(f,{emit:m}){const y=f,_=m,a=d(!1),l=d(""),i=d(""),u=d(""),p=d(""),v=async()=>{var s,e;a.value=!0,l.value="";try{const t=await V.get("/config/astlog");t.data.success?(i.value=t.data.content,u.value=t.data.path,p.value=t.data.lastModified):l.value=t.data.message||"Failed to load Asterisk log"}catch(t){const h=t;l.value=((e=(s=h.response)==null?void 0:s.data)==null?void 0:e.message)||"Failed to load Asterisk log"}finally{a.value=!1}},k=async()=>{await v()},C=async()=>{try{await navigator.clipboard.writeText(i.value),alert("Log content copied to clipboard!")}catch(s){console.error("Failed to copy to clipboard:",s),alert("Failed to copy to clipboard")}},g=()=>{_("update:open",!1),a.value=!1,l.value="",i.value="",u.value="",p.value=""};return w(()=>y.open,s=>{s&&v()}),x(()=>{y.open&&v()}),(s,e)=>(n(),A(M,{to:"body"},[T(F,{name:"modal"},{default:B(()=>[f.open?(n(),r("div",P,[o("div",{class:"astlog-overlay",onClick:g}),o("div",R,[o("div",{class:"astlog-header"},[e[0]||(e[0]=o("h2",null,"Asterisk Messages Log Viewer",-1)),o("button",{class:"close-button",onClick:g},"Ã—")]),o("div",q,[a.value?(n(),r("div",D,[...e[1]||(e[1]=[o("p",null,"Loading Asterisk log...",-1)])])):l.value?(n(),r("div",G,[o("p",null,c(l.value),1)])):i.value?(n(),r("div",I,[o("div",Q,[o("p",null,[e[2]||(e[2]=o("strong",null,"Log File:",-1)),b(" "+c(u.value),1)]),o("p",null,[e[3]||(e[3]=o("strong",null,"Last Updated:",-1)),b(" "+c(p.value),1)])]),e[4]||(e[4]=o("hr",null,null,-1)),o("div",S,[o("button",{onClick:k,disabled:a.value,class:"refresh-btn"},c(a.value?"Refreshing...":"Refresh Log"),9,U),o("button",{onClick:C,class:"copy-btn"}," Copy to Clipboard ")]),o("pre",j,c(i.value),1)])):(n(),r("div",z,[...e[5]||(e[5]=[o("p",null,"No log content available.",-1)])]))]),o("div",{class:"astlog-footer"},[o("div",{class:"button-group"},[o("input",{type:"button",value:"Close",onClick:g,class:"close-btn"})])])])])):N("",!0)]),_:1})]))}}),O=E(H,[["__scopeId","data-v-2db9dfb3"]]);export{O as default};
//# sourceMappingURL=AstLog-CF4JGWaS.js.map
