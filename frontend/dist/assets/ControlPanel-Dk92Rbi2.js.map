{"version":3,"file":"ControlPanel-Dk92Rbi2.js","sources":["../../src/components/ControlPanel.vue"],"sourcesContent":["<template>\n  <div v-if=\"isVisible\" class=\"modal-overlay\" @click=\"closeModal\">\n    <div class=\"modal-content\" @click.stop>\n      <div class=\"modal-header\">\n        <h2>Control Panel</h2>\n        <button class=\"close-button\" @click=\"closeModal\">&times;</button>\n      </div>\n      \n      <div class=\"modal-body\">\n        <div v-if=\"loading\" class=\"loading\">\n          <div class=\"spinner\"></div>\n          <p>Loading control panel commands...</p>\n        </div>\n        \n        <div v-else-if=\"error\" class=\"error-message\">\n          <p>{{ error }}</p>\n        </div>\n        \n        <div v-else-if=\"!hasCommands\" class=\"no-commands\">\n          <h3>No Control Panel Commands Configured</h3>\n          <p>To use the Control Panel, you need to configure commands in:</p>\n          <code>user_files/controlpanel.ini</code>\n          <p>Edit the file and uncomment the commands you want to use by removing the semicolon (;) from the beginning of the lines.</p>\n        </div>\n        \n        <div v-else class=\"control-panel\">\n          <div class=\"node-info\">\n            <p><strong>Sending Command to node:</strong> {{ localNode }}</p>\n          </div>\n          \n          <div class=\"command-section\">\n            <label for=\"commandSelect\">Control command (select one):</label>\n            <select \n              id=\"commandSelect\" \n              v-model=\"selectedCommand\" \n              class=\"command-select\"\n              :disabled=\"executing\"\n            >\n              <option value=\"\">-- Select a command --</option>\n              <option \n                v-for=\"(label, index) in commands.labels\" \n                :key=\"index\"\n                :value=\"commands.cmds[index]\"\n              >\n                {{ label }}\n              </option>\n            </select>\n          </div>\n          \n          <div class=\"execute-section\">\n            <button \n              @click=\"executeCommand\" \n              :disabled=\"!selectedCommand || executing\"\n              class=\"execute-button\"\n            >\n              <span v-if=\"executing\">Executing...</span>\n              <span v-else>Execute</span>\n            </button>\n          </div>\n          \n          <div v-if=\"result\" class=\"result-section\">\n            <h4>Command Result:</h4>\n            <div class=\"result-content\" :class=\"{ 'error': result.error }\">\n              <pre>{{ result.message }}</pre>\n            </div>\n          </div>\n        </div>\n      </div>\n      \n      <div class=\"modal-footer\">\n        <button @click=\"closeModal\" class=\"close-window-button\">Close Window</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, computed, watch } from 'vue'\nimport { api } from '@/utils/api'\n\n// Props\nconst props = defineProps({\n  isVisible: {\n    type: Boolean,\n    default: false\n  },\n  localNode: {\n    type: String,\n    required: true\n  }\n})\n\n// Emits\nconst emit = defineEmits(['update:isVisible'])\n\n// Reactive state\nconst loading = ref(false)\nconst error = ref('')\nconst commands = ref({ labels: [], cmds: [] })\nconst selectedCommand = ref('')\nconst executing = ref(false)\nconst result = ref(null)\n\n// Computed\nconst hasCommands = computed(() => {\n  const has = commands.value.labels && commands.value.labels.length > 0\n  \n  return has\n})\n\n// Methods\nconst closeModal = () => {\n  emit('update:isVisible', false)\n  resetState()\n}\n\nconst resetState = () => {\n  loading.value = false\n  error.value = ''\n  commands.value = { labels: [], cmds: [] }\n  selectedCommand.value = ''\n  executing.value = false\n  result.value = null\n}\n\nconst loadCommands = async () => {\n  if (!props.localNode) {\n    error.value = 'Please select a node first'\n    return\n  }\n  \n  loading.value = true\n  error.value = ''\n  \n  try {\n    const response = await api.get(`/config/controlpanel?node=${props.localNode}`)\n    \n    if (response.data.success) {\n      commands.value = response.data.data\n    } else {\n      error.value = response.data.message || 'Failed to load control panel commands'\n    }\n  } catch (err) {\n    console.error('Error loading control panel commands:', err)\n    error.value = 'Failed to load control panel commands. Please try again.'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst executeCommand = async () => {\n  if (!selectedCommand.value || !props.localNode) return\n  \n  executing.value = true\n  result.value = null\n  \n  try {\n    const response = await api.post('/config/controlpanel/execute', {\n      node: props.localNode,\n      command: selectedCommand.value\n    })\n    \n    if (response.data.success) {\n      result.value = {\n        error: false,\n        message: response.data.data.result || 'Command executed successfully'\n      }\n    } else {\n      result.value = {\n        error: true,\n        message: response.data.message || 'Command execution failed'\n      }\n    }\n  } catch (err) {\n    console.error('Error executing command:', err)\n    result.value = {\n      error: true,\n      message: 'Failed to execute command. Please try again.'\n    }\n  } finally {\n    executing.value = false\n  }\n}\n\n// Watch for visibility changes\nwatch(() => props.isVisible, (newValue) => {\n  if (newValue && props.localNode) {\n    loadCommands()\n  }\n})\n\n// Watch for localNode changes\nwatch(() => props.localNode, (newValue) => {\n  if (props.isVisible && newValue) {\n    loadCommands()\n  }\n})\n</script>\n\n<style scoped>\n.modal-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n}\n\n.modal-content {\n  background: #2d3748;\n  border-radius: 8px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);\n  max-width: 600px;\n  width: 90%;\n  max-height: 80vh;\n  overflow-y: auto;\n  color: #e2e8f0;\n}\n\n.modal-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #4a5568;\n  background: #1a202c;\n  border-radius: 8px 8px 0 0;\n}\n\n.modal-header h2 {\n  margin: 0;\n  color: #e2e8f0;\n  font-size: 1.5rem;\n}\n\n.close-button {\n  background: none;\n  border: none;\n  font-size: 24px;\n  cursor: pointer;\n  color: #a0aec0;\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  transition: background-color 0.2s;\n}\n\n.close-button:hover {\n  background-color: #4a5568;\n  color: #e2e8f0;\n}\n\n.modal-body {\n  padding: 20px;\n}\n\n.loading {\n  text-align: center;\n  padding: 40px 20px;\n}\n\n.spinner {\n  border: 3px solid #f3f3f3;\n  border-top: 3px solid #007bff;\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  animation: spin 1s linear infinite;\n  margin: 0 auto 20px;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n.error-message {\n  background: #742a2a;\n  color: #feb2b2;\n  padding: 15px;\n  border-radius: 4px;\n  border: 1px solid #c53030;\n  text-align: center;\n}\n\n.no-commands {\n  text-align: center;\n  padding: 20px;\n}\n\n.no-commands h3 {\n  color: #a0aec0;\n  margin-bottom: 15px;\n}\n\n.no-commands code {\n  background: #4a5568;\n  color: #e2e8f0;\n  padding: 8px 12px;\n  border-radius: 4px;\n  font-family: monospace;\n  display: inline-block;\n  margin: 10px 0;\n}\n\n.control-panel {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n.node-info {\n  background: #2c5282;\n  padding: 15px;\n  border-radius: 4px;\n  border-left: 4px solid #63b3ed;\n}\n\n.node-info p {\n  margin: 0;\n  color: #bee3f8;\n}\n\n.command-section {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.command-section label {\n  font-weight: 600;\n  color: #e2e8f0;\n}\n\n.command-select {\n  padding: 12px;\n  border: 2px solid #4a5568;\n  border-radius: 4px;\n  font-size: 14px;\n  background: #1a202c;\n  color: #e2e8f0;\n  transition: border-color 0.2s;\n}\n\n.command-select:focus {\n  outline: none;\n  border-color: #63b3ed;\n}\n\n.command-select:disabled {\n  background: #2d3748;\n  color: #718096;\n  cursor: not-allowed;\n}\n\n.execute-section {\n  display: flex;\n  justify-content: center;\n}\n\n.execute-button {\n  background: #3182ce;\n  color: white;\n  border: none;\n  padding: 12px 30px;\n  border-radius: 4px;\n  font-size: 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: background-color 0.2s;\n  min-width: 120px;\n}\n\n.execute-button:hover:not(:disabled) {\n  background: #2c5282;\n}\n\n.execute-button:disabled {\n  background: #4a5568;\n  cursor: not-allowed;\n}\n\n.result-section {\n  margin-top: 20px;\n  padding: 15px;\n  border-radius: 4px;\n  background: #1a202c;\n  border: 1px solid #4a5568;\n}\n\n.result-section h4 {\n  margin: 0 0 10px 0;\n  color: #e2e8f0;\n}\n\n.result-content {\n  background: #2d3748;\n  color: #e2e8f0;\n  padding: 12px;\n  border-radius: 4px;\n  border: 1px solid #4a5568;\n}\n\n.result-content.error {\n  background: #742a2a;\n  border-color: #c53030;\n  color: #feb2b2;\n}\n\n.result-content pre {\n  margin: 0;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  font-family: monospace;\n  font-size: 13px;\n  line-height: 1.4;\n  color: #e2e8f0;\n}\n\n.modal-footer {\n  padding: 20px;\n  border-top: 1px solid #4a5568;\n  text-align: center;\n  background: #1a202c;\n  border-radius: 0 0 8px 8px;\n}\n\n.close-window-button {\n  background: #4a5568;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  border-radius: 4px;\n  font-size: 14px;\n  cursor: pointer;\n  transition: background-color 0.2s;\n}\n\n.close-window-button:hover {\n  background: #2d3748;\n}\n</style>\n"],"names":["props","__props","emit","__emit","loading","ref","error","commands","selectedCommand","executing","result","hasCommands","computed","closeModal","resetState","loadCommands","response","api","err","executeCommand","watch","newValue","_createElementBlock","_createElementVNode","_cache","_hoisted_1","_openBlock","_hoisted_2","_hoisted_3","_hoisted_5","_hoisted_6","_createTextVNode","_hoisted_7","$event","_Fragment","label","index","_hoisted_9","_hoisted_10","_hoisted_14","_normalizeClass","_toDisplayString","_hoisted_4"],"mappings":"kpBAiFA,MAAMA,EAAQC,EAYRC,EAAOC,EAGPC,EAAUC,EAAI,EAAK,EACnBC,EAAQD,EAAI,EAAE,EACdE,EAAWF,EAAI,CAAE,OAAQ,CAAA,EAAI,KAAM,CAAA,CAAE,CAAE,EACvCG,EAAkBH,EAAI,EAAE,EACxBI,EAAYJ,EAAI,EAAK,EACrBK,EAASL,EAAI,IAAI,EAGjBM,EAAcC,EAAS,IACfL,EAAS,MAAM,QAAUA,EAAS,MAAM,OAAO,OAAS,CAGrE,EAGKM,EAAa,IAAM,CACvBX,EAAK,mBAAoB,EAAK,EAC9BY,EAAU,CACZ,EAEMA,EAAa,IAAM,CACvBV,EAAQ,MAAQ,GAChBE,EAAM,MAAQ,GACdC,EAAS,MAAQ,CAAE,OAAQ,CAAA,EAAI,KAAM,CAAA,CAAE,EACvCC,EAAgB,MAAQ,GACxBC,EAAU,MAAQ,GAClBC,EAAO,MAAQ,IACjB,EAEMK,EAAe,SAAY,CAC/B,GAAI,CAACf,EAAM,UAAW,CACpBM,EAAM,MAAQ,6BACd,MACF,CAEAF,EAAQ,MAAQ,GAChBE,EAAM,MAAQ,GAEd,GAAI,CACF,MAAMU,EAAW,MAAMC,EAAI,IAAI,6BAA6BjB,EAAM,SAAS,EAAE,EAEzEgB,EAAS,KAAK,QAChBT,EAAS,MAAQS,EAAS,KAAK,KAE/BV,EAAM,MAAQU,EAAS,KAAK,SAAW,uCAE3C,OAASE,EAAK,CACZ,QAAQ,MAAM,wCAAyCA,CAAG,EAC1DZ,EAAM,MAAQ,0DAChB,QAAC,CACCF,EAAQ,MAAQ,EAClB,CACF,EAEMe,EAAiB,SAAY,CACjC,GAAI,GAACX,EAAgB,OAAS,CAACR,EAAM,WAErC,CAAAS,EAAU,MAAQ,GAClBC,EAAO,MAAQ,KAEf,GAAI,CACF,MAAMM,EAAW,MAAMC,EAAI,KAAK,+BAAgC,CAC9D,KAAMjB,EAAM,UACZ,QAASQ,EAAgB,KAC/B,CAAK,EAEGQ,EAAS,KAAK,QAChBN,EAAO,MAAQ,CACb,MAAO,GACP,QAASM,EAAS,KAAK,KAAK,QAAU,+BAC9C,EAEMN,EAAO,MAAQ,CACb,MAAO,GACP,QAASM,EAAS,KAAK,SAAW,0BAC1C,CAEE,OAASE,EAAK,CACZ,QAAQ,MAAM,2BAA4BA,CAAG,EAC7CR,EAAO,MAAQ,CACb,MAAO,GACP,QAAS,8CACf,CACE,QAAC,CACCD,EAAU,MAAQ,EACpB,EACF,EAGA,OAAAW,EAAM,IAAMpB,EAAM,UAAYqB,GAAa,CACrCA,GAAYrB,EAAM,WACpBe,EAAY,CAEhB,CAAC,EAGDK,EAAM,IAAMpB,EAAM,UAAYqB,GAAa,CACrCrB,EAAM,WAAaqB,GACrBN,EAAY,CAEhB,CAAC,SAnMYd,EAAA,eAAXqB,EAwEM,MAAA,OAxEgB,MAAM,gBAAiB,QAAOT,IAClDU,EAsEM,MAAA,CAtED,MAAM,gBAAiB,sBAAD,IAAA,CAAA,EAAW,CAAA,MAAA,CAAA,KACpCA,EAGM,MAAA,CAHD,MAAM,cAAc,EAAA,CACvBC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAD,EAAsB,UAAlB,gBAAa,EAAA,GACjBA,EAAiE,SAAA,CAAzD,MAAM,eAAgB,QAAOV,GAAY,GAAO,IAG1DU,EA2DM,MA3DNE,EA2DM,CA1DOrB,EAAA,OAAXsB,IAAAJ,EAGM,MAHNK,EAGM,CAAA,GAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAFJD,EAA2B,MAAA,CAAtB,MAAM,SAAS,EAAA,KAAA,EAAA,EACpBA,EAAwC,SAArC,oCAAiC,EAAA,OAGtBjB,EAAA,OAAhBoB,IAAAJ,EAEM,MAFNM,EAEM,CADJL,EAAkB,WAAZjB,EAAA,KAAK,EAAA,CAAA,KAGIK,EAAA,OAOjBe,IAAAJ,EAyCM,MAzCNO,EAyCM,CAxCJN,EAEM,MAFNO,EAEM,CADJP,EAAgE,IAAA,KAAA,CAA7DC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAD,EAAyC,cAAjC,2BAAwB,EAAA,GAASQ,EAAA,MAAI9B,EAAA,SAAS,EAAA,CAAA,MAG3DsB,EAiBM,MAjBNS,EAiBM,CAhBJR,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAD,EAAgE,QAAA,CAAzD,IAAI,eAAe,EAAC,gCAA6B,EAAA,KACxDA,EAcS,SAAA,CAbP,GAAG,qDACMf,EAAe,MAAAyB,GACxB,MAAM,iBACL,SAAUxB,EAAA,QAEXe,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAD,EAAgD,SAAA,CAAxC,MAAM,EAAE,EAAC,yBAAsB,EAAA,IACvCG,EAAA,EAAA,EAAAJ,EAMSY,SALkB3B,EAAA,MAAS,OAAM,CAAhC4B,EAAOC,SADjBd,EAMS,SAAA,CAJN,IAAKc,EACL,MAAO7B,EAAA,MAAS,KAAK6B,CAAK,KAExBD,CAAK,EAAA,EAAAE,CAAA,oBAVD7B,EAAA,KAAe,MAe5Be,EASM,MATNe,EASM,CARJf,EAOS,SAAA,CANN,QAAOJ,EACP,SAAQ,CAAGX,EAAA,OAAmBC,EAAA,MAC/B,MAAM,mBAEMA,EAAA,OAAZiB,EAAA,EAAAJ,EAA0C,SAAnB,cAAY,IACnCI,EAAA,EAAAJ,EAA2B,SAAd,SAAO,WAIbZ,EAAA,OAAXgB,IAAAJ,EAKM,MALNiB,EAKM,CAJJf,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAD,EAAwB,UAApB,kBAAe,EAAA,GACnBA,EAEM,MAAA,CAFD,MAAKiB,EAAA,CAAC,iBAAgB,CAAA,MAAoB9B,EAAA,MAAO,MAAK,CAAA,IACzDa,EAA+B,MAAA,KAAAkB,EAAvB/B,EAAA,MAAO,OAAO,EAAA,CAAA,sBA7C5BgB,IAAAJ,EAKM,MALNoB,EAKM,CAAA,GAAAlB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAJJD,EAA6C,UAAzC,uCAAoC,EAAA,EACxCA,EAAmE,SAAhE,+DAA4D,EAAA,EAC/DA,EAAwC,YAAlC,8BAA2B,EAAA,EACjCA,EAA8H,SAA3H,0HAAuH,EAAA,SA+C9HA,EAEM,MAAA,CAFD,MAAM,cAAc,EAAA,CACvBA,EAA6E,SAAA,CAApE,QAAOV,EAAY,MAAM,uBAAsB,cAAY"}