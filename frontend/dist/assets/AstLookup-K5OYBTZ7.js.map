{"version":3,"file":"AstLookup-K5OYBTZ7.js","sources":["../../src/components/AstLookup.vue"],"sourcesContent":["<template>\n  <Teleport to=\"body\">\n    <Transition name=\"modal\">\n      <div v-if=\"open\" class=\"astlookup-modal\">\n        <div class=\"astlookup-overlay\" @click=\"closeModal\"></div>\n        <div class=\"astlookup-content\">\n          <div class=\"astlookup-header\">\n            <h2>AllStar Node Lookup</h2>\n            <button class=\"close-button\" @click=\"closeModal\">&times;</button>\n          </div>\n\n          <div class=\"astlookup-body\">\n            <!-- Lookup Form -->\n            <div class=\"lookup-form\">\n              <div class=\"form-group\">\n                <label for=\"lookupInput\">Node/Callsign to Lookup:</label>\n                <input \n                  type=\"text\" \n                  id=\"lookupInput\"\n                  v-model=\"lookupNode\"\n                  placeholder=\"Enter node number or callsign\"\n                  maxlength=\"20\"\n                  @keyup.enter=\"performLookup\"\n                  :disabled=\"loading\"\n                >\n              </div>\n              \n              <div class=\"form-actions\">\n                <button \n                  @click=\"performLookup\" \n                  :disabled=\"loading\"\n                  class=\"lookup-btn\"\n                >\n                  {{ loading ? 'Searching...' : 'Lookup' }}\n                </button>\n                <button @click=\"clearResults\" class=\"clear-btn\">\n                  Clear\n                </button>\n              </div>\n            </div>\n\n            <!-- Loading State -->\n            <div v-if=\"loading\" class=\"loading-state\">\n              <p>Searching databases...</p>\n            </div>\n\n            <!-- Error State -->\n            <div v-else-if=\"error\" class=\"error-state\">\n              <p>{{ error }}</p>\n            </div>\n\n            <!-- Results -->\n            <div v-else-if=\"results.length > 0\" class=\"lookup-results\">\n              <h3>Lookup Results for: {{ lookupNode }}</h3>\n              \n              <div class=\"results-table-container\">\n                <table class=\"results-table\">\n                  <thead>\n                    <tr>\n                      <th>Node</th>\n                      <th>Callsign</th>\n                      <th>Description</th>\n                      <th>Location</th>\n                      <th>Status</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <template v-for=\"(section, sectionIndex) in results\" :key=\"sectionIndex\">\n                      <!-- Section Header -->\n                      <tr class=\"section-header\">\n                        <td colspan=\"5\">{{ section.type }}</td>\n                      </tr>\n                      \n                      <!-- Section Results -->\n                      <tr v-for=\"(result, resultIndex) in section.results\" :key=\"`${sectionIndex}-${resultIndex}`\" class=\"result-row\">\n                        <td>{{ result.node }}</td>\n                        <td>{{ result.callsign }}</td>\n                        <td>{{ result.description }}</td>\n                        <td>{{ result.location }}</td>\n                        <td :class=\"getStatusClass(result.status)\">{{ result.status }}</td>\n                      </tr>\n                      \n                      <!-- No Results Message -->\n                      <tr v-if=\"section.results.length === 0\" class=\"no-results\">\n                        <td colspan=\"5\">....Nothing Found....</td>\n                      </tr>\n                    </template>\n                  </tbody>\n                </table>\n              </div>\n            </div>\n\n            <!-- Empty State -->\n            <div v-else-if=\"hasSearched\" class=\"empty-state\">\n              <p>No results found for \"{{ lookupNode }}\"</p>\n            </div>\n          </div>\n\n          <div class=\"astlookup-footer\">\n            <div class=\"button-group\">\n              <input \n                type=\"button\" \n                value=\"Close\" \n                @click=\"closeModal\"\n                class=\"close-btn\"\n              >\n            </div>\n          </div>\n        </div>\n      </div>\n    </Transition>\n  </Teleport>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, watch } from 'vue'\nimport { api } from '@/utils/api'\nimport type { AxiosErrorResponse } from '@/types/api'\n\ninterface Props {\n  open: boolean\n  localNode?: string // Optional - will use default if not provided\n}\n\ninterface LookupResult {\n  node: string\n  callsign: string\n  description: string\n  location: string\n  status: string\n}\n\ninterface ResultSection {\n  type: string\n  results: LookupResult[]\n}\n\nconst props = defineProps<Props>()\nconst emit = defineEmits<{\n  'update:open': [value: boolean]\n}>()\n\nconst loading = ref(false)\nconst error = ref('')\nconst lookupNode = ref('')\nconst results = ref<ResultSection[]>([])\nconst hasSearched = ref(false)\n\nconst performLookup = async () => {\n  if (!lookupNode.value.trim()) {\n    error.value = 'Please enter a node number or callsign to lookup'\n    hasSearched.value = true\n    return\n  }\n  \n  loading.value = true\n  error.value = ''\n  hasSearched.value = true\n  \n  try {\n    const response = await api.post('/config/astlookup', {\n      lookupNode: lookupNode.value.trim(),\n      localNode: props.localNode || '546051' // Default local node if not provided\n    })\n    \n    if (response.data.success) {\n      results.value = response.data.results\n    } else {\n      error.value = response.data.message || 'Lookup failed'\n    }\n  } catch (err: unknown) {\n    const axiosError = err as AxiosErrorResponse\n    error.value = axiosError.response?.data?.message || 'Lookup failed'\n  } finally {\n    loading.value = false\n  }\n}\n\nconst clearResults = () => {\n  results.value = []\n  hasSearched.value = false\n  error.value = ''\n}\n\nconst getStatusClass = (status: string) => {\n  if (status === 'ONLINE' || status === 'ON') return 'status-online'\n  if (status === 'OFFLINE' || status === 'OFF') return 'status-offline'\n  if (status === 'NOT FOUND') return 'status-not-found'\n  return 'status-unknown'\n}\n\nconst closeModal = () => {\n  emit('update:open', false)\n  // Reset state\n  loading.value = false\n  error.value = ''\n  lookupNode.value = ''\n  results.value = []\n  hasSearched.value = false\n}\n\n// Watch for modal open state\nwatch(() => props.open, (newOpen) => {\n  if (newOpen) {\n    // Focus the input when modal opens\n    setTimeout(() => {\n      const input = document.getElementById('lookupInput')\n      if (input) input.focus()\n    }, 100)\n  }\n})\n</script>\n\n<style scoped>\n.astlookup-modal {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  z-index: 1000;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.astlookup-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n\n.astlookup-content {\n  position: relative;\n  background-color: #1f2937;\n  border: 1px solid #374151;\n  border-radius: 8px;\n  max-width: 1200px;\n  width: 95%;\n  max-height: 90vh;\n  overflow-y: auto;\n  color: #f9fafb;\n}\n\n.astlookup-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 20px;\n  border-bottom: 1px solid #374151;\n  background-color: #111827;\n}\n\n.astlookup-header h2 {\n  margin: 0;\n  color: #f9fafb;\n  font-size: 1.5rem;\n}\n\n.close-button {\n  background: none;\n  border: none;\n  color: #9ca3af;\n  font-size: 1.5rem;\n  cursor: pointer;\n  padding: 0;\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.close-button:hover {\n  color: #f9fafb;\n}\n\n.astlookup-body {\n  padding: 20px;\n}\n\n.lookup-form {\n  margin-bottom: 30px;\n  padding: 20px;\n  background-color: #111827;\n  border-radius: 6px;\n  border: 1px solid #374151;\n}\n\n.form-group {\n  margin-bottom: 15px;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 5px;\n  color: #d1d5db;\n  font-weight: 500;\n}\n\n.form-group input {\n  width: 100%;\n  padding: 10px;\n  border: 1px solid #4b5563;\n  border-radius: 4px;\n  background-color: #374151;\n  color: #f9fafb;\n  font-size: 1rem;\n}\n\n.form-group input:focus {\n  outline: none;\n  border-color: #3b82f6;\n  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);\n}\n\n.form-actions {\n  display: flex;\n  gap: 10px;\n}\n\n.lookup-btn, .clear-btn {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 500;\n}\n\n.lookup-btn {\n  background-color: #2563eb;\n  color: white;\n}\n\n.lookup-btn:hover:not(:disabled) {\n  background-color: #1d4ed8;\n}\n\n.lookup-btn:disabled {\n  background-color: #6b7280;\n  cursor: not-allowed;\n}\n\n.clear-btn {\n  background-color: #6b7280;\n  color: white;\n}\n\n.clear-btn:hover {\n  background-color: #4b5563;\n}\n\n.loading-state, .error-state, .empty-state {\n  text-align: center;\n  padding: 40px 20px;\n}\n\n.loading-state p {\n  color: #9ca3af;\n  font-size: 1.1rem;\n}\n\n.error-state p {\n  color: #ef4444;\n  font-size: 1.1rem;\n}\n\n.empty-state p {\n  color: #6b7280;\n  font-size: 1.1rem;\n}\n\n.lookup-results h3 {\n  margin-bottom: 20px;\n  color: #f9fafb;\n  font-size: 1.3rem;\n}\n\n.results-table-container {\n  overflow-x: auto;\n}\n\n.results-table {\n  width: 100%;\n  border-collapse: collapse;\n  background-color: #111827;\n  border: 1px solid #374151;\n  border-radius: 6px;\n  overflow: hidden;\n}\n\n.results-table th {\n  background-color: #1f2937;\n  color: #f9fafb;\n  border-bottom: 1px solid #000000;\n  padding: 12px 8px;\n  text-align: left;\n  font-weight: 600;\n}\n\n.results-table td {\n  padding: 10px 8px;\n  border-bottom: 1px solid #374151;\n  color: #d1d5db;\n}\n\n.section-header {\n  background-color: #374151;\n}\n\n.section-header td {\n  color: #f9fafb;\n  font-weight: 600;\n  text-align: center;\n  padding: 12px 8px;\n}\n\n.result-row:hover {\n  background-color: #1f2937;\n}\n\n.no-results td {\n  text-align: center;\n  color: #6b7280;\n  font-style: italic;\n  padding: 20px 8px;\n}\n\n.status-online {\n  color: #10b981;\n  font-weight: 600;\n}\n\n.status-offline {\n  color: #ef4444;\n  font-weight: 600;\n}\n\n.status-not-found {\n  color: #f59e0b;\n  font-weight: 600;\n}\n\n.status-unknown {\n  color: #6b7280;\n}\n\n.astlookup-footer {\n  padding: 20px;\n  border-top: 1px solid #374151;\n  background-color: #111827;\n}\n\n.button-group {\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end;\n}\n\n.close-btn {\n  padding: 8px 16px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-size: 0.9rem;\n  font-weight: 500;\n  background-color: #6b7280;\n  color: white;\n}\n\n.close-btn:hover {\n  background-color: #4b5563;\n}\n\n/* Modal transition */\n.modal-enter-active,\n.modal-leave-active {\n  transition: opacity 0.3s ease;\n}\n\n.modal-enter-from,\n.modal-leave-to {\n  opacity: 0;\n}\n</style>\n"],"names":["props","__props","emit","__emit","loading","ref","error","lookupNode","results","hasSearched","performLookup","response","api","err","axiosError","_b","_a","clearResults","getStatusClass","status","closeModal","watch","newOpen","input","_createBlock","_Teleport","_createVNode","_Transition","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","_hoisted_3","_hoisted_4","_hoisted_5","$event","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_toDisplayString","_hoisted_12","_hoisted_13","_Fragment","_renderList","section","sectionIndex","_hoisted_14","_hoisted_15","result","resultIndex","_normalizeClass","_hoisted_16","_hoisted_17"],"mappings":"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"}