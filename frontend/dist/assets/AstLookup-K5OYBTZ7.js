import{e as x,r as v,w as B,G as S,k as l,q as E,P as I,T as O,Q as T,f as a,l as m,g as e,i as D,v as V,B as A,t as n,F as _,p as g,m as K}from"./vendor-BDu8AGUg.js";import{a as M,_ as P}from"./index-Cd0Rm2MK.js";const R={key:0,class:"astlookup-modal"},U={class:"astlookup-content"},$={class:"astlookup-body"},q={class:"lookup-form"},z={class:"form-group"},G=["disabled"],Q={class:"form-actions"},j=["disabled"],H={key:0,class:"loading-state"},J={key:1,class:"error-state"},W={key:2,class:"lookup-results"},X={class:"results-table-container"},Y={class:"results-table"},Z={class:"section-header"},ee={colspan:"5"},oe={key:0,class:"no-results"},te={key:3,class:"empty-state"},se=x({__name:"AstLookup",props:{open:{type:Boolean},localNode:{}},emits:["update:open"],setup(h,{emit:N}){const y=h,C=N,r=v(!1),u=v(""),i=v(""),c=v([]),p=v(!1),b=async()=>{var t,o;if(!i.value.trim()){u.value="Please enter a node number or callsign to lookup",p.value=!0;return}r.value=!0,u.value="",p.value=!0;try{const s=await M.post("/config/astlookup",{lookupNode:i.value.trim(),localNode:y.localNode||"546051"});s.data.success?c.value=s.data.results:u.value=s.data.message||"Lookup failed"}catch(s){const k=s;u.value=((o=(t=k.response)==null?void 0:t.data)==null?void 0:o.message)||"Lookup failed"}finally{r.value=!1}},L=()=>{c.value=[],p.value=!1,u.value=""},w=t=>t==="ONLINE"||t==="ON"?"status-online":t==="OFFLINE"||t==="OFF"?"status-offline":t==="NOT FOUND"?"status-not-found":"status-unknown",f=()=>{C("update:open",!1),r.value=!1,u.value="",i.value="",c.value=[],p.value=!1};return B(()=>y.open,t=>{t&&setTimeout(()=>{const o=document.getElementById("lookupInput");o&&o.focus()},100)}),(t,o)=>(l(),S(T,{to:"body"},[E(O,{name:"modal"},{default:I(()=>[h.open?(l(),a("div",R,[e("div",{class:"astlookup-overlay",onClick:f}),e("div",U,[e("div",{class:"astlookup-header"},[o[1]||(o[1]=e("h2",null,"AllStar Node Lookup",-1)),e("button",{class:"close-button",onClick:f},"Ã—")]),e("div",$,[e("div",q,[e("div",z,[o[2]||(o[2]=e("label",{for:"lookupInput"},"Node/Callsign to Lookup:",-1)),D(e("input",{type:"text",id:"lookupInput","onUpdate:modelValue":o[0]||(o[0]=s=>i.value=s),placeholder:"Enter node number or callsign",maxlength:"20",onKeyup:A(b,["enter"]),disabled:r.value},null,40,G),[[V,i.value]])]),e("div",Q,[e("button",{onClick:b,disabled:r.value,class:"lookup-btn"},n(r.value?"Searching...":"Lookup"),9,j),e("button",{onClick:L,class:"clear-btn"}," Clear ")])]),r.value?(l(),a("div",H,[...o[3]||(o[3]=[e("p",null,"Searching databases...",-1)])])):u.value?(l(),a("div",J,[e("p",null,n(u.value),1)])):c.value.length>0?(l(),a("div",W,[e("h3",null,"Lookup Results for: "+n(i.value),1),e("div",X,[e("table",Y,[o[5]||(o[5]=e("thead",null,[e("tr",null,[e("th",null,"Node"),e("th",null,"Callsign"),e("th",null,"Description"),e("th",null,"Location"),e("th",null,"Status")])],-1)),e("tbody",null,[(l(!0),a(_,null,g(c.value,(s,k)=>(l(),a(_,{key:k},[e("tr",Z,[e("td",ee,n(s.type),1)]),(l(!0),a(_,null,g(s.results,(d,F)=>(l(),a("tr",{key:`${k}-${F}`,class:"result-row"},[e("td",null,n(d.node),1),e("td",null,n(d.callsign),1),e("td",null,n(d.description),1),e("td",null,n(d.location),1),e("td",{class:K(w(d.status))},n(d.status),3)]))),128)),s.results.length===0?(l(),a("tr",oe,[...o[4]||(o[4]=[e("td",{colspan:"5"},"....Nothing Found....",-1)])])):m("",!0)],64))),128))])])])])):p.value?(l(),a("div",te,[e("p",null,'No results found for "'+n(i.value)+'"',1)])):m("",!0)]),e("div",{class:"astlookup-footer"},[e("div",{class:"button-group"},[e("input",{type:"button",value:"Close",onClick:f,class:"close-btn"})])])])])):m("",!0)]),_:1})]))}}),ne=P(se,[["__scopeId","data-v-a89f3f74"]]);export{ne as default};
//# sourceMappingURL=AstLookup-K5OYBTZ7.js.map
